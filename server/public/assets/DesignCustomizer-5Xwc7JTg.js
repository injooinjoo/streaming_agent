import{c as B,u as E,bF as O,a as G,o as K,r as c,j as e,R as C,b as q,bt as J,y as U,bG as H,bC as Y,bB as I,bH as Q,Y as V,E as W,M as X,B as Z,p as ee,by as ae,q as se,bx as ie,bw as te,bv as ne,bu as le,bn as de}from"./index-CAfnZAXi.js";import{C as re,P as ce}from"./package-CNi5BjXo.js";const oe=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],me=B("code",oe),x="",p=[{id:"chat",label:"ì±„íŒ…",icon:e.jsx(X,{size:18}),defaultTheme:"default"},{id:"alert",label:"ì•Œë¦¼",icon:e.jsx(Z,{size:18}),defaultTheme:"default"},{id:"goal",label:"ëª©í‘œ",icon:e.jsx(ee,{size:18}),defaultTheme:"default"},{id:"ticker",label:"ì „ê´‘íŒ",icon:e.jsx(ae,{size:18}),defaultTheme:"default"},{id:"subtitle",label:"ìë§‰",icon:e.jsx(se,{size:18}),defaultTheme:"default"},{id:"roulette",label:"ë£°ë ›",icon:e.jsx(ie,{size:18}),defaultTheme:"default"},{id:"emoji",label:"ì´ëª¨ì§€",icon:e.jsx(te,{size:18}),defaultTheme:"default"},{id:"voting",label:"íˆ¬í‘œ",icon:e.jsx(ne,{size:18}),defaultTheme:"default"},{id:"credits",label:"í¬ë ˆë”§",icon:e.jsx(le,{size:18}),defaultTheme:"default"},{id:"ad",label:"ê´‘ê³ ",icon:e.jsx(de,{size:18}),defaultTheme:"default"}],he=[{id:"default",label:"ê¸°ë³¸",preview:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"neon",label:"ë„¤ì˜¨",preview:"linear-gradient(135deg, #00f260 0%, #0575e6 100%)"},{id:"retro-pink",label:"ë ˆíŠ¸ë¡œ(í•‘í¬)",preview:"linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%)"},{id:"retro-blue",label:"ë ˆíŠ¸ë¡œ(ë¸”ë£¨)",preview:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"gold",label:"ê³¨ë“œ",preview:"linear-gradient(135deg, #f5af19 0%, #f12711 100%)"},{id:"kakao",label:"ì¹´ì¹´ì˜¤í†¡",preview:"linear-gradient(135deg, #fee500 0%, #ffc107 100%)"},{id:"windows",label:"ìœˆë„ìš°",preview:"linear-gradient(135deg, #0078d7 0%, #00bcf2 100%)"},{id:"chalk",label:"ì¹ íŒ",preview:"linear-gradient(135deg, #2d5016 0%, #1a3009 100%)"},{id:"box-white",label:"ë°•ìŠ¤(í°)",preview:"linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)"},{id:"box-black",label:"ë°•ìŠ¤(ê²€)",preview:"linear-gradient(135deg, #1a1a1a 0%, #333333 100%)"},{id:"balloon",label:"í’ì„ ",preview:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"},{id:"postit",label:"í¬ìŠ¤íŠ¸ì‡",preview:"linear-gradient(135deg, #fff740 0%, #ff7eb3 100%)"}],je=()=>{const{designId:l}=E(),[R]=O(),n=R.get("preview")==="true",j=G(),{user:ge,token:m}=K(),[D,z]=c.useState(!!l),[f,S]=c.useState(!1),[s,d]=c.useState({name:"",description:"",category:"chat",tags:"",design_data:{theme:"default",animation:"fadeIn",fontSize:28,fontFamily:"Pretendard",colors:{primary:"#3b82f6",secondary:"#8b5cf6",background:"transparent",text:"#ffffff"},layout:{alignment:"left",padding:10,borderRadius:8}},custom_css:""}),[v,k]=c.useState("visual"),[o,b]=c.useState("theme"),[A,h]=c.useState(0),[ue,F]=c.useState(!1),[g,$]=c.useState(null);c.useEffect(()=>{l&&m&&M()},[l,m]);const M=async()=>{z(!0);try{const a=await fetch(`${x}/api/designs/${l}`,{headers:{Authorization:`Bearer ${m}`}});if(a.ok){const i=(await a.json()).design;d({name:i.name||"",description:i.description||"",category:i.category||"chat",tags:i.tags||"",design_data:typeof i.design_data=="string"?JSON.parse(i.design_data):i.design_data||{},custom_css:i.custom_css||""})}else r("ë””ìì¸ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error"),j("/my-designs")}catch{r("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}finally{z(!1)}},r=(a,t="info")=>{$({message:a,type:t}),setTimeout(()=>$(null),3e3)},T=async(a=!0)=>{if(!s.name.trim()){r("ë””ìì¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}S(!0);try{const t={name:s.name,description:s.description,category:s.category,tags:s.tags,design_data:s.design_data,custom_css:s.custom_css},i=l?`${x}/api/designs/${l}`:`${x}/api/designs`,_=await fetch(i,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(t)});if(_.ok){const w=await _.json();r("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!","success"),l||j(`/designer/${w.design.id}`,{replace:!0})}else{const w=await _.json();r(w.error||"ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}catch{r("ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}finally{S(!1),F(!1)}},L=async()=>{if(!l){await T(!0);return}if(confirm(`ì´ ë””ìì¸ì„ ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì‹¬ì‚¬ì— ì œì¶œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì œì¶œ í›„ì—ëŠ” ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.`))try{const a=await fetch(`${x}/api/designs/${l}/submit`,{method:"POST",headers:{Authorization:`Bearer ${m}`}});if(a.ok)r("ì‹¬ì‚¬ì— ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!","success"),setTimeout(()=>j("/my-designs"),1500);else{const t=await a.json();r(t.error||"ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.","error")}}catch{r("ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error")}},u=(a,t)=>{d(i=>({...i,design_data:{...i.design_data,[a]:t}})),h(i=>i+1)},y=(a,t)=>{d(i=>({...i,design_data:{...i.design_data,colors:{...i.design_data.colors,[a]:t}}})),h(i=>i+1)},N=(a,t)=>{d(i=>({...i,design_data:{...i.design_data,layout:{...i.design_data.layout,[a]:t}}})),h(i=>i+1)},P=a=>{const t=p.find(i=>i.id===a);return t?t.icon:e.jsx(ce,{size:18})};return D?e.jsxs("div",{className:"customizer-loading",children:[e.jsx(C,{size:32,className:"spin"}),e.jsx("p",{children:"ë””ìì¸ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsxs("div",{className:"design-customizer",children:[g&&e.jsxs("div",{className:`customizer-notification ${g.type}`,children:[g.type==="success"?e.jsx(q,{size:18}):e.jsx(J,{size:18}),g.message]}),e.jsxs("header",{className:"customizer-header",children:[e.jsx("div",{className:"header-left",children:e.jsxs(U,{to:"/my-designs",className:"back-link",children:[e.jsx(re,{size:20}),"ë‚´ ë””ìì¸"]})}),e.jsx("div",{className:"header-center",children:e.jsx("input",{type:"text",className:"design-title-input",placeholder:"ë””ìì¸ ì´ë¦„ ì…ë ¥...",value:s.name,onChange:a=>d(t=>({...t,name:a.target.value})),disabled:n})}),e.jsxs("div",{className:"header-right",children:[e.jsxs("button",{className:"header-btn preview-btn",onClick:()=>h(a=>a+1),children:[e.jsx(C,{size:16}),"ìƒˆë¡œê³ ì¹¨"]}),!n&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"header-btn save-btn",onClick:()=>T(!0),disabled:f,children:[f?e.jsx(C,{size:16,className:"spin"}):e.jsx(H,{size:16}),"ì €ì¥"]}),e.jsxs("button",{className:"header-btn submit-btn",onClick:L,disabled:f,children:[e.jsx(Y,{size:16}),"ê³µìœ í•˜ê¸°"]})]})]})]}),e.jsxs("div",{className:"customizer-main",children:[e.jsxs("aside",{className:"customizer-sidebar",children:[e.jsxs("div",{className:"mode-toggle",children:[e.jsxs("button",{className:`mode-btn ${v==="visual"?"active":""}`,onClick:()=>k("visual"),children:[e.jsx(I,{size:16}),"ë¹„ì£¼ì–¼"]}),e.jsxs("button",{className:`mode-btn ${v==="code"?"active":""}`,onClick:()=>k("code"),children:[e.jsx(me,{size:16}),"ì½”ë“œ"]})]}),v==="visual"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sidebar-section",children:[e.jsx("h3",{className:"section-title",children:"ì˜¤ë²„ë ˆì´ íƒ€ì…"}),e.jsx("div",{className:"overlay-type-grid",children:p.map(a=>e.jsxs("button",{className:`type-btn ${s.category===a.id?"active":""}`,onClick:()=>d(t=>({...t,category:a.id})),disabled:n,children:[a.icon,e.jsx("span",{children:a.label})]},a.id))})]}),e.jsxs("div",{className:"panel-tabs",children:[e.jsxs("button",{className:`panel-tab ${o==="theme"?"active":""}`,onClick:()=>b("theme"),children:[e.jsx(Q,{size:16}),"í…Œë§ˆ"]}),e.jsxs("button",{className:`panel-tab ${o==="style"?"active":""}`,onClick:()=>b("style"),children:[e.jsx(I,{size:16}),"ìŠ¤íƒ€ì¼"]}),e.jsxs("button",{className:`panel-tab ${o==="layout"?"active":""}`,onClick:()=>b("layout"),children:[e.jsx(V,{size:16}),"ë ˆì´ì•„ì›ƒ"]})]}),o==="theme"&&e.jsxs("div",{className:"panel-content",children:[e.jsx("h4",{children:"í…Œë§ˆ ì„ íƒ"}),e.jsx("div",{className:"theme-grid",children:he.map(a=>e.jsxs("button",{className:`theme-card ${s.design_data.theme===a.id?"active":""}`,onClick:()=>u("theme",a.id),disabled:n,children:[e.jsx("div",{className:"theme-preview",style:{background:a.preview}}),e.jsx("span",{children:a.label})]},a.id))}),e.jsx("h4",{children:"ì• ë‹ˆë©”ì´ì…˜"}),e.jsxs("select",{value:s.design_data.animation||"fadeIn",onChange:a=>u("animation",a.target.value),disabled:n,children:[e.jsx("option",{value:"fadeIn",children:"í˜ì´ë“œ ì¸"}),e.jsx("option",{value:"slideIn",children:"ìŠ¬ë¼ì´ë“œ ì¸"}),e.jsx("option",{value:"bounceIn",children:"ë°”ìš´ìŠ¤ ì¸"}),e.jsx("option",{value:"scaleIn",children:"ìŠ¤ì¼€ì¼ ì¸"}),e.jsx("option",{value:"none",children:"ì—†ìŒ"})]})]}),o==="style"&&e.jsxs("div",{className:"panel-content",children:[e.jsx("h4",{children:"í°íŠ¸"}),e.jsxs("select",{value:s.design_data.fontFamily||"Pretendard",onChange:a=>u("fontFamily",a.target.value),disabled:n,children:[e.jsx("option",{value:"Pretendard",children:"Pretendard"}),e.jsx("option",{value:"Noto Sans KR",children:"Noto Sans KR"}),e.jsx("option",{value:"Nanum Gothic",children:"ë‚˜ëˆ”ê³ ë”•"}),e.jsx("option",{value:"Nanum Myeongjo",children:"ë‚˜ëˆ”ëª…ì¡°"}),e.jsx("option",{value:"D2Coding",children:"D2Coding"}),e.jsx("option",{value:"Gmarket Sans",children:"Gmarket Sans"})]}),e.jsxs("div",{className:"range-input",children:[e.jsxs("label",{children:["í°íŠ¸ í¬ê¸°: ",s.design_data.fontSize||28,"px"]}),e.jsx("input",{type:"range",min:"12",max:"48",value:s.design_data.fontSize||28,onChange:a=>u("fontSize",parseInt(a.target.value)),disabled:n})]}),e.jsx("h4",{children:"ìƒ‰ìƒ"}),e.jsxs("div",{className:"color-inputs",children:[e.jsxs("div",{className:"color-input",children:[e.jsx("label",{children:"ê¸°ë³¸ ìƒ‰ìƒ"}),e.jsx("input",{type:"color",value:s.design_data.colors?.primary||"#3b82f6",onChange:a=>y("primary",a.target.value),disabled:n})]}),e.jsxs("div",{className:"color-input",children:[e.jsx("label",{children:"ë³´ì¡° ìƒ‰ìƒ"}),e.jsx("input",{type:"color",value:s.design_data.colors?.secondary||"#8b5cf6",onChange:a=>y("secondary",a.target.value),disabled:n})]}),e.jsxs("div",{className:"color-input",children:[e.jsx("label",{children:"í…ìŠ¤íŠ¸ ìƒ‰ìƒ"}),e.jsx("input",{type:"color",value:s.design_data.colors?.text||"#ffffff",onChange:a=>y("text",a.target.value),disabled:n})]})]})]}),o==="layout"&&e.jsxs("div",{className:"panel-content",children:[e.jsx("h4",{children:"ì •ë ¬"}),e.jsx("div",{className:"alignment-buttons",children:["left","center","right"].map(a=>e.jsx("button",{className:`align-btn ${s.design_data.layout?.alignment===a?"active":""}`,onClick:()=>N("alignment",a),disabled:n,children:a==="left"?"ì™¼ìª½":a==="center"?"ê°€ìš´ë°":"ì˜¤ë¥¸ìª½"},a))}),e.jsxs("div",{className:"range-input",children:[e.jsxs("label",{children:["ì—¬ë°±: ",s.design_data.layout?.padding||10,"px"]}),e.jsx("input",{type:"range",min:"0",max:"40",value:s.design_data.layout?.padding||10,onChange:a=>N("padding",parseInt(a.target.value)),disabled:n})]}),e.jsxs("div",{className:"range-input",children:[e.jsxs("label",{children:["ëª¨ì„œë¦¬ ë‘¥ê¸€ê¸°: ",s.design_data.layout?.borderRadius||8,"px"]}),e.jsx("input",{type:"range",min:"0",max:"24",value:s.design_data.layout?.borderRadius||8,onChange:a=>N("borderRadius",parseInt(a.target.value)),disabled:n})]})]})]}):e.jsxs("div",{className:"code-editor-container",children:[e.jsx("h3",{className:"section-title",children:"ì»¤ìŠ¤í…€ CSS"}),e.jsx("p",{className:"code-help",children:"CSSë¥¼ ì§ì ‘ ì‘ì„±í•˜ì—¬ ë””ìì¸ì„ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆí•˜ì„¸ìš”."}),e.jsx("textarea",{className:"code-editor",placeholder:`/* ì»¤ìŠ¤í…€ CSSë¥¼ ì…ë ¥í•˜ì„¸ìš” */
.chat-message {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  padding: 10px 16px;
}

.chat-nickname {
  color: #ffd700;
  font-weight: bold;
}`,value:s.custom_css,onChange:a=>d(t=>({...t,custom_css:a.target.value})),disabled:n})]}),e.jsxs("div",{className:"sidebar-section design-info-section",children:[e.jsx("h3",{className:"section-title",children:"ë””ìì¸ ì •ë³´"}),e.jsxs("div",{className:"info-input",children:[e.jsx("label",{children:"ì„¤ëª…"}),e.jsx("textarea",{placeholder:"ë””ìì¸ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…...",value:s.description,onChange:a=>d(t=>({...t,description:a.target.value})),disabled:n,rows:3})]}),e.jsxs("div",{className:"info-input",children:[e.jsx("label",{children:"íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„)"}),e.jsx("input",{type:"text",placeholder:"ë„¤ì˜¨, ì‚¬ì´ë²„í‘í¬, ê²Œì„...",value:s.tags,onChange:a=>d(t=>({...t,tags:a.target.value})),disabled:n})]})]})]}),e.jsxs("main",{className:"customizer-preview",children:[e.jsxs("div",{className:"preview-header",children:[e.jsxs("h3",{children:[e.jsx(W,{size:18}),"ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs("span",{className:"preview-category",children:[P(s.category),p.find(a=>a.id===s.category)?.label]})]}),e.jsxs("div",{className:"preview-canvas",children:[e.jsxs("div",{className:"preview-content",style:{"--primary-color":s.design_data.colors?.primary||"#3b82f6","--secondary-color":s.design_data.colors?.secondary||"#8b5cf6","--text-color":s.design_data.colors?.text||"#ffffff","--font-family":s.design_data.fontFamily||"Pretendard","--font-size":`${s.design_data.fontSize||28}px`,"--padding":`${s.design_data.layout?.padding||10}px`,"--border-radius":`${s.design_data.layout?.borderRadius||8}px`,"--text-align":s.design_data.layout?.alignment||"left"},children:[s.category==="chat"&&e.jsxs("div",{className:`sample-chat theme-${s.design_data.theme}`,children:[e.jsxs("div",{className:"sample-message",children:[e.jsx("span",{className:"sample-nickname",children:"ìŠ¤íŠ¸ë¦¬ë¨¸"}),e.jsx("span",{className:"sample-text",children:"ì•ˆë…•í•˜ì„¸ìš”! ë°©ì†¡ ì‹œì‘í•©ë‹ˆë‹¤~"})]}),e.jsxs("div",{className:"sample-message",children:[e.jsx("span",{className:"sample-nickname",children:"ì‹œì²­ì123"}),e.jsx("span",{className:"sample-text",children:"ì˜¤ëŠ˜ ì»¨í…ì¸  ë­í•´ìš”?"})]}),e.jsxs("div",{className:"sample-message",children:[e.jsx("span",{className:"sample-nickname",children:"íŒ¬í´ëŸ½"}),e.jsx("span",{className:"sample-text",children:"ã…‹ã…‹ã…‹ã…‹ ì¬ë°Œë‹¤"})]})]}),s.category==="alert"&&e.jsxs("div",{className:`sample-alert theme-${s.design_data.theme}`,children:[e.jsx("div",{className:"alert-icon",children:"ğŸ‰"}),e.jsxs("div",{className:"alert-content",children:[e.jsx("div",{className:"alert-title",children:"ë³„í’ì„  1,000ê°œ"}),e.jsx("div",{className:"alert-user",children:"í›„ì›ìë‹˜"}),e.jsx("div",{className:"alert-message",children:"í•­ìƒ ì‘ì›í•©ë‹ˆë‹¤!"})]})]}),s.category==="goal"&&e.jsxs("div",{className:`sample-goal theme-${s.design_data.theme}`,children:[e.jsx("div",{className:"goal-title",children:"í›„ì› ëª©í‘œ"}),e.jsx("div",{className:"goal-progress",children:e.jsx("div",{className:"goal-bar",style:{width:"65%"}})}),e.jsx("div",{className:"goal-text",children:"650,000 / 1,000,000ì›"})]}),!["chat","alert","goal"].includes(s.category)&&e.jsxs("div",{className:"sample-placeholder",children:[P(s.category),e.jsxs("p",{children:[p.find(a=>a.id===s.category)?.label," ë¯¸ë¦¬ë³´ê¸°"]})]})]}),s.custom_css&&e.jsx("style",{children:s.custom_css})]},A),e.jsx("div",{className:"preview-info",children:e.jsx("p",{children:"ë¯¸ë¦¬ë³´ê¸°ëŠ” ì‹¤ì œ ì˜¤ë²„ë ˆì´ì˜ ê·¼ì‚¬ì¹˜ì…ë‹ˆë‹¤. ì‹¤ì œ ì ìš© ì‹œ ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."})})]})]})]})};export{je as default};
