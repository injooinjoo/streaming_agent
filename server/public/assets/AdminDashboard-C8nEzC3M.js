import{c as Tt,a2 as mt,r as y,a3 as ds,a4 as jl,a5 as je,a6 as Fr,a7 as _l,a8 as kl,a9 as mi,aa as Nl,ab as Br,ac as mn,ad as wl,ae as $r,af as pn,ag as Sl,ah as Cl,ai as Pl,aj as Ml,ak as Al,al as Ol,am as Re,an as Vr,ao as pi,ap as gi,aq as Te,ar as Ee,as as Wr,at as Hr,au as Kr,av as xi,aw as Yr,ax as zl,ay as Dl,az as Rl,aA as dt,aB as Tl,aC as El,aD as Ur,aE as Xr,aF as Gr,aG as qr,aH as Ll,aI as Il,aJ as Fl,aK as Zr,aL as Bl,aM as si,aN as $l,aO as Vl,aP as Wl,aQ as $n,aR as Hl,aS as Kl,aT as Yl,aU as Jr,aV as Ul,aW as Xl,aX as Vn,aY as Gl,aZ as Wn,a_ as ql,a$ as Zl,b0 as Jl,b1 as Ql,b2 as Is,b3 as ec,b4 as tc,b5 as sc,b6 as ic,n as Z,j as a,L as We,D as Ce,a0 as Qr,A as He,T as we,g as ht,R as he,U as eo,m as ge,C as Ds,v as to,w as so,o as Et,b7 as de,b8 as nc,b9 as Be,ba as $e,bb as Oe,bc as xe,bd as tt,be as io,bf as no,bg as ao,bh as ro,bi as js,bj as Gt,bk as Qi,bl as ac,bm as ve,E as Yt,bn as bi,M as Mt,k as At,bo as gn,p as Ot,bp as xn,Z as ii,h as rc,F as oo,bq as en,br as tn,bs as nt,N as bn,H as oc,bt as lc,d as lo,X as ps,b as Fs,bu as cc,bv as dc,bw as hc,bx as uc,by as fc,q as mc,bz as pc,B as gc,a as xc,S as Hn,bA as bc,bB as vc,bC as yc}from"./index-D0gG5lHI.js";import{C as jc,P as co}from"./package-Bozdffjx.js";import{A as _s}from"./award-CvBweNXZ.js";const _c=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],kc=Tt("footprints",_c);const Nc=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wc=Tt("layout-dashboard",Nc);const Sc=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],ho=Tt("mouse-pointer",Sc);const Cc=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],vn=Tt("radio",Cc);const Pc=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],Kn=Tt("tv",Pc);const Mc=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ac=Tt("wifi-off",Mc);const Oc=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],uo=Tt("wifi",Oc);var zc=["points","className","baseLinePoints","connectNulls"],Yn;function Ut(){return Ut=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Ut.apply(null,arguments)}function Dc(s,e){if(s==null)return{};var t,i,n=Rc(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function Rc(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}function Tc(s,e){return e||(e=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(e)}}))}var Un=s=>s&&s.x===+s.x&&s.y===+s.y,Ec=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return e.forEach(i=>{Un(i)?t[t.length-1].push(i):t[t.length-1].length>0&&t.push([])}),Un(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},gs=(s,e)=>{var t=Ec(s);e&&(t=[t.reduce((n,r)=>[...n,...r],[])]);var i=t.map(n=>n.reduce((r,o,l)=>jl(Yn||(Yn=Tc(["","","",",",""])),r,l===0?"M":"L",o.x,o.y),"")).join("");return t.length===1?"".concat(i,"Z"):i},Lc=(s,e,t)=>{var i=gs(s,t);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(gs(Array.from(e).reverse(),t).slice(1))},fo=s=>{var{points:e,className:t,baseLinePoints:i,connectNulls:n}=s,r=Dc(s,zc);if(!e||!e.length)return null;var o=mt("recharts-polygon",t);if(i&&i.length){var l=r.stroke&&r.stroke!=="none",c=Lc(e,i,n);return y.createElement("g",{className:o},y.createElement("path",Ut({},ds(r),{fill:c.slice(-1)==="Z"?r.fill:"none",stroke:"none",d:c})),l?y.createElement("path",Ut({},ds(r),{fill:"none",d:gs(e,n)})):null,l?y.createElement("path",Ut({},ds(r),{fill:"none",d:gs(i,n)})):null)}var d=gs(e,n);return y.createElement("path",Ut({},ds(r),{fill:d.slice(-1)==="Z"?r.fill:"none",className:o,d}))},yn=(s,e,t)=>{switch(e){case"angleAxis":return pn(s,t);case"radiusAxis":return $r(s,t);default:throw new Error("Unexpected axis type: ".concat(e))}},jn=(s,e,t)=>{switch(e){case"angleAxis":return Cl(s,t);case"radiusAxis":return Sl(s,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Qt=je([yn,Fr,_l,jn],kl),mo=je([mi,Pl,Ml,mn],Al),es=je([mi,yn,Fr,Qt,Nl,jn,Br,mo,mn],wl),Ic=je([es],s=>{if(s){var e=new Map;return s.forEach(t=>{var i=(t.coordinate+360)%360;e.has(i)||e.set(i,t)}),Array.from(e.values())}});je([mi,yn,Qt,jn,Br,mo,mn],Ol);var Fc=(s,e)=>es(s,"angleAxis",e,!1),Bc=je([Fc],s=>{if(s)return s.map(e=>e.coordinate)}),$c=(s,e)=>es(s,"radiusAxis",e,!1),Vc=je([$c],s=>{if(s)return s.map(e=>e.coordinate)}),Wc=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius","polarAngles","polarRadius"];function Hc(s,e){if(s==null)return{};var t,i,n=Kc(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function Kc(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}function ze(){return ze=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},ze.apply(null,arguments)}function Xn(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function ks(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(t),!0).forEach(function(i){Yc(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Yc(s,e,t){return(e=Uc(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Uc(s){var e=Xc(s,"string");return typeof e=="symbol"?e:e+""}function Xc(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}var Gc=(s,e,t,i)=>{var n="";return i.forEach((r,o)=>{var l=Ee(e,t,s,r);o?n+="L ".concat(l.x,",").concat(l.y):n+="M ".concat(l.x,",").concat(l.y)}),n+="Z",n},qc=s=>{var{cx:e,cy:t,innerRadius:i,outerRadius:n,polarAngles:r,radialLines:o}=s;if(!r||!r.length||!o)return null;var l=ks({stroke:"#ccc"},Te(s));return y.createElement("g",{className:"recharts-polar-grid-angle"},r.map(c=>{var d=Ee(e,t,i,c),h=Ee(e,t,n,c);return y.createElement("line",ze({key:"line-".concat(c)},l,{x1:d.x,y1:d.y,x2:h.x,y2:h.y}))}))},Gn=s=>{var{cx:e,cy:t,radius:i}=s,n=ks({stroke:"#ccc",fill:"none"},Te(s));return y.createElement("circle",ze({},n,{className:mt("recharts-polar-grid-concentric-circle",s.className),cx:e,cy:t,r:i}))},qn=s=>{var{radius:e}=s,t=ks({stroke:"#ccc",fill:"none"},Te(s));return y.createElement("path",ze({},t,{className:mt("recharts-polar-grid-concentric-polygon",s.className),d:Gc(e,s.cx,s.cy,s.polarAngles)}))},Zc=s=>{var{polarRadius:e,gridType:t}=s;if(!e||!e.length)return null;var i=Math.max(...e),n=s.fill&&s.fill!=="none";return y.createElement("g",{className:"recharts-polar-grid-concentric"},n&&t==="circle"&&y.createElement(Gn,ze({},s,{radius:i})),n&&t!=="circle"&&y.createElement(qn,ze({},s,{radius:i})),e.map((r,o)=>{var l=o;return t==="circle"?y.createElement(Gn,ze({key:l},s,{fill:"none",radius:r})):y.createElement(qn,ze({key:l},s,{fill:"none",radius:r}))}))},vi=s=>{var e,t,i,n,r,o,l,c,d,{gridType:h="polygon",radialLines:u=!0,angleAxisId:f=0,radiusAxisId:m=0,cx:p,cy:x,innerRadius:b,outerRadius:j,polarAngles:v,polarRadius:S}=s,_=Hc(s,Wc),k=Re(gi),C=Re(O=>Bc(O,f)),M=Re(O=>Vc(O,m)),N=Array.isArray(v)?v:C,z=Array.isArray(S)?S:M;if(N==null||z==null)return null;var w=ks(ks({cx:(e=(t=k?.cx)!==null&&t!==void 0?t:p)!==null&&e!==void 0?e:0,cy:(i=(n=k?.cy)!==null&&n!==void 0?n:x)!==null&&i!==void 0?i:0,innerRadius:(r=(o=k?.innerRadius)!==null&&o!==void 0?o:b)!==null&&r!==void 0?r:0,outerRadius:(l=(c=k?.outerRadius)!==null&&c!==void 0?c:j)!==null&&l!==void 0?l:0,polarAngles:N,polarRadius:z},_),{},{zIndex:(d=_.zIndex)!==null&&d!==void 0?d:Vr.grid}),{outerRadius:g}=w;return g<=0?null:y.createElement(pi,{zIndex:w.zIndex},y.createElement("g",{className:"recharts-polar-grid"},y.createElement(Zc,ze({gridType:h,radialLines:u},w,{polarAngles:N,polarRadius:z})),y.createElement(qc,ze({gridType:h,radialLines:u},w,{polarAngles:N,polarRadius:z}))))};vi.displayName="PolarGrid";var zi={},Di={},Zn;function Jc(){return Zn||(Zn=1,(function(s){Object.defineProperty(s,Symbol.toStringTag,{value:"Module"});function e(t,i){if(t.length===0)return;let n=t[0],r=i(n);for(let o=1;o<t.length;o++){const l=t[o],c=i(l);c>r&&(r=c,n=l)}return n}s.maxBy=e})(Di)),Di}var Jn;function Qc(){return Jn||(Jn=1,(function(s){Object.defineProperty(s,Symbol.toStringTag,{value:"Module"});const e=Jc(),t=Hr(),i=Wr();function n(r,o){if(r!=null)return e.maxBy(Array.from(r),i.iteratee(o??t.identity))}s.maxBy=n})(zi)),zi}var Ri,Qn;function ed(){return Qn||(Qn=1,Ri=Qc().maxBy),Ri}var td=ed();const sd=Kr(td);var Ti={},Ei={},ea;function id(){return ea||(ea=1,(function(s){Object.defineProperty(s,Symbol.toStringTag,{value:"Module"});function e(t,i){if(t.length===0)return;let n=t[0],r=i(n);for(let o=1;o<t.length;o++){const l=t[o],c=i(l);c<r&&(r=c,n=l)}return n}s.minBy=e})(Ei)),Ei}var ta;function nd(){return ta||(ta=1,(function(s){Object.defineProperty(s,Symbol.toStringTag,{value:"Module"});const e=id(),t=Hr(),i=Wr();function n(r,o){if(r!=null)return e.minBy(Array.from(r),i.iteratee(o??t.identity))}s.minBy=n})(Ti)),Ti}var Li,sa;function ad(){return sa||(sa=1,Li=nd().minBy),Li}var rd=ad();const od=Kr(rd);var ld=["cx","cy","angle","axisLine"],cd=["angle","tickFormatter","stroke","tick"];function Ns(){return Ns=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Ns.apply(null,arguments)}function ia(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function Ze(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ia(Object(t),!0).forEach(function(i){dd(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ia(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function dd(s,e,t){return(e=hd(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function hd(s){var e=ud(s,"string");return typeof e=="symbol"?e:e+""}function ud(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function po(s,e){if(s==null)return{};var t,i,n=fd(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function fd(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}var md="radiusAxis";function pd(s){var e=Yr();return y.useEffect(()=>(e(zl(s)),()=>{e(Dl(s))})),null}var gd=(s,e,t,i)=>{var{coordinate:n}=s;return Ee(t,i,n,e)},xd=s=>{var e;switch(s){case"left":e="end";break;case"right":e="start";break;default:e="middle";break}return e},bd=(s,e,t,i)=>{var n=sd(i,o=>o.coordinate||0),r=od(i,o=>o.coordinate||0);return{cx:e,cy:t,startAngle:s,endAngle:s,innerRadius:r?.coordinate||0,outerRadius:n?.coordinate||0,clockWise:!1}},vd=(s,e)=>{var{cx:t,cy:i,angle:n,axisLine:r}=s,o=po(s,ld),l=e.reduce((u,f)=>[Math.min(u[0],f.coordinate),Math.max(u[1],f.coordinate)],[1/0,-1/0]),c=Ee(t,i,l[0],n),d=Ee(t,i,l[1],n),h=Ze(Ze(Ze({},Te(o)),{},{fill:"none"},Te(r)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return y.createElement("line",Ns({className:"recharts-polar-radius-axis-line"},h))},yd=(s,e,t)=>{var i;return y.isValidElement(s)?i=y.cloneElement(s,e):typeof s=="function"?i=s(e):i=y.createElement(qr,Ns({},e,{className:"recharts-polar-radius-axis-tick-value"}),t),i},jd=(s,e)=>{var{angle:t,tickFormatter:i,stroke:n,tick:r}=s,o=po(s,cd),l=xd(s.orientation),c=Te(o),d=Ur(r),h=e.map((u,f)=>{var m=gd(u,s.angle,s.cx,s.cy),p=Ze(Ze(Ze(Ze({textAnchor:l,transform:"rotate(".concat(90-t,", ").concat(m.x,", ").concat(m.y,")")},c),{},{stroke:"none",fill:n},d),{},{index:f},m),{},{payload:u});return y.createElement(dt,Ns({className:mt("recharts-polar-radius-axis-tick",Gr(r)),key:"tick-".concat(u.coordinate)},Xr(s,u,f)),yd(r,p,i?i(u.value,f):u.value))});return y.createElement(dt,{className:"recharts-polar-radius-axis-ticks"},h)},_d=s=>{var{radiusAxisId:e}=s,t=Re(gi),i=Re(c=>Qt(c,"radiusAxis",e)),n=Re(c=>es(c,"radiusAxis",e,!1));if(t==null||!n||!n.length||i==null)return null;var r=Ze(Ze({},s),{},{scale:i},t),{tick:o,axisLine:l}=r;return y.createElement(pi,{zIndex:r.zIndex},y.createElement(dt,{className:mt("recharts-polar-radius-axis",md,r.className)},l&&vd(r,n),o&&jd(r,n),y.createElement(Tl,bd(r.angle,r.cx,r.cy,n),y.createElement(El,{label:r.label}),r.children)))};function yi(s){var e=xi(s,Rl);return y.createElement(y.Fragment,null,y.createElement(pd,{domain:e.domain,id:e.radiusAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDataOverflow:e.allowDataOverflow,reversed:e.reversed,includeHidden:e.includeHidden,allowDecimals:e.allowDecimals,ticks:e.ticks,tickCount:e.tickCount,tick:e.tick}),y.createElement(_d,e))}yi.displayName="PolarRadiusAxis";var kd=["children"];function zt(){return zt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},zt.apply(null,arguments)}function na(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function Fe(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?na(Object(t),!0).forEach(function(i){Nd(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):na(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Nd(s,e,t){return(e=wd(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function wd(s){var e=Sd(s,"string");return typeof e=="symbol"?e:e+""}function Sd(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Cd(s,e){if(s==null)return{};var t,i,n=Pd(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function Pd(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}var aa=1e-5,Md=Math.cos(si(45)),Ad="angleAxis";function Od(s){var e=Yr(),t=y.useMemo(()=>{var{children:r}=s,o=Cd(s,kd);return o},[s]),i=Re(r=>pn(r,t.id)),n=t===i;return y.useEffect(()=>(e(Ll(t)),()=>{e(Il(t))}),[e,t]),n?s.children:null}var zd=(s,e)=>{var{cx:t,cy:i,radius:n,orientation:r,tickSize:o}=e,l=o||8,c=Ee(t,i,n,s.coordinate),d=Ee(t,i,n+(r==="inner"?-1:1)*l,s.coordinate);return{x1:c.x,y1:c.y,x2:d.x,y2:d.y}},Dd=(s,e)=>{var t=Math.cos(si(-s.coordinate));return t>aa?e==="outer"?"start":"end":t<-aa?e==="outer"?"end":"start":"middle"},Rd=s=>{var e=Math.cos(si(-s.coordinate)),t=Math.sin(si(-s.coordinate));return Math.abs(e)<=Md?t>0?"start":"end":"middle"},Td=s=>{var{cx:e,cy:t,radius:i,axisLineType:n,axisLine:r,ticks:o}=s;if(!r)return null;var l=Fe(Fe({},Te(s)),{},{fill:"none"},Te(r));if(n==="circle")return y.createElement(Bl,zt({className:"recharts-polar-angle-axis-line"},l,{cx:e,cy:t,r:i}));var c=o.map(d=>Ee(e,t,i,d.coordinate));return y.createElement(fo,zt({className:"recharts-polar-angle-axis-line"},l,{points:c}))},Ed=s=>{var{tick:e,tickProps:t,value:i}=s;return e?y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?e(t):y.createElement(qr,zt({},t,{className:"recharts-polar-angle-axis-tick-value"}),i):null},Ld=s=>{var{tick:e,tickLine:t,tickFormatter:i,stroke:n,ticks:r}=s,o=Te(s),l=Ur(e),c=Fe(Fe({},o),{},{fill:"none"},Te(t)),d=r.map((h,u)=>{var f=zd(h,s),m=Dd(h,s.orientation),p=Rd(h),x=Fe(Fe(Fe({},o),{},{textAnchor:m,verticalAnchor:p,stroke:"none",fill:n},l),{},{index:u,payload:h,x:f.x2,y:f.y2});return y.createElement(dt,zt({className:mt("recharts-polar-angle-axis-tick",Gr(e)),key:"tick-".concat(h.coordinate)},Xr(s,h,u)),t&&y.createElement("line",zt({className:"recharts-polar-angle-axis-tick-line"},c,f)),y.createElement(Ed,{tick:e,tickProps:x,value:i?i(h.value,u):h.value}))});return y.createElement(dt,{className:"recharts-polar-angle-axis-ticks"},d)},Id=s=>{var{angleAxisId:e}=s,t=Re(gi),i=Re(l=>Qt(l,"angleAxis",e)),n=Zr(),r=Re(l=>Ic(l,"angleAxis",e,n));if(t==null||!r||!r.length||i==null)return null;var o=Fe(Fe(Fe({},s),{},{scale:i},t),{},{radius:t.outerRadius,ticks:r});return y.createElement(pi,{zIndex:o.zIndex},y.createElement(dt,{className:mt("recharts-polar-angle-axis",Ad,o.className)},y.createElement(Td,o),y.createElement(Ld,o)))};function ji(s){var e=xi(s,Fl);return y.createElement(Od,{id:e.angleAxisId,scale:e.scale,type:e.type,dataKey:e.dataKey,unit:void 0,name:e.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:e.reversed,includeHidden:!1,allowDecimals:e.allowDecimals,tickCount:e.tickCount,ticks:e.ticks,tick:e.tick,domain:e.domain},y.createElement(Id,e))}ji.displayName="PolarAngleAxis";function ra(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function ni(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ra(Object(t),!0).forEach(function(i){Fd(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ra(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Fd(s,e,t){return(e=Bd(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Bd(s){var e=$d(s,"string");return typeof e=="symbol"?e:e+""}function $d(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}var go=(s,e)=>Qt(s,"radiusAxis",e),Vd=je([go],s=>{if(s!=null)return{scale:s}}),Wd=je([$r,go],(s,e)=>{if(!(s==null||e==null))return ni(ni({},s),{},{scale:e})}),Hd=(s,e,t,i)=>es(s,"radiusAxis",e,i),xo=(s,e,t)=>pn(s,t),bo=(s,e,t)=>Qt(s,"angleAxis",t),Kd=je([xo,bo],(s,e)=>{if(!(s==null||e==null))return ni(ni({},s),{},{scale:e})}),Yd=(s,e,t,i)=>es(s,"angleAxis",t,i),Ud=je([xo,bo,gi],(s,e,t)=>{if(!(t==null||e==null))return{scale:e,type:s.type,dataKey:s.dataKey,cx:t.cx,cy:t.cy}}),Xd=(s,e,t,i,n)=>n,Gd=je([mi,Wd,Hd,Kd,Yd],(s,e,t,i,n)=>Wl(s,"radiusAxis")?$n(e,t,!1):$n(i,n,!1)),qd=je([Vl,Xd],(s,e)=>{if(s!=null){var t=s.find(i=>i.type==="radar"&&e===i.id);return t?.dataKey}}),Zd=je([Vd,Ud,$l,qd,Gd],(s,e,t,i,n)=>{var{chartData:r,dataStartIndex:o,dataEndIndex:l}=t;if(!(s==null||e==null||r==null||n==null||i==null)){var c=r.slice(o,l+1);return oh({radiusAxis:s,angleAxis:e,displayedData:c,dataKey:i,bandSize:n})}}),Jd=["id"];function ws(){return ws=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},ws.apply(null,arguments)}function oa(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function ye(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oa(Object(t),!0).forEach(function(i){Qd(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):oa(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function Qd(s,e,t){return(e=eh(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function eh(s){var e=th(s,"string");return typeof e=="symbol"?e:e+""}function th(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function sh(s,e){if(s==null)return{};var t,i,n=ih(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function ih(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}function _n(s,e){return s&&s!=="none"?s:e}var nh=s=>{var{dataKey:e,name:t,stroke:i,fill:n,legendType:r,hide:o}=s;return[{inactive:o,dataKey:e,type:r,color:_n(i,n),value:Jr(t,e),payload:s}]},ah=y.memo(s=>{var{dataKey:e,stroke:t,strokeWidth:i,fill:n,name:r,hide:o,tooltipType:l,id:c}=s,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:t,strokeWidth:i,fill:n,nameKey:void 0,dataKey:e,name:Jr(r,e),hide:o,type:l,color:_n(t,n),unit:"",graphicalItemId:c}};return y.createElement(Ul,{tooltipEntrySettings:d})});function rh(s){var{points:e,props:t}=s,{dot:i,dataKey:n}=t,{id:r}=t,o=sh(t,Jd),l=Te(o);return y.createElement(ec,{points:e,dot:i,className:"recharts-radar-dots",dotClassName:"recharts-radar-dot",dataKey:n,baseProps:l})}function oh(s){var{radiusAxis:e,angleAxis:t,displayedData:i,dataKey:n,bandSize:r}=s,{cx:o,cy:l}=t,c=!1,d=[],h=t.type!=="number"?r??0:0;i.forEach((f,m)=>{var p=Vn(f,t.dataKey,m),x=Vn(f,n),b=t.scale(p)+h,j=Array.isArray(x)?Gl(x):x,v=Wn(j)?0:e.scale(j);Array.isArray(x)&&x.length>=2&&(c=!0),d.push(ye(ye({},Ee(o,l,v,b)),{},{name:p,value:x,cx:o,cy:l,radius:v,angle:b,payload:f}))});var u=[];return c&&d.forEach(f=>{if(Array.isArray(f.value)){var m=f.value[0],p=Wn(m)?0:e.scale(m);u.push(ye(ye({},f),{},{radius:p},Ee(o,l,p,f.angle)))}else u.push(f)}),{points:d,isRange:c,baseLinePoints:u}}function lh(s){var{showLabels:e,points:t,children:i}=s,n=t.map(r=>{var o,l={x:r.x,y:r.y,width:0,lowerWidth:0,upperWidth:0,height:0};return ye(ye({},l),{},{value:(o=r.value)!==null&&o!==void 0?o:"",payload:r.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return y.createElement(Ql,{value:e?n:void 0},i)}function ch(s){var{points:e,baseLinePoints:t,props:i}=s;if(e==null)return null;var{shape:n,isRange:r,connectNulls:o}=i,l=h=>{var{onMouseEnter:u}=i;u&&u(i,h)},c=h=>{var{onMouseLeave:u}=i;u&&u(i,h)},d;return y.isValidElement(n)?d=y.cloneElement(n,ye(ye({},i),{},{points:e})):typeof n=="function"?d=n(ye(ye({},i),{},{points:e})):d=y.createElement(fo,ws({},ds(i),{onMouseEnter:l,onMouseLeave:c,points:e,baseLinePoints:r?t:void 0,connectNulls:o})),y.createElement(dt,{className:"recharts-radar-polygon"},d,y.createElement(rh,{props:i,points:e}))}var la=(s,e,t)=>(i,n)=>{var r=s&&s[Math.floor(n*e)];return r?ye(ye({},i),{},{x:Is(r.x,i.x,t),y:Is(r.y,i.y,t)}):ye(ye({},i),{},{x:Is(i.cx,i.x,t),y:Is(i.cy,i.y,t)})};function dh(s){var{props:e,previousPointsRef:t,previousBaseLinePointsRef:i}=s,{points:n,baseLinePoints:r,isAnimationActive:o,animationBegin:l,animationDuration:c,animationEasing:d,onAnimationEnd:h,onAnimationStart:u}=e,f=t.current,m=i.current,p=f?f.length/n.length:1,x=m?m.length/r.length:1,b=ql(e,"recharts-radar-"),[j,v]=y.useState(!1),S=!j,_=y.useCallback(()=>{typeof h=="function"&&h(),v(!1)},[h]),k=y.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return y.createElement(lh,{showLabels:S,points:n},y.createElement(Zl,{animationId:b,begin:l,duration:c,isActive:o,easing:d,key:"radar-".concat(b),onAnimationEnd:_,onAnimationStart:k},C=>{var M=C===1?n:n.map(la(f,p,C)),N=C===1?r:r?.map(la(m,x,C));return C>0&&(t.current=M,i.current=N),y.createElement(ch,{points:M,baseLinePoints:N,props:e})}),y.createElement(Jl,{label:e.label}),e.children)}function hh(s){var e=y.useRef(void 0),t=y.useRef(void 0);return y.createElement(dh,{props:s,previousPointsRef:e,previousBaseLinePointsRef:t})}var uh={activeDot:!0,angleAxisId:0,animationBegin:0,animationDuration:1500,animationEasing:"ease",dot:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",radiusAxisId:0,zIndex:Vr.area};function fh(s){var{hide:e,className:t,points:i}=s;if(e)return null;var n=mt("recharts-radar",t);return y.createElement(pi,{zIndex:s.zIndex},y.createElement(dt,{className:n},y.createElement(hh,s)),y.createElement(Xl,{points:i,mainColor:_n(s.stroke,s.fill),itemDataKey:s.dataKey,activeDot:s.activeDot}))}function mh(s){var e=Zr(),t=Re(i=>Zd(i,s.radiusAxisId,s.angleAxisId,e,s.id));return t?.points==null?null:y.createElement(fh,ws({},s,{points:t?.points,baseLinePoints:t?.baseLinePoints,isRange:t?.isRange}))}function St(s){var e=xi(s,uh);return y.createElement(Hl,{id:e.id,type:"radar"},t=>y.createElement(y.Fragment,null,y.createElement(Kl,{type:"radar",id:t,data:void 0,dataKey:e.dataKey,hide:e.hide,angleAxisId:e.angleAxisId,radiusAxisId:e.radiusAxisId}),y.createElement(Yl,{legendPayload:nh(e)}),y.createElement(ah,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(mh,ws({},e,{id:t}))))}St.displayName="Radar";function ca(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function da(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ca(Object(t),!0).forEach(function(i){ph(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ca(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function ph(s,e,t){return(e=gh(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function gh(s){var e=xh(s,"string");return typeof e=="symbol"?e:e+""}function xh(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}var bh=["axis"],vh=da(da({},ic),{},{layout:"centric",startAngle:90,endAngle:-270}),kn=y.forwardRef((s,e)=>{var t=xi(s,vh);return y.createElement(tc,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:bh,tooltipPayloadSearcher:sc,categoricalChartProps:t,ref:e})});const yh=()=>{const[s,e]=y.useState(!0),[t,i]=y.useState({totalEvents:0,totalDonations:0,donationsByPlatform:[],platformConnections:{soop:{connected:!1},chzzk:{connected:!1}},recentActivity:[]});y.useEffect(()=>{n()},[]);const n=async()=>{e(!0);try{const h=localStorage.getItem("token"),u=h?{Authorization:`Bearer ${h}`}:{},[f,m,p,x]=await Promise.all([fetch(`${Z}/api/stats/events/count`,{headers:u}),fetch(`${Z}/api/stats/donations`,{headers:u}),fetch(`${Z}/api/connections/status`),fetch(`${Z}/api/stats/donations/trend`,{headers:u})]),b=f.ok?await f.json():{},j=m.ok?await m.json():[],v=p.ok?await p.json():{},S=x.ok?await x.json():[],_=Array.isArray(j)?j:[],k=_.reduce((z,w)=>z+(w.total||0),0),M=(Array.isArray(S)?S:[]).slice(-5).reverse().map(z=>({text:`${z.date}: ${z.count}건의 후원, 총 ${o(z.total)}`,time:new Date(z.date).toLocaleDateString("ko-KR"),color:"#10b981"})),N=(v.soop?.connected?1:0)+(v.chzzk?.connected?1:0);i({totalEvents:b.total||0,totalDonations:k,donationsByPlatform:_,platformConnections:v,connectedPlatforms:N,recentActivity:M.length>0?M:[{text:"아직 활동 데이터가 없습니다",time:"지금",color:"#94a3b8"}]})}catch(h){console.error("Failed to fetch admin data:",h)}finally{e(!1)}},r=h=>h>=1e6?(h/1e6).toFixed(1)+"M":h>=1e3?(h/1e3).toFixed(1)+"K":h?.toLocaleString()||"0",o=h=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(h||0);if(s)return a.jsx(We,{});const l=t.donationsByPlatform.find(h=>h.platform==="soop")?.total||0,c=t.donationsByPlatform.find(h=>h.platform==="chzzk")?.total||0,d=[{title:"연결된 플랫폼",value:t.connectedPlatforms||0,icon:a.jsx(uo,{size:24}),color:"#6366f1",change:t.platformConnections?.soop?.connected||t.platformConnections?.chzzk?.connected?"활성":"비활성",changeType:t.connectedPlatforms>0?"positive":"neutral"},{title:"총 후원금",value:o(t.totalDonations),icon:a.jsx(Ce,{size:24}),color:"#10b981",change:`${t.donationsByPlatform.length}개 플랫폼`,changeType:"positive"},{title:"후원 건수",value:r(t.donationsByPlatform.reduce((h,u)=>h+(u.count||0),0)),icon:a.jsx(Qr,{size:24}),color:"#f59e0b",change:"전체",changeType:"positive"},{title:"총 이벤트",value:r(t.totalEvents),icon:a.jsx(He,{size:24}),color:"#ef4444",change:"DB 기록",changeType:"positive"}];return a.jsxs("div",{className:"admin-overview",children:[a.jsx("div",{className:"admin-metrics-grid",children:d.map((h,u)=>a.jsxs("div",{className:"admin-metric-card",children:[a.jsx("div",{className:"metric-icon",style:{backgroundColor:`${h.color}20`,color:h.color},children:h.icon}),a.jsxs("div",{className:"metric-content",children:[a.jsx("span",{className:"metric-title",children:h.title}),a.jsx("span",{className:"metric-value",children:h.value}),a.jsxs("span",{className:`metric-change ${h.changeType}`,children:[a.jsx(we,{size:14}),h.change]})]})]},u))}),a.jsxs("div",{className:"admin-summary-grid",children:[a.jsxs("div",{className:"admin-summary-card",children:[a.jsxs("div",{className:"summary-header",children:[a.jsx(ht,{size:20}),a.jsx("h3",{children:"플랫폼별 후원"})]}),a.jsxs("div",{className:"summary-content",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"SOOP 후원금"}),a.jsx("span",{className:"summary-value",children:o(l)})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Chzzk 후원금"}),a.jsx("span",{className:"summary-value",children:o(c)})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"SOOP 연결"}),a.jsx("span",{className:"summary-value",style:{color:t.platformConnections?.soop?.connected?"#10b981":"#ef4444"},children:t.platformConnections?.soop?.connected?"연결됨":"미연결"})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"Chzzk 연결"}),a.jsx("span",{className:"summary-value",style:{color:t.platformConnections?.chzzk?.connected?"#10b981":"#ef4444"},children:t.platformConnections?.chzzk?.connected?"연결됨":"미연결"})]})]})]}),a.jsxs("div",{className:"admin-summary-card",children:[a.jsxs("div",{className:"summary-header",children:[a.jsx(we,{size:20}),a.jsx("h3",{children:"플랫폼별 통계"})]}),a.jsx("div",{className:"summary-content",children:t.donationsByPlatform.length>0?t.donationsByPlatform.map((h,u)=>a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:h.platform.toUpperCase()}),a.jsxs("span",{className:"summary-value",children:[h.count,"건 / ",o(h.total)]})]},u)):a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{className:"summary-label",children:"데이터 없음"}),a.jsx("span",{className:"summary-value",children:"플랫폼 연결 후 데이터가 수집됩니다"})]})})]})]}),a.jsxs("div",{className:"admin-activity-card",children:[a.jsxs("div",{className:"activity-header",children:[a.jsx(He,{size:20}),a.jsx("h3",{children:"최근 후원 트렌드"})]}),a.jsx("div",{className:"activity-list",children:t.recentActivity.map((h,u)=>a.jsxs("div",{className:"activity-item",children:[a.jsx("div",{className:"activity-dot",style:{backgroundColor:h.color}}),a.jsxs("div",{className:"activity-content",children:[a.jsx("span",{className:"activity-text",children:h.text}),a.jsx("span",{className:"activity-time",children:h.time})]})]},u))})]}),a.jsxs("button",{className:"admin-refresh-btn",onClick:n,style:{marginTop:"16px",padding:"12px 24px",background:"var(--color-primary)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx(he,{size:16}),"데이터 새로고침"]})]})},jh=({onStreamerSelect:s})=>{const[e,t]=y.useState(!0),[i,n]=y.useState(""),[r,o]=y.useState("total_donations"),[l,c]=y.useState("desc"),[d,h]=y.useState(1),[u,f]=y.useState([]),[m,p]=y.useState(1),[x,b]=y.useState(0),j=10;y.useEffect(()=>{v()},[i,r,l,d]);const v=async()=>{t(!0);try{const w=localStorage.getItem("token"),g=w?{Authorization:`Bearer ${w}`}:{},O=new URLSearchParams({search:i,sortBy:r,sortOrder:l,page:d.toString(),limit:j.toString()}),T=await(await fetch(`${Z}/api/streamers?${O}`,{headers:g})).json();f(T.streamers||[]),p(T.totalPages||1),b(T.totalCount||0)}catch(w){console.error("Failed to fetch streamers:",w),f([])}finally{t(!1)}},S=w=>{s&&s(w)},_=w=>{r===w?c(l==="asc"?"desc":"asc"):(o(w),c("desc")),h(1)},k=w=>{w.preventDefault(),h(1),v()},C=w=>w?new Date(w).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}):"-",M=w=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(w||0),N=({column:w})=>r!==w?null:l==="asc"?a.jsx(to,{size:14}):a.jsx(so,{size:14}),z=w=>{const g={admin:{label:"관리자",color:"#ef4444"},streamer:{label:"스트리머",color:"#6366f1"},advertiser:{label:"광고주",color:"#10b981"},user:{label:"일반",color:"#94a3b8"}},O=g[w]||g.user;return a.jsx("span",{className:"role-badge",style:{backgroundColor:`${O.color}20`,color:O.color},children:O.label})};return a.jsxs("div",{className:"admin-streamers",children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("form",{onSubmit:k,className:"admin-search-form",children:[a.jsx("input",{type:"text",placeholder:"닉네임으로 검색...",value:i,onChange:w=>n(w.target.value),className:"admin-search-input"}),a.jsx("button",{type:"submit",className:"admin-search-btn",children:"검색"})]}),a.jsxs("div",{className:"admin-toolbar-info",style:{display:"flex",alignItems:"center",gap:"16px"},children:[a.jsxs("span",{children:["총 ",x.toLocaleString(),"명"]}),a.jsxs("button",{onClick:v,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"var(--color-primary)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer"},children:[a.jsx(he,{size:14}),"새로고침"]})]})]}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsxs("th",{onClick:()=>_("username"),className:"sortable",children:[a.jsx(eo,{size:14}),"닉네임",a.jsx(N,{column:"username"})]}),a.jsx("th",{children:"역할"}),a.jsxs("th",{onClick:()=>_("total_events"),className:"sortable",children:["총 이벤트",a.jsx(N,{column:"total_events"})]}),a.jsxs("th",{onClick:()=>_("total_donations"),className:"sortable",children:["총 후원금",a.jsx(N,{column:"total_donations"})]}),a.jsxs("th",{onClick:()=>_("first_seen"),className:"sortable",children:[a.jsx(ht,{size:14}),"첫 활동일",a.jsx(N,{column:"first_seen"})]})]})}),a.jsx("tbody",{children:e?a.jsx("tr",{children:a.jsxs("td",{colSpan:5,className:"table-loading",children:[a.jsx(he,{size:20,className:"spin"}),a.jsx("span",{children:"로딩 중..."})]})}):u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"table-empty",children:a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[a.jsx(ge,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:i?"검색 결과가 없습니다.":"활동 내역이 없습니다."}),a.jsx("p",{style:{fontSize:"12px"},children:"플랫폼 연결 후 채팅/후원 데이터가 수집됩니다"})]})})}):u.map(w=>a.jsxs("tr",{className:"clickable",onClick:()=>S(w.id),children:[a.jsx("td",{children:a.jsxs("div",{className:"user-cell",children:[a.jsx("div",{className:"user-avatar",children:w.username?.charAt(0).toUpperCase()||"?"}),a.jsx("span",{children:w.username||"-"})]})}),a.jsx("td",{children:z(w.role)}),a.jsx("td",{children:(w.total_events||0).toLocaleString()}),a.jsx("td",{children:M(w.total_donations)}),a.jsx("td",{children:C(w.created_at)})]},w.id))})]})}),m>1&&a.jsxs("div",{className:"admin-pagination",children:[a.jsxs("button",{onClick:()=>h(w=>Math.max(1,w-1)),disabled:d===1||e,className:"pagination-btn",children:[a.jsx(jc,{size:18}),"이전"]}),a.jsxs("div",{className:"pagination-info",children:[a.jsx("span",{children:d})," / ",a.jsx("span",{children:m})]}),a.jsxs("button",{onClick:()=>h(w=>Math.min(m,w+1)),disabled:d===m||e,className:"pagination-btn",children:["다음",a.jsx(Ds,{size:18})]})]})]})},ha=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],_h=()=>{const{user:s}=Et(),[e,t]=y.useState(!0),[i,n]=y.useState("month"),[r,o]=y.useState({totalRevenue:0,adRevenue:0,donationRevenue:0,revenueTrend:[],platformRevenue:[],monthlyComparison:[],topStreamers:[]});y.useEffect(()=>{c()},[i]);const l=()=>{switch(i){case"week":return 7;case"month":return 30;case"quarter":return 90;case"year":return 365;default:return 30}},c=async()=>{t(!0);try{const f=l(),m=localStorage.getItem("token"),p={"Content-Type":"application/json",...m&&{Authorization:`Bearer ${m}`}},[x,b,j,v,S]=await Promise.all([fetch(`${Z}/api/stats/revenue?days=${f}`,{headers:p}),fetch(`${Z}/api/stats/revenue/trend?days=${f}`,{headers:p}),fetch(`${Z}/api/stats/revenue/by-platform`,{headers:p}),fetch(`${Z}/api/stats/revenue/monthly?months=6`,{headers:p}),fetch(`${Z}/api/stats/revenue/top-streamers?limit=10`,{headers:p})]),_=await x.json(),k=await b.json(),C=await j.json(),M=await v.json(),N=await S.json();o({totalRevenue:_.totalRevenue||0,adRevenue:_.adRevenue||0,donationRevenue:_.donationRevenue||0,revenueTrend:Array.isArray(k)?k:[],platformRevenue:Array.isArray(C)?C:[],monthlyComparison:Array.isArray(M)?M:[],topStreamers:Array.isArray(N)?N:[]})}catch(f){console.error("Failed to fetch revenue data:",f)}finally{t(!1)}},d=f=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(f||0),h=f=>f>=1e6?`₩${(f/1e6).toFixed(1)}M`:f>=1e3?`₩${(f/1e3).toFixed(0)}K`:`₩${f}`,u=({active:f,payload:m,label:p})=>f&&m&&m.length?a.jsxs("div",{className:"chart-tooltip",children:[a.jsx("p",{className:"tooltip-label",children:p}),m.map((x,b)=>a.jsxs("p",{style:{color:x.color},children:[x.name,": ",d(x.value)]},b))]}):null;return e?a.jsx(We,{}):(r.totalRevenue>0||Array.isArray(r.revenueTrend)&&r.revenueTrend.some(f=>f.donations>0),a.jsxs("div",{className:"admin-revenue",children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"time-range-selector",children:[a.jsx(ht,{size:18}),a.jsxs("select",{value:i,onChange:f=>n(f.target.value),className:"time-select",children:[a.jsx("option",{value:"week",children:"지난 7일"}),a.jsx("option",{value:"month",children:"지난 30일"}),a.jsx("option",{value:"quarter",children:"지난 3개월"}),a.jsx("option",{value:"year",children:"지난 1년"})]})]}),a.jsxs("button",{onClick:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"var(--color-primary)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer"},children:[a.jsx(he,{size:14}),"새로고침"]})]}),a.jsxs("div",{className:"revenue-summary-grid",children:[a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#6366f120",color:"#6366f1"},children:a.jsx(Ce,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"총 수익"}),a.jsx("span",{className:"revenue-card-value",children:d(r.totalRevenue)})]})]}),a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(we,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"광고 수익"}),a.jsx("span",{className:"revenue-card-value",children:d(r.adRevenue)})]})]}),a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(Ce,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"후원 수익"}),a.jsx("span",{className:"revenue-card-value",children:d(r.donationRevenue)})]})]})]}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card large",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"수익 트렌드"})}),a.jsx("div",{className:"chart-body",children:Array.isArray(r.revenueTrend)&&r.revenueTrend.some(f=>f.donations>0)?a.jsx(de,{width:"100%",height:300,children:a.jsxs(nc,{data:r.revenueTrend,children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"date",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12,tickFormatter:h}),a.jsx(xe,{content:a.jsx(u,{})}),a.jsx(tt,{}),a.jsx(io,{type:"monotone",dataKey:"donations",name:"후원금",stroke:"#10b981",strokeWidth:2,dot:!1})]})}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[a.jsx(He,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"수익 데이터가 없습니다"}),a.jsx("p",{style:{fontSize:"12px"},children:"플랫폼 연결 후 후원 데이터가 수집됩니다"})]})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"플랫폼별 수익"})}),a.jsx("div",{className:"chart-body",children:r.platformRevenue.length>0&&r.platformRevenue.some(f=>f.value>0)?a.jsx(de,{width:"100%",height:250,children:a.jsxs(no,{children:[a.jsx(ao,{data:r.platformRevenue,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:5,dataKey:"value",nameKey:"name",children:r.platformRevenue.map((f,m)=>a.jsx(ro,{fill:ha[m%ha.length]},`cell-${m}`))}),a.jsx(xe,{formatter:f=>d(f)}),a.jsx(tt,{})]})}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[a.jsx(Ce,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"플랫폼별 데이터가 없습니다"})]})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"월별 비교"})}),a.jsx("div",{className:"chart-body",children:r.monthlyComparison.length>0&&r.monthlyComparison.some(f=>f.revenue>0)?a.jsx(de,{width:"100%",height:250,children:a.jsxs(js,{data:r.monthlyComparison,children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"month",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12,tickFormatter:h}),a.jsx(xe,{content:a.jsx(u,{})}),a.jsx(Gt,{dataKey:"revenue",name:"수익",fill:"#6366f1",radius:[4,4,0,0]})]})}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[a.jsx(ht,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"월별 데이터가 없습니다"})]})})]})]}),a.jsxs("div",{className:"admin-top-list-card",children:[a.jsxs("div",{className:"top-list-header",children:[a.jsx(Qi,{size:20}),a.jsx("h3",{children:"후원 TOP 10"})]}),a.jsx("div",{className:"top-list-body",children:r.topStreamers.length>0?a.jsxs("table",{className:"top-list-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"순위"}),a.jsx("th",{children:"닉네임"}),a.jsx("th",{children:"총 후원금"}),a.jsx("th",{children:"점유율"})]})}),a.jsx("tbody",{children:r.topStreamers.map((f,m)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:`rank-badge rank-${m+1}`,children:m+1})}),a.jsx("td",{children:a.jsxs("div",{className:"streamer-cell",children:[a.jsx("div",{className:"streamer-avatar",children:f.username?.charAt(0).toUpperCase()}),a.jsx("span",{children:f.username})]})}),a.jsx("td",{children:d(f.totalRevenue)}),a.jsx("td",{children:a.jsxs("div",{className:"share-bar",children:[a.jsx("div",{className:"share-fill",style:{width:`${parseFloat(f.share)*10}%`,backgroundColor:"#6366f1"}}),a.jsxs("span",{children:[f.share,"%"]})]})})]},f.id))})]}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[a.jsx(Qi,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"후원 데이터가 없습니다"})]})})]})]}))},ie={soop:"#0066ff",chzzk:"#00dc64",youtube:"#ff0000",twitch:"#9146ff"},$t={soop:"SOOP",chzzk:"Chzzk",youtube:"YouTube",twitch:"Twitch"},kh=()=>{const[s,e]=y.useState(!0),[t,i]=y.useState([]),[n,r]=y.useState({soop:{},chzzk:{}}),[o,l]=y.useState([]),[c,d]=y.useState([]),[h,u]=y.useState([]),[f,m]=y.useState([]),[p,x]=y.useState(!1),[b,j]=y.useState(null),[v,S]=y.useState(null);y.useEffect(()=>{_()},[]);const _=async()=>{e(!0);try{const g=localStorage.getItem("token"),O=g?{Authorization:`Bearer ${g}`}:{},[L,T,D,P,E,H,$]=await Promise.all([fetch(`${Z}/api/stats/events/by-platform`,{headers:O}),fetch(`${Z}/api/stats/donations`,{headers:O}),fetch(`${Z}/api/connections/status`),fetch(`${Z}/api/stats/top-streamers-by-viewers?sortBy=peak&limit=10`),fetch(`${Z}/api/stats/top-streamers-by-viewers?sortBy=cumulative&limit=10`),fetch(`${Z}/api/monitor/stats`),fetch(`${Z}/api/monitor/stats/nexon`)]),ue=L.ok?await L.json():[],fe=T.ok?await T.json():[],V=D.ok?await D.json():{},Ke=P.ok?await P.json():[],Pe=E.ok?await E.json():[],me=H.ok?await H.json():null,Me=$.ok?await $.json():null,Es=Array.isArray(ue)?ue:[],ts=Array.isArray(fe)?fe:[];l(Es),d(ts),r(V),u(Ke),m(Pe),j(me),S(Me);const ss=["soop","chzzk"].map(_e=>{const is=Es.find(Ft=>Ft.platform===_e),It=ts.find(Ft=>Ft.platform===_e),ns=V[_e]?.connected||!1;return{id:_e,name:$t[_e],connected:ns,totalEvents:is?.count||0,donations:It?.total||0,donationCount:It?.count||0,avgDonation:It?.average||0,liveBroadcasts:me?.platforms?.[_e]?.broadcasts||0,liveViewers:me?.platforms?.[_e]?.viewers||0,nexonBroadcasts:me?.nexon?.[_e]?.broadcasts||0,nexonViewers:me?.nexon?.[_e]?.viewers||0}});i(ss)}catch(g){console.error("Failed to fetch platform data:",g)}finally{e(!1)}},k=g=>g>=1e6?(g/1e6).toFixed(1)+"M":g>=1e3?(g/1e3).toFixed(1)+"K":g?.toLocaleString()||"0",C=g=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(g||0),M=()=>{if(!v?.platforms)return[];const g=v.platforms.soop?.games||[],O=v.platforms.chzzk?.games||[],L=new Map;return g.forEach(T=>{const D=T.category_name||T.category_id;L.set(D,{name:D,soopBroadcasts:T.broadcast_count||0,soopViewers:T.total_viewers||0,chzzkBroadcasts:0,chzzkViewers:0})}),O.forEach(T=>{const D=T.category_name||T.category_id;if(L.has(D)){const P=L.get(D);P.chzzkBroadcasts=T.broadcast_count||0,P.chzzkViewers=T.total_viewers||0}else L.set(D,{name:D,soopBroadcasts:0,soopViewers:0,chzzkBroadcasts:T.broadcast_count||0,chzzkViewers:T.total_viewers||0})}),Array.from(L.values()).sort((T,D)=>D.soopViewers+D.chzzkViewers-(T.soopViewers+T.chzzkViewers))};if(s)return a.jsx(We,{});const N=[{metric:"이벤트",soop:t.find(g=>g.id==="soop")?.totalEvents||0,chzzk:t.find(g=>g.id==="chzzk")?.totalEvents||0},{metric:"후원금",soop:t.find(g=>g.id==="soop")?.donations||0,chzzk:t.find(g=>g.id==="chzzk")?.donations||0},{metric:"후원건수",soop:t.find(g=>g.id==="soop")?.donationCount||0,chzzk:t.find(g=>g.id==="chzzk")?.donationCount||0},{metric:"시청자",soop:t.find(g=>g.id==="soop")?.liveViewers||0,chzzk:t.find(g=>g.id==="chzzk")?.liveViewers||0},{metric:"방송",soop:t.find(g=>g.id==="soop")?.liveBroadcasts||0,chzzk:t.find(g=>g.id==="chzzk")?.liveBroadcasts||0}],z=[{type:"후원",soop:t.find(g=>g.id==="soop")?.donationCount||0,chzzk:t.find(g=>g.id==="chzzk")?.donationCount||0},{type:"이벤트",soop:t.find(g=>g.id==="soop")?.totalEvents||0,chzzk:t.find(g=>g.id==="chzzk")?.totalEvents||0},{type:"실시간 시청자",soop:t.find(g=>g.id==="soop")?.liveViewers||0,chzzk:t.find(g=>g.id==="chzzk")?.liveViewers||0},{type:"넥슨 시청자",soop:t.find(g=>g.id==="soop")?.nexonViewers||0,chzzk:t.find(g=>g.id==="chzzk")?.nexonViewers||0}],w=M();return a.jsxs("div",{className:"admin-platforms",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 16px",background:"var(--color-surface, #1e293b)",borderRadius:"10px",border:"1px solid var(--color-border, #334155)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#94a3b8"},children:[a.jsx(ac,{size:16}),a.jsx("span",{style:{fontSize:"14px"},children:"필터"})]}),a.jsxs("button",{onClick:()=>x(!p),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:p?"#10b981":"var(--color-surface-hover, #334155)",border:p?"1px solid #10b981":"1px solid var(--color-border, #475569)",borderRadius:"8px",color:p?"#fff":"#94a3b8",cursor:"pointer",fontSize:"13px",fontWeight:500,transition:"all 0.2s"},children:[a.jsx(ve,{size:16}),"넥슨게임만 보기"]})]}),a.jsx("div",{className:"platform-cards-grid",children:t.map(g=>a.jsxs("div",{className:"platform-card",style:{borderColor:ie[g.id]},children:[a.jsxs("div",{className:"platform-card-header",children:[a.jsx("img",{src:`/assets/logos/${g.id}.png`,alt:$t[g.id],className:"platform-logo",onError:O=>{O.target.style.display="none"}}),a.jsx("h3",{children:$t[g.id]}),g.connected?a.jsx(uo,{size:16,style:{color:"#10b981"}}):a.jsx(Ac,{size:16,style:{color:"#ef4444"}})]}),a.jsx("div",{className:"platform-card-stats",children:p?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"platform-stat",children:[a.jsx(ve,{size:16}),a.jsx("span",{className:"stat-label",children:"넥슨 방송"}),a.jsx("span",{className:"stat-value",children:k(g.nexonBroadcasts)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(Yt,{size:16}),a.jsx("span",{className:"stat-label",children:"넥슨 시청자"}),a.jsx("span",{className:"stat-value",children:k(g.nexonViewers)})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"platform-stat",children:[a.jsx(bi,{size:16}),a.jsx("span",{className:"stat-label",children:"라이브 방송"}),a.jsx("span",{className:"stat-value",children:k(g.liveBroadcasts)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(Yt,{size:16}),a.jsx("span",{className:"stat-label",children:"실시간 시청자"}),a.jsx("span",{className:"stat-value",children:k(g.liveViewers)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(He,{size:16}),a.jsx("span",{className:"stat-label",children:"이벤트"}),a.jsx("span",{className:"stat-value",children:k(g.totalEvents)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(Mt,{size:16}),a.jsx("span",{className:"stat-label",children:"후원 건수"}),a.jsx("span",{className:"stat-value",children:k(g.donationCount)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(Ce,{size:16}),a.jsx("span",{className:"stat-label",children:"총 후원금"}),a.jsx("span",{className:"stat-value",children:C(g.donations)})]}),a.jsxs("div",{className:"platform-stat",children:[a.jsx(ge,{size:16}),a.jsx("span",{className:"stat-label",children:"평균 후원"}),a.jsx("span",{className:"stat-value",children:C(Math.round(g.avgDonation))})]})]})}),a.jsxs("div",{className:"platform-card-growth",children:[a.jsx("span",{className:`growth-badge ${g.connected?"positive":"negative"}`,children:g.connected?"연결됨":"미연결"}),a.jsx("span",{className:"growth-label",children:"현재 상태"})]})]},g.id))}),p&&w.length>0&&a.jsxs("div",{className:"admin-table-card",style:{marginTop:"24px"},children:[a.jsxs("div",{className:"table-header",children:[a.jsxs("h3",{children:[a.jsx(ve,{size:20,style:{marginRight:8,verticalAlign:"middle"}}),"넥슨 게임별 상세"]}),v?.total&&a.jsxs("span",{style:{color:"#94a3b8",fontSize:"13px"},children:["총 ",k(v.total.broadcasts),"개 방송 / ",k(v.total.viewers),"명 시청"]})]}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"게임"}),a.jsx("th",{style:{color:ie.soop},children:"SOOP 방송"}),a.jsx("th",{style:{color:ie.soop},children:"SOOP 시청자"}),a.jsx("th",{style:{color:ie.chzzk},children:"Chzzk 방송"}),a.jsx("th",{style:{color:ie.chzzk},children:"Chzzk 시청자"}),a.jsx("th",{children:"합계 시청자"})]})}),a.jsx("tbody",{children:w.map(g=>a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:500},children:g.name}),a.jsx("td",{children:k(g.soopBroadcasts)}),a.jsx("td",{children:k(g.soopViewers)}),a.jsx("td",{children:k(g.chzzkBroadcasts)}),a.jsx("td",{children:k(g.chzzkViewers)}),a.jsx("td",{style:{fontWeight:600},children:k(g.soopViewers+g.chzzkViewers)})]},g.name))})]})})]}),p&&w.length===0&&a.jsx("div",{className:"admin-table-card",style:{marginTop:"24px"},children:a.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[a.jsx(ve,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{children:"현재 라이브 중인 넥슨 게임 방송이 없습니다"})]})}),a.jsxs("div",{className:"admin-charts-grid",style:{marginTop:"24px"},children:[a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"플랫폼 종합 비교"})}),a.jsx("div",{className:"chart-body",children:t.some(g=>g.totalEvents>0||g.donations>0||g.liveViewers>0)?a.jsx(de,{width:"100%",height:300,children:a.jsxs(kn,{data:N,children:[a.jsx(vi,{stroke:"#334155"}),a.jsx(ji,{dataKey:"metric",stroke:"#94a3b8",fontSize:12}),a.jsx(yi,{stroke:"#334155"}),a.jsx(St,{name:"SOOP",dataKey:"soop",stroke:ie.soop,fill:ie.soop,fillOpacity:.2}),a.jsx(St,{name:"Chzzk",dataKey:"chzzk",stroke:ie.chzzk,fill:ie.chzzk,fillOpacity:.2}),a.jsx(tt,{}),a.jsx(xe,{})]})}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[a.jsx(He,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"플랫폼 연결 후 데이터가 표시됩니다"})]})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"플랫폼별 데이터 분포"})}),a.jsx("div",{className:"chart-body",children:t.some(g=>g.totalEvents>0||g.donationCount>0||g.liveViewers>0)?a.jsx(de,{width:"100%",height:300,children:a.jsxs(js,{data:z,children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"type",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12}),a.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),a.jsx(tt,{}),a.jsx(Gt,{dataKey:"soop",name:"SOOP",fill:ie.soop,radius:[4,4,0,0]}),a.jsx(Gt,{dataKey:"chzzk",name:"Chzzk",fill:ie.chzzk,radius:[4,4,0,0]})]})}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"60px 20px",color:"#94a3b8"},children:[a.jsx(Ce,{size:48,style:{opacity:.5,marginBottom:"16px"}}),a.jsx("p",{children:"후원 데이터가 없습니다"})]})})]})]}),a.jsxs("div",{className:"admin-table-card",children:[a.jsx("div",{className:"table-header",children:a.jsx("h3",{children:"상세 비교표"})}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table comparison-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"지표"}),t.map(g=>a.jsx("th",{style:{color:ie[g.id]},children:$t[g.id]},g.id))]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:"연결 상태"}),t.map(g=>a.jsx("td",{className:g.connected?"positive":"negative",children:g.connected?"연결됨":"미연결"},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"라이브 방송"}),t.map(g=>a.jsx("td",{children:k(g.liveBroadcasts)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"실시간 시청자"}),t.map(g=>a.jsx("td",{style:{fontWeight:600},children:k(g.liveViewers)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"총 이벤트"}),t.map(g=>a.jsx("td",{children:k(g.totalEvents)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"후원 건수"}),t.map(g=>a.jsx("td",{children:k(g.donationCount)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"총 후원금"}),t.map(g=>a.jsx("td",{children:C(g.donations)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{children:"평균 후원금"}),t.map(g=>a.jsx("td",{children:C(Math.round(g.avgDonation))},g.id))]}),a.jsxs("tr",{style:{borderTop:"2px solid #475569"},children:[a.jsx("td",{style:{color:"#10b981",fontWeight:500},children:"넥슨 방송"}),t.map(g=>a.jsx("td",{children:k(g.nexonBroadcasts)},g.id))]}),a.jsxs("tr",{children:[a.jsx("td",{style:{color:"#10b981",fontWeight:500},children:"넥슨 시청자"}),t.map(g=>a.jsx("td",{style:{fontWeight:600},children:k(g.nexonViewers)},g.id))]})]})]})})]}),a.jsxs("div",{className:"admin-charts-grid",style:{marginTop:"24px"},children:[a.jsxs("div",{className:"admin-table-card",children:[a.jsx("div",{className:"table-header",children:a.jsxs("h3",{children:[a.jsx(we,{size:20,style:{marginRight:8,verticalAlign:"middle"}}),"최고 시청자수 순위"]})}),a.jsx("div",{className:"admin-table-container",children:h.length>0?a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"순위"}),a.jsx("th",{children:"스트리머"}),a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"최고 시청자"}),a.jsx("th",{children:"방송 횟수"})]})}),a.jsx("tbody",{children:h.map(g=>a.jsxs("tr",{children:[a.jsx("td",{children:g.rank}),a.jsx("td",{children:g.broadcaster_name}),a.jsx("td",{children:a.jsx("span",{className:"platform-badge",style:{background:ie[g.platform]+"20",color:ie[g.platform],padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:$t[g.platform]||g.platform})}),a.jsx("td",{style:{fontWeight:600},children:k(g.max_peak_viewers)}),a.jsxs("td",{children:[g.broadcast_count,"회"]})]},`${g.platform}-${g.channel_id}`))})]}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[a.jsx(we,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{children:"방송 데이터가 없습니다"})]})})]}),a.jsxs("div",{className:"admin-table-card",children:[a.jsx("div",{className:"table-header",children:a.jsxs("h3",{children:[a.jsx(Yt,{size:20,style:{marginRight:8,verticalAlign:"middle"}}),"누적 시청자수 순위"]})}),a.jsx("div",{className:"admin-table-container",children:f.length>0?a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"순위"}),a.jsx("th",{children:"스트리머"}),a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"누적 시청자"}),a.jsx("th",{children:"방송 횟수"})]})}),a.jsx("tbody",{children:f.map(g=>a.jsxs("tr",{children:[a.jsx("td",{children:g.rank}),a.jsx("td",{children:g.broadcaster_name}),a.jsx("td",{children:a.jsx("span",{className:"platform-badge",style:{background:ie[g.platform]+"20",color:ie[g.platform],padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:$t[g.platform]||g.platform})}),a.jsx("td",{style:{fontWeight:600},children:k(g.total_cumulative_viewers)}),a.jsxs("td",{children:[g.broadcast_count,"회"]})]},`${g.platform}-${g.channel_id}`))})]}):a.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"40px 20px",color:"#94a3b8"},children:[a.jsx(Yt,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{children:"방송 데이터가 없습니다"})]})})]})]}),a.jsxs("button",{onClick:_,style:{marginTop:"16px",padding:"12px 24px",background:"var(--color-primary)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx(he,{size:16}),"데이터 새로고침"]})]})},Nh=[{id:"all",name:"전체",icon:ve},{id:"league",name:"리그오브레전드",icon:gn},{id:"valorant",name:"발로란트",icon:Ot},{id:"minecraft",name:"마인크래프트",icon:ve},{id:"gta",name:"GTA",icon:xn},{id:"talk",name:"토크/저스트채팅",icon:ge}],wh=({onStreamerSelect:s})=>{const[e,t]=y.useState(!0),[i,n]=y.useState("week"),[r,o]=y.useState("all"),[l,c]=y.useState([]),[d,h]=y.useState(null),{accessToken:u}=Et();y.useEffect(()=>{f()},[r,i]);const f=async()=>{t(!0),h(null);const v={"Content-Type":"application/json",...u&&{Authorization:`Bearer ${u}`}};try{const S=await fetch(`${Z}/api/streamers?limit=20&sortBy=total_donations&sortOrder=desc`,{headers:v});if(S.ok){const k=((await S.json()).streamers||[]).map((C,M)=>({id:C.id||M+1,name:C.username||"익명",platform:"chzzk",influenceScore:Math.min(100,Math.round((C.total_donations||0)/1e4)+50),avgViewers:0,adEfficiency:0,donationRate:C.total_events>0?((C.total_donations||0)/C.total_events*.01).toFixed(1):0,trend:"stable",mainGame:"-",games:[],totalDonations:C.total_donations||0,totalEvents:C.total_events||0}));c(k)}else c([])}catch(S){console.error("Failed to fetch viewership data:",S),h("불러오기 실패"),c([])}finally{t(!1)}},m=y.useMemo(()=>{const v=l,S=[...v].sort((C,M)=>M.adEfficiency-C.adEfficiency).slice(0,3),_=[...v].sort((C,M)=>M.influenceScore-C.influenceScore).slice(0,3),k=[...v].sort((C,M)=>M.donationRate-C.donationRate).slice(0,3);return{streamerInfluence:v,topAdEfficiency:S,trendingStreamers:_,topDonationRate:k}},[l]),p=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v?.toLocaleString()||"0",x=v=>v>=90?{label:"S+",color:"#fbbf24",bg:"#fbbf2420"}:v>=80?{label:"S",color:"#f59e0b",bg:"#f59e0b20"}:v>=70?{label:"A",color:"#10b981",bg:"#10b98120"}:v>=60?{label:"B",color:"#6366f1",bg:"#6366f120"}:v>=50?{label:"C",color:"#8b5cf6",bg:"#8b5cf620"}:{label:"D",color:"#94a3b8",bg:"#94a3b820"},b=v=>v==="hot"?{label:"🔥 급상승",color:"#ef4444"}:v==="up"?{label:"📈 상승세",color:"#10b981"}:v==="stable"?{label:"➡️ 유지",color:"#6366f1"}:{label:"📉 하락",color:"#94a3b8"},j=v=>{s&&s(v)};return e?a.jsx(We,{}):a.jsxs("div",{className:"admin-viewership",children:[l.length===0&&!e&&a.jsxs("div",{className:"mock-data-notice",style:{backgroundColor:"#fef3c7",borderColor:"#f59e0b"},children:[a.jsx("span",{className:"notice-icon",children:"⚠️"}),a.jsx("span",{children:"활동 데이터가 없습니다. 플랫폼 연결 후 데이터가 수집됩니다."})]}),a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"time-range-selector",children:[a.jsx(At,{size:18}),a.jsxs("select",{value:i,onChange:v=>n(v.target.value),className:"time-select",children:[a.jsx("option",{value:"day",children:"오늘"}),a.jsx("option",{value:"week",children:"지난 7일"}),a.jsx("option",{value:"month",children:"지난 30일"})]})]}),a.jsx("button",{className:"admin-refresh-btn",disabled:e,children:a.jsx(he,{size:16,className:e?"spin":""})})]}),a.jsxs("div",{className:"influence-section",style:{marginTop:0,paddingTop:0,borderTop:"none"},children:[a.jsxs("div",{className:"influence-header",children:[a.jsxs("div",{className:"influence-title",children:[a.jsx(_s,{size:24}),a.jsx("h2",{children:"게임별 스트리머 영향력 스코어"})]}),a.jsx("p",{className:"influence-description",children:"광고 효율, 시청자 반응, 후원 전환율을 종합한 영향력 지수"})]}),a.jsx("div",{className:"game-category-tabs",children:Nh.map(v=>{const S=v.icon;return a.jsxs("button",{className:`game-tab ${r===v.id?"active":""}`,onClick:()=>o(v.id),children:[a.jsx(S,{size:16}),a.jsx("span",{children:v.name})]},v.id)})}),a.jsx("div",{className:"influence-table-card",children:a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table influence-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"rank-col",children:"순위"}),a.jsx("th",{children:"스트리머"}),a.jsx("th",{children:"영향력"}),a.jsx("th",{children:"평균 시청자"}),a.jsx("th",{children:"광고 효율"}),a.jsx("th",{children:"후원 전환율"}),a.jsx("th",{children:"트렌드"}),a.jsx("th",{})]})}),a.jsx("tbody",{children:(m?.streamerInfluence||[]).map((v,S)=>{const _=x(v.influenceScore),k=b(v.trend);return a.jsxs("tr",{className:"streamer-row clickable",onClick:()=>j(v.id),children:[a.jsx("td",{className:"rank-col",children:a.jsx("span",{className:`rank-number rank-${S+1}`,children:S+1<=3?a.jsx(gn,{size:16,style:{color:S===0?"#fbbf24":S===1?"#94a3b8":"#cd7f32"}}):S+1})}),a.jsx("td",{children:a.jsxs("div",{className:"streamer-info",children:[a.jsx("div",{className:"streamer-avatar-lg",children:v.avatar?a.jsx("img",{src:v.avatar,alt:v.name}):v.name?.charAt(0).toUpperCase()}),a.jsxs("div",{className:"streamer-details",children:[a.jsx("span",{className:"streamer-name",children:v.name}),a.jsx("span",{className:"streamer-platform",children:v.platform})]})]})}),a.jsx("td",{children:a.jsxs("div",{className:"influence-score",children:[a.jsx("span",{className:"influence-badge",style:{backgroundColor:_.bg,color:_.color},children:_.label}),a.jsx("span",{className:"influence-value",children:v.influenceScore})]})}),a.jsx("td",{children:a.jsxs("div",{className:"stat-cell",children:[a.jsx(ge,{size:14}),a.jsx("span",{children:p(v.avgViewers)})]})}),a.jsx("td",{children:a.jsxs("div",{className:"efficiency-cell",children:[a.jsx("div",{className:"efficiency-bar",children:a.jsx("div",{className:"efficiency-fill",style:{width:`${v.adEfficiency*20}%`,backgroundColor:v.adEfficiency>=4?"#10b981":v.adEfficiency>=3?"#f59e0b":"#ef4444"}})}),a.jsxs("span",{children:[v.adEfficiency,"%"]})]})}),a.jsx("td",{children:a.jsxs("div",{className:"stat-cell",children:[a.jsx(ii,{size:14,style:{color:"#f59e0b"}}),a.jsxs("span",{children:[v.donationRate,"%"]})]})}),a.jsx("td",{children:a.jsx("span",{className:"trend-badge",style:{color:k.color},children:k.label})}),a.jsx("td",{children:a.jsx("button",{className:"view-detail-btn",children:a.jsx(Ds,{size:18})})})]},v.id)})})]})})}),a.jsxs("div",{className:"ad-effectiveness-grid",children:[a.jsxs("div",{className:"ad-card",children:[a.jsxs("div",{className:"ad-card-header",children:[a.jsx(Ot,{size:20}),a.jsx("h4",{children:"광고 효율 TOP 3"})]}),a.jsx("div",{className:"ad-card-list",children:(m?.topAdEfficiency||[]).map((v,S)=>a.jsxs("div",{className:"ad-list-item",children:[a.jsx("span",{className:"ad-rank",children:S+1}),a.jsx("span",{className:"ad-name",children:v.name}),a.jsxs("span",{className:"ad-value",children:[v.adEfficiency,"% CTR"]})]},S))})]}),a.jsxs("div",{className:"ad-card",children:[a.jsxs("div",{className:"ad-card-header",children:[a.jsx(xn,{size:20}),a.jsx("h4",{children:"요즘 대세"})]}),a.jsx("div",{className:"ad-card-list",children:(m?.trendingStreamers||[]).map((v,S)=>a.jsxs("div",{className:"ad-list-item",children:[a.jsx("span",{className:"ad-rank hot",children:"🔥"}),a.jsx("span",{className:"ad-name",children:v.name}),a.jsxs("span",{className:"ad-growth",children:[v.influenceScore,"점"]})]},S))})]}),a.jsxs("div",{className:"ad-card",children:[a.jsxs("div",{className:"ad-card-header",children:[a.jsx(rc,{size:20}),a.jsx("h4",{children:"후원 전환 TOP 3"})]}),a.jsx("div",{className:"ad-card-list",children:(m?.topDonationRate||[]).map((v,S)=>a.jsxs("div",{className:"ad-list-item",children:[a.jsx("span",{className:"ad-rank",children:S+1}),a.jsx("span",{className:"ad-name",children:v.name}),a.jsxs("span",{className:"ad-value",children:[v.donationRate,"%"]})]},S))})]})]})]})]})},ua={league:gn,valorant:Ot,minecraft:ve,gta:xn,talk:ge,default:ve},Sh=({streamerId:s,onBack:e})=>{const[t,i]=y.useState(!0),[n,r]=y.useState("month"),[o,l]=y.useState(null),[c,d]=y.useState(null),[h,u]=y.useState([]),[f,m]=y.useState([]),[p,x]=y.useState([]),[b,j]=y.useState(null),{accessToken:v}=Et();y.useEffect(()=>{S()},[s,n]);const S=async()=>{i(!0),l(null);const w={"Content-Type":"application/json",...v&&{Authorization:`Bearer ${v}`}};try{const g=await fetch(`${Z}/api/streamers/${s}`,{headers:w});if(g.ok){const O=await g.json(),L={id:O.id,name:O.username||"익명",platform:"chzzk",totalFollowers:0,avgViewers:0,influenceScore:Math.min(100,Math.round((O.total_donations||0)/1e4)+50),adEfficiency:0,donationRate:O.total_events>0?((O.total_donations||0)/O.total_events*.01).toFixed(1):0,totalRevenue:O.total_donations||0,influenceChange:0,adEfficiencyChange:0,donationRateChange:0,revenueChange:0,totalDonations:O.total_donations||0,totalEvents:O.total_events||0};d(L)}else d({id:s,name:`스트리머 ${s}`,platform:"chzzk",totalFollowers:0,avgViewers:0,influenceScore:50,adEfficiency:0,donationRate:0,totalRevenue:0,influenceChange:0,adEfficiencyChange:0,donationRateChange:0,revenueChange:0});u([]),m([]),x([]),j({totalEstimatedConversions:0,conversionsChange:0,contributionValue:0,valueChange:0,roiContribution:0,roiPercentile:0,campaigns:[],monthlyTrend:[],nexonIPBreakdown:[]})}catch(g){console.error("Failed to fetch streamer data:",g),l("불러오기 실패")}finally{i(!1)}},_=h.map(w=>({game:w.name?.substring(0,4)||"",viewers:Math.floor((w.avgViewers||0)/500),donations:Math.floor((w.donations||0)/5e5),adEfficiency:parseFloat(w.adEfficiency||0)})),k=h.map(w=>({name:w.name,efficiency:parseFloat(w.adEfficiency||0)})),C=w=>w>=1e6?(w/1e6).toFixed(1)+"M":w>=1e3?(w/1e3).toFixed(1)+"K":w?.toLocaleString()||"0",M=w=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(w||0),N=w=>w>=90?{label:"S+",color:"#fbbf24",bg:"#fbbf2420"}:w>=80?{label:"S",color:"#f59e0b",bg:"#f59e0b20"}:w>=70?{label:"A",color:"#10b981",bg:"#10b98120"}:w>=60?{label:"B",color:"#6366f1",bg:"#6366f120"}:w>=50?{label:"C",color:"#8b5cf6",bg:"#8b5cf620"}:{label:"D",color:"#94a3b8",bg:"#94a3b820"};if(t)return a.jsx(We,{});if(!c)return null;const z=N(c.influenceScore);return a.jsxs("div",{className:"admin-streamer-detail",children:[a.jsxs("button",{className:"streamer-detail-back",onClick:e,children:[a.jsx(oo,{size:18}),"목록으로 돌아가기"]}),a.jsxs("div",{className:"streamer-profile-header",children:[a.jsx("div",{className:"streamer-profile-avatar",children:c.avatar?a.jsx("img",{src:c.avatar,alt:c.name}):c.name?.charAt(0).toUpperCase()}),a.jsxs("div",{className:"streamer-profile-info",children:[a.jsx("h2",{children:c.name}),a.jsx("span",{className:"platform-badge",children:c.platform})]}),a.jsxs("div",{className:"streamer-profile-stats",children:[a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"stat-value",children:C(c.totalFollowers)}),a.jsx("span",{className:"stat-label",children:"팔로워"})]}),a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"stat-value",children:C(c.avgViewers)}),a.jsx("span",{className:"stat-label",children:"평균 시청자"})]}),a.jsxs("div",{className:"profile-stat",children:[a.jsx("span",{className:"stat-value",style:{color:z.color},children:z.label}),a.jsx("span",{className:"stat-label",children:"영향력 등급"})]})]})]}),a.jsx("div",{className:"admin-toolbar",children:a.jsxs("div",{className:"time-range-selector",children:[a.jsx(ht,{size:18}),a.jsxs("select",{value:n,onChange:w=>r(w.target.value),className:"time-select",children:[a.jsx("option",{value:"week",children:"지난 7일"}),a.jsx("option",{value:"month",children:"지난 30일"}),a.jsx("option",{value:"quarter",children:"지난 3개월"})]})]})}),a.jsxs("div",{className:"viewership-summary-grid",children:[a.jsxs("div",{className:"viewership-card",children:[a.jsx("div",{className:"viewership-card-icon",style:{backgroundColor:"#6366f120",color:"#6366f1"},children:a.jsx(_s,{size:24})}),a.jsxs("div",{className:"viewership-card-content",children:[a.jsx("span",{className:"viewership-card-label",children:"영향력 점수"}),a.jsx("span",{className:"viewership-card-value",children:c.influenceScore}),a.jsxs("span",{className:`viewership-card-change ${c.influenceChange>=0?"positive":"negative"}`,children:[c.influenceChange>=0?"+":"",c.influenceChange,"점"]})]})]}),a.jsxs("div",{className:"viewership-card",children:[a.jsx("div",{className:"viewership-card-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(Ot,{size:24})}),a.jsxs("div",{className:"viewership-card-content",children:[a.jsx("span",{className:"viewership-card-label",children:"광고 효율"}),a.jsxs("span",{className:"viewership-card-value",children:[c.adEfficiency,"%"]}),a.jsxs("span",{className:`viewership-card-change ${c.adEfficiencyChange>=0?"positive":"negative"}`,children:[c.adEfficiencyChange>=0?"+":"",c.adEfficiencyChange,"%"]})]})]}),a.jsxs("div",{className:"viewership-card",children:[a.jsx("div",{className:"viewership-card-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(ii,{size:24})}),a.jsxs("div",{className:"viewership-card-content",children:[a.jsx("span",{className:"viewership-card-label",children:"후원 전환율"}),a.jsxs("span",{className:"viewership-card-value",children:[c.donationRate,"%"]}),a.jsxs("span",{className:`viewership-card-change ${c.donationRateChange>=0?"positive":"negative"}`,children:[c.donationRateChange>=0?"+":"",c.donationRateChange,"%"]})]})]}),a.jsxs("div",{className:"viewership-card",children:[a.jsx("div",{className:"viewership-card-icon",style:{backgroundColor:"#ef444420",color:"#ef4444"},children:a.jsx(Ce,{size:24})}),a.jsxs("div",{className:"viewership-card-content",children:[a.jsx("span",{className:"viewership-card-label",children:"총 수익"}),a.jsx("span",{className:"viewership-card-value",children:M(c.totalRevenue)}),a.jsxs("span",{className:`viewership-card-change ${c.revenueChange>=0?"positive":"negative"}`,children:[c.revenueChange>=0?"+":"",c.revenueChange,"%"]})]})]})]}),a.jsxs("div",{className:"influence-header",style:{marginTop:"32px"},children:[a.jsxs("div",{className:"influence-title",children:[a.jsx(ve,{size:24}),a.jsx("h2",{children:"게임별 성과"})]}),a.jsx("p",{className:"influence-description",children:"각 게임/카테고리에서의 시청자, 후원, 광고 효율 데이터"})]}),a.jsx("div",{className:"game-performance-grid",children:h.length>0?h.map((w,g)=>{const O=ua[w.id]||ua.default;return a.jsxs("div",{className:"game-performance-card",children:[a.jsxs("div",{className:"game-header",children:[a.jsx("div",{className:"game-icon",children:a.jsx(O,{size:20})}),a.jsx("span",{className:"game-name",children:w.name})]}),a.jsxs("div",{className:"game-stats",children:[a.jsxs("div",{className:"game-stat",children:[a.jsx("span",{className:"label",children:"평균 시청자"}),a.jsx("span",{className:"value",children:C(w.avgViewers)}),a.jsxs("span",{className:`change ${w.viewersChange>=0?"positive":"negative"}`,children:[w.viewersChange>=0?"↑":"↓"," ",Math.abs(w.viewersChange),"%"]})]}),a.jsxs("div",{className:"game-stat",children:[a.jsx("span",{className:"label",children:"총 후원"}),a.jsx("span",{className:"value",children:M(w.donations)}),a.jsxs("span",{className:`change ${w.donationsChange>=0?"positive":"negative"}`,children:[w.donationsChange>=0?"↑":"↓"," ",Math.abs(w.donationsChange),"%"]})]}),a.jsxs("div",{className:"game-stat",children:[a.jsx("span",{className:"label",children:"광고 효율"}),a.jsxs("span",{className:"value",children:[w.adEfficiency,"%"]}),a.jsxs("span",{className:`change ${w.adEfficiencyChange>=0?"positive":"negative"}`,children:[w.adEfficiencyChange>=0?"↑":"↓"," ",Math.abs(w.adEfficiencyChange),"%"]})]}),a.jsxs("div",{className:"game-stat",children:[a.jsx("span",{className:"label",children:"방송 시간"}),a.jsxs("span",{className:"value",children:[w.streamHours,"h"]}),a.jsxs("span",{className:`change ${w.hoursChange>=0?"positive":"negative"}`,children:[w.hoursChange>=0?"↑":"↓"," ",Math.abs(w.hoursChange),"%"]})]})]})]},w.id||g)}):a.jsxs("div",{style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#94a3b8",background:"var(--bg-card)",borderRadius:"12px"},children:[a.jsx(en,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{style:{margin:0},children:"게임별 성과 데이터가 없습니다"})]})}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card large",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"성과 추이"})}),a.jsx("div",{className:"chart-body",children:f.length>0?a.jsx(de,{width:"100%",height:300,children:a.jsxs(tn,{data:f,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorViewer",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorDonation",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"date",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12}),a.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),a.jsx(tt,{}),a.jsx(nt,{type:"monotone",dataKey:"viewers",name:"평균 시청자",stroke:"#6366f1",fillOpacity:1,fill:"url(#colorViewer)"}),a.jsx(nt,{type:"monotone",dataKey:"donations",name:"후원 (만원)",stroke:"#10b981",fillOpacity:1,fill:"url(#colorDonation)"})]})}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",color:"#94a3b8"},children:"성과 데이터가 없습니다"})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"게임별 영향력"})}),a.jsx("div",{className:"chart-body",children:_.length>0?a.jsx(de,{width:"100%",height:280,children:a.jsxs(kn,{data:_,children:[a.jsx(vi,{stroke:"#334155"}),a.jsx(ji,{dataKey:"game",stroke:"#94a3b8",fontSize:11}),a.jsx(yi,{stroke:"#334155"}),a.jsx(St,{name:"시청자",dataKey:"viewers",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.3}),a.jsx(St,{name:"후원",dataKey:"donations",stroke:"#10b981",fill:"#10b981",fillOpacity:.3}),a.jsx(St,{name:"광고효율",dataKey:"adEfficiency",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.3}),a.jsx(tt,{}),a.jsx(xe,{})]})}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"280px",color:"#94a3b8"},children:"게임별 데이터가 없습니다"})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"게임별 광고 효율"})}),a.jsx("div",{className:"chart-body",children:k.length>0?a.jsx(de,{width:"100%",height:280,children:a.jsxs(js,{data:k,layout:"vertical",children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{type:"number",stroke:"#94a3b8",fontSize:12,domain:[0,100]}),a.jsx(Oe,{dataKey:"name",type:"category",stroke:"#94a3b8",fontSize:11,width:80}),a.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:w=>[`${w}%`,"광고 효율"]}),a.jsx(Gt,{dataKey:"efficiency",name:"광고 효율",fill:"#6366f1",radius:[0,4,4,0]})]})}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"280px",color:"#94a3b8"},children:"광고 효율 데이터가 없습니다"})})]})]}),a.jsx("div",{className:"business-insight-banner",style:{marginTop:"24px"},children:a.jsxs("div",{className:"business-insight-content",children:[a.jsxs("div",{className:"business-insight-label",children:[a.jsx(ii,{size:14}),"Nexon Business Insight"]}),a.jsxs("p",{className:"business-insight-text",children:["채팅 로그 분석 결과, 넥슨의 ",a.jsx("strong",{children:"서브컬처/성장형"})," 타이틀에 대한 긍정 반응이 타 장르 대비 ",a.jsx("strong",{children:"32%"})," 높습니다. 블루아카이브 및 메이플스토리 관련 스트리머와의 우선적 협업을 추천합니다."]})]})}),a.jsxs("div",{className:"nexon-contribution-section",children:[a.jsxs("div",{className:"influence-header",children:[a.jsxs("div",{className:"influence-title",children:[a.jsx(we,{size:24}),a.jsx("h2",{children:"넥슨 유입 기여도"})]}),a.jsx("p",{className:"influence-description",children:"이 스트리머의 넥슨 캠페인 기여 분석 및 추정 전환 데이터"})]}),a.jsxs("div",{className:"nexon-contribution-grid",children:[a.jsxs("div",{className:"nexon-contribution-card",children:[a.jsx("div",{className:"nexon-contribution-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(ho,{size:24})}),a.jsxs("div",{className:"nexon-contribution-content",children:[a.jsx("span",{className:"nexon-contribution-label",children:"추정 전환수"}),a.jsx("span",{className:"nexon-contribution-value",children:(b?.totalEstimatedConversions||0).toLocaleString()}),a.jsxs("span",{className:`nexon-contribution-change ${(b?.conversionsChange||0)>=0?"positive":"negative"}`,children:[(b?.conversionsChange||0)>=0?"+":"",b?.conversionsChange||0,"% vs 전월"]})]})]}),a.jsxs("div",{className:"nexon-contribution-card",children:[a.jsx("div",{className:"nexon-contribution-icon",style:{backgroundColor:"#6366f120",color:"#6366f1"},children:a.jsx(Ce,{size:24})}),a.jsxs("div",{className:"nexon-contribution-content",children:[a.jsx("span",{className:"nexon-contribution-label",children:"기여 가치"}),a.jsx("span",{className:"nexon-contribution-value",children:M(b?.contributionValue||0)}),a.jsxs("span",{className:`nexon-contribution-change ${(b?.valueChange||0)>=0?"positive":"negative"}`,children:[(b?.valueChange||0)>=0?"+":"",b?.valueChange||0,"% vs 전월"]})]})]}),a.jsxs("div",{className:"nexon-contribution-card",children:[a.jsx("div",{className:"nexon-contribution-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(_s,{size:24})}),a.jsxs("div",{className:"nexon-contribution-content",children:[a.jsx("span",{className:"nexon-contribution-label",children:"ROI 기여도"}),a.jsxs("span",{className:"nexon-contribution-value",children:[b?.roiContribution||0,"%"]}),a.jsxs("span",{className:"nexon-contribution-change",children:["상위 ",b?.roiPercentile||0,"%"]})]})]}),a.jsxs("div",{className:"nexon-contribution-card",children:[a.jsx("div",{className:"nexon-contribution-icon",style:{backgroundColor:"#8b5cf620",color:"#8b5cf6"},children:a.jsx(Ot,{size:24})}),a.jsxs("div",{className:"nexon-contribution-content",children:[a.jsx("span",{className:"nexon-contribution-label",children:"참여 캠페인"}),a.jsxs("span",{className:"nexon-contribution-value",children:[b?.campaigns?.length||0,"개"]}),a.jsxs("span",{className:"nexon-contribution-change",children:["진행중 ",(b?.campaigns||[]).filter(w=>w.status==="active").length," / 완료 ",(b?.campaigns||[]).filter(w=>w.status==="completed").length]})]})]})]}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"월별 기여도 추이"})}),a.jsx("div",{className:"chart-body",children:(b?.monthlyTrend||[]).length>0?a.jsx(de,{width:"100%",height:280,children:a.jsxs(tn,{data:b.monthlyTrend,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorContribConversions",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"month",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12}),a.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),a.jsx(tt,{}),a.jsx(nt,{type:"monotone",dataKey:"conversions",name:"전환수",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorContribConversions)"})]})}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"280px",color:"#94a3b8"},children:"월별 기여도 데이터가 없습니다"})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"넥슨 IP별 전환 비중"})}),a.jsx("div",{className:"chart-body",children:(b?.nexonIPBreakdown||[]).length>0?a.jsx(de,{width:"100%",height:280,children:a.jsxs(js,{data:b.nexonIPBreakdown,layout:"vertical",children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{type:"number",stroke:"#94a3b8",fontSize:12,domain:[0,50]}),a.jsx(Oe,{dataKey:"ip",type:"category",stroke:"#94a3b8",fontSize:11,width:90}),a.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:w=>[`${w}%`,"기여 비중"]}),a.jsx(Gt,{dataKey:"percent",name:"기여 비중",fill:"#6366f1",radius:[0,4,4,0]})]})}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"280px",color:"#94a3b8"},children:"IP별 전환 데이터가 없습니다"})})]})]}),a.jsxs("div",{className:"admin-table-card",style:{marginTop:"24px"},children:[a.jsx("div",{className:"table-header",children:a.jsx("h3",{children:"캠페인별 기여도 분석"})}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"캠페인명"}),a.jsx("th",{children:"기간"}),a.jsx("th",{children:"추정 전환"}),a.jsx("th",{children:"기여율"}),a.jsx("th",{children:"전환율"}),a.jsx("th",{children:"추정 가치"}),a.jsx("th",{children:"상태"})]})}),a.jsx("tbody",{children:(b?.campaigns||[]).length>0?b.campaigns.map(w=>a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:600},children:w.campaignName}),a.jsx("td",{style:{fontSize:12,color:"#64748b"},children:w.period}),a.jsx("td",{style:{fontWeight:600},children:(w.conversions||0).toLocaleString()}),a.jsx("td",{children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:"60px",height:"6px",background:"#e2e8f0",borderRadius:"3px",overflow:"hidden"},children:a.jsx("div",{style:{width:`${Math.min(w.contributionPercent*5,100)}%`,height:"100%",background:"linear-gradient(90deg, #6366f1, #8b5cf6)",borderRadius:"3px"}})}),a.jsxs("span",{style:{fontSize:"13px",fontWeight:600},children:[w.contributionPercent,"%"]})]})}),a.jsxs("td",{children:[w.conversionRate,"%"]}),a.jsx("td",{style:{fontWeight:600,color:"#10b981"},children:M(w.estimatedValue)}),a.jsx("td",{children:a.jsx("span",{className:`campaign-status ${w.status}`,children:w.status==="active"?"진행중":w.status==="completed"?"완료":"예정"})})]},w.campaignId)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:"캠페인 데이터가 없습니다"})})})]})})]})]}),a.jsxs("div",{className:"admin-table-card",style:{marginTop:"24px"},children:[a.jsx("div",{className:"table-header",children:a.jsx("h3",{children:"최근 방송 기록"})}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"날짜"}),a.jsx("th",{children:"게임/카테고리"}),a.jsx("th",{children:"방송 시간"}),a.jsx("th",{children:"최고 시청자"}),a.jsx("th",{children:"평균 시청자"}),a.jsx("th",{children:"후원"}),a.jsx("th",{children:"광고 효율"})]})}),a.jsx("tbody",{children:p.length>0?p.map((w,g)=>a.jsxs("tr",{children:[a.jsx("td",{children:w.date}),a.jsx("td",{children:a.jsxs("div",{className:"stat-cell",children:[a.jsx(ve,{size:14}),a.jsx("span",{children:w.game})]})}),a.jsx("td",{children:a.jsxs("div",{className:"stat-cell",children:[a.jsx(At,{size:14}),a.jsx("span",{children:w.duration})]})}),a.jsx("td",{children:C(w.peakViewers)}),a.jsx("td",{children:C(w.avgViewers)}),a.jsx("td",{children:M(w.donations)}),a.jsx("td",{children:a.jsxs("div",{className:"efficiency-cell",children:[a.jsx("div",{className:"efficiency-bar",children:a.jsx("div",{className:"efficiency-fill",style:{width:`${w.adEfficiency}%`,backgroundColor:w.adEfficiency>=70?"#10b981":w.adEfficiency>=50?"#f59e0b":"#ef4444"}})}),a.jsxs("span",{children:[w.adEfficiency,"%"]})]})})]},g)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,style:{textAlign:"center",padding:"20px",color:"#94a3b8"},children:"방송 기록이 없습니다"})})})]})})]})]})},fa=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"],Ch=({onStreamerSelect:s})=>{const[e,t]=y.useState(!0),[i,n]=y.useState("week"),[r,o]=y.useState(null),[l,c]=y.useState([]),[d,h]=y.useState({}),[u,f]=y.useState(null),{accessToken:m}=Et();y.useEffect(()=>{p()},[i]);const p=async()=>{t(!0),f(null);const g={"Content-Type":"application/json",...m&&{Authorization:`Bearer ${m}`}};try{const O=await fetch(`${Z}/api/categories/unified-games?limit=10`,{headers:g});if(O.ok){const T=((await O.json()).games||[]).map((D,P)=>({id:D.id,name:D.name||D.name_kr||"Unknown",viewers:0,streamers:0,watchTime:0,revenue:0,growth:0,color:fa[P%fa.length]}));c(T),T.length>0&&!r&&o(T[0].name)}else c([]);h({})}catch(O){console.error("Failed to fetch game analytics:",O),f("불러오기 실패"),c([])}finally{t(!1)}},x=g=>{s&&s(g)},b=y.useMemo(()=>l.length===0?[]:Array.from({length:7},(g,O)=>{const L=new Date;L.setDate(L.getDate()-(6-O));const T={date:`${L.getMonth()+1}/${L.getDate()}`};return l.slice(0,4).forEach(D=>{T[D.name]=0}),T}),[l]),j=y.useMemo(()=>l.length===0?[]:Array.from({length:24},(g,O)=>({hour:`${O}시`,viewers:0})),[l]),v=y.useMemo(()=>l.map(g=>({name:g.name,value:g.viewers,color:g.color})),[l]),S=g=>new Intl.NumberFormat("ko-KR").format(g),_=g=>g>=1e8?`${(g/1e8).toFixed(1)}억`:g>=1e4?`${(g/1e4).toFixed(0)}만`:S(g),k=g=>g>=1e4?`${(g/1e4).toFixed(1)}만`:g>=1e3?`${(g/1e3).toFixed(1)}천`:g,C=({active:g,payload:O,label:L})=>g&&O&&O.length?a.jsxs("div",{className:"chart-tooltip",children:[a.jsx("p",{className:"tooltip-label",children:L}),O.map((T,D)=>a.jsxs("p",{style:{color:T.color},children:[T.name,": ",S(T.value),"명"]},D))]}):null;if(e)return a.jsx(We,{});const M=l.reduce((g,O)=>g+O.viewers,0),N=l.reduce((g,O)=>g+O.streamers,0),z=l.reduce((g,O)=>g+O.watchTime,0),w=l.reduce((g,O)=>g+O.revenue,0);return a.jsxs("div",{className:"admin-game-analytics",children:[a.jsx("div",{className:"admin-toolbar",children:a.jsxs("div",{className:"time-range-selector",children:[a.jsx(ht,{size:18}),a.jsxs("select",{value:i,onChange:g=>n(g.target.value),className:"time-select",children:[a.jsx("option",{value:"week",children:"지난 7일"}),a.jsx("option",{value:"month",children:"지난 30일"}),a.jsx("option",{value:"quarter",children:"지난 3개월"})]})]})}),a.jsxs("div",{className:"revenue-summary-grid",children:[a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#6366f120",color:"#6366f1"},children:a.jsx(At,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"총 시청시간"}),a.jsxs("span",{className:"revenue-card-value",children:[S(z),"시간"]})]})]}),a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(ge,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"평균 동시접속"}),a.jsxs("span",{className:"revenue-card-value",children:[l.length>0?S(Math.floor(M/l.length)):0,"명"]})]})]}),a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(vn,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"활성 스트리머"}),a.jsxs("span",{className:"revenue-card-value",children:[S(N),"명"]})]})]}),a.jsxs("div",{className:"revenue-card",children:[a.jsx("div",{className:"revenue-card-icon",style:{backgroundColor:"#ef444420",color:"#ef4444"},children:a.jsx(we,{size:24})}),a.jsxs("div",{className:"revenue-card-content",children:[a.jsx("span",{className:"revenue-card-label",children:"게임 수익"}),a.jsxs("span",{className:"revenue-card-value",children:["₩",_(w)]})]})]})]}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card large",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"게임별 시청자 트렌드"})}),a.jsx("div",{className:"chart-body",children:a.jsx(de,{width:"100%",height:300,children:a.jsxs(tn,{data:b,children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"date",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12,tickFormatter:k}),a.jsx(xe,{content:a.jsx(C,{})}),a.jsx(tt,{}),a.jsx(nt,{type:"monotone",dataKey:"메이플스토리",stackId:"1",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.6}),a.jsx(nt,{type:"monotone",dataKey:"던전앤파이터",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),a.jsx(nt,{type:"monotone",dataKey:"FIFA 온라인 4",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.6}),a.jsx(nt,{type:"monotone",dataKey:"마비노기",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6})]})})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"게임별 점유율"})}),a.jsx("div",{className:"chart-body",children:a.jsx(de,{width:"100%",height:250,children:a.jsxs(no,{children:[a.jsx(ao,{data:v,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",nameKey:"name",children:v.map((g,O)=>a.jsx(ro,{fill:g.color},`cell-${O}`))}),a.jsx(xe,{formatter:g=>`${S(g)}명`}),a.jsx(tt,{})]})})})]}),a.jsxs("div",{className:"admin-chart-card",children:[a.jsx("div",{className:"chart-header",children:a.jsx("h3",{children:"시간대별 시청자"})}),a.jsx("div",{className:"chart-body",children:a.jsx(de,{width:"100%",height:250,children:a.jsxs(js,{data:j,children:[a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"hour",stroke:"#94a3b8",fontSize:10,interval:2}),a.jsx(Oe,{stroke:"#94a3b8",fontSize:12,tickFormatter:k}),a.jsx(xe,{formatter:g=>`${S(g)}명`}),a.jsx(Gt,{dataKey:"viewers",name:"시청자",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]}),a.jsxs("div",{className:"admin-top-list-card",children:[a.jsxs("div",{className:"top-list-header",children:[a.jsx(ve,{size:20}),a.jsx("h3",{children:"게임 순위"})]}),a.jsx("div",{className:"top-list-body",children:a.jsxs("table",{className:"top-list-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"순위"}),a.jsx("th",{children:"게임"}),a.jsx("th",{children:"시청자"}),a.jsx("th",{children:"스트리머"}),a.jsx("th",{children:"시청시간"}),a.jsx("th",{children:"수익"}),a.jsx("th",{children:"성장률"})]})}),a.jsx("tbody",{children:l.map((g,O)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:`rank-badge rank-${O+1}`,children:O+1})}),a.jsx("td",{children:a.jsxs("div",{className:"game-cell",children:[a.jsx("div",{className:"game-color",style:{backgroundColor:g.color}}),a.jsx("span",{children:g.name})]})}),a.jsxs("td",{children:[k(g.viewers),"명"]}),a.jsxs("td",{children:[S(g.streamers),"명"]}),a.jsxs("td",{children:[k(g.watchTime),"시간"]}),a.jsxs("td",{children:["₩",_(g.revenue)]}),a.jsx("td",{children:a.jsxs("span",{className:`growth-badge ${g.growth>=0?"positive":"negative"}`,children:[g.growth>=0?"+":"",g.growth.toFixed(1),"%"]})})]},g.id))})]})})]}),a.jsxs("div",{className:"admin-top-list-card",children:[a.jsxs("div",{className:"top-list-header",children:[a.jsx(Qi,{size:20}),a.jsx("h3",{children:"게임별 TOP 스트리머"}),a.jsx("select",{value:r,onChange:g=>o(g.target.value),className:"game-select",children:l.map(g=>a.jsx("option",{value:g.name,children:g.name},g.id))})]}),a.jsx("div",{className:"top-list-body",children:a.jsxs("table",{className:"top-list-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"순위"}),a.jsx("th",{children:"스트리머"}),a.jsx("th",{children:"시청자"}),a.jsx("th",{children:"영향력"})]})}),a.jsx("tbody",{children:(d[r]||[]).map(g=>a.jsxs("tr",{className:"clickable",onClick:()=>x(g.id),style:{cursor:"pointer"},children:[a.jsx("td",{children:a.jsx("span",{className:`rank-badge rank-${g.rank}`,children:g.rank})}),a.jsx("td",{children:a.jsxs("div",{className:"streamer-cell",children:[a.jsx("div",{className:"streamer-avatar",children:g.name.charAt(0)}),a.jsx("span",{children:g.name})]})}),a.jsxs("td",{children:[S(g.viewers),"명"]}),a.jsx("td",{children:a.jsxs("div",{className:"influence-bar",children:[a.jsx("div",{className:"influence-fill",style:{width:`${g.influence}%`,backgroundColor:l.find(O=>O.name===r)?.color||"#6366f1"}}),a.jsx("span",{children:g.influence})]})}),a.jsx("td",{children:a.jsx("button",{className:"view-detail-btn",children:a.jsx(Ds,{size:18})})})]},g.rank))})]})})]})]})},ma=({onStreamerSelect:s})=>{const[e,t]=y.useState(!0),[i,n]=y.useState(""),[r,o]=y.useState([]),[l,c]=y.useState([]),[d,h]=y.useState([]),[u,f]=y.useState(null),{accessToken:m}=Et();y.useEffect(()=>{p()},[]);const p=async()=>{t(!0),f(null);const _={"Content-Type":"application/json",...m&&{Authorization:`Bearer ${m}`}};try{const[k]=await Promise.all([fetch(`${Z}/api/broadcasters?limit=20&nexonOnly=true`,{headers:_})]);if(k.ok){const M=((await k.json()).broadcasters||[]).map((N,z)=>({id:N.id||z+1,name:N.broadcaster_name||N.channel_id||"익명 스트리머",channelId:N.channel_id,platform:N.platform||"chzzk",avgViewers:N.unique_viewers||0,chatVelocity:N.chat_velocity||0,donationConversion:N.donation_conversion||0,nexonAffinity:N.nexon_affinity||0,sentiment:0,trend:"stable",mainNexonIP:"-",totalDonations:N.total_donations||0,totalEvents:N.total_events||0,chatCount:N.chat_count||0,donationCount:N.donation_count||0,uniqueViewers:N.unique_viewers||0}));o(M)}else o([]);c([]),h([])}catch(k){console.error("Failed to fetch discovery data:",k),f("불러오기 실패"),o([])}finally{t(!1)}},x=y.useMemo(()=>i?r.filter(_=>_.name.toLowerCase().includes(i.toLowerCase())):r,[i,r]),b=_=>_>=1e4?`${(_/1e4).toFixed(1)}만`:_>=1e3?`${(_/1e3).toFixed(1)}천`:_.toLocaleString(),j=_=>_>=80?"high":_>=60?"medium":"low",v=_=>_>=75?"high":_>=50?"medium":"low",S=_=>{s&&s(_)};return e?a.jsx(We,{}):a.jsxs("div",{className:"admin-nexon-discovery",children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"toolbar-search",children:[a.jsx(bn,{size:18}),a.jsx("input",{type:"text",placeholder:"넥슨 IP 또는 스트리머 검색...",value:i,onChange:_=>n(_.target.value),className:"search-input"})]}),a.jsx("button",{className:"admin-refresh-btn",disabled:e,children:a.jsx(he,{size:16,className:e?"spin":""})})]}),a.jsx("div",{className:"nexon-ip-grid",children:l.length>0?l.map(_=>a.jsxs("div",{className:`nexon-ip-card ${_.id}`,children:[a.jsxs("div",{className:"nexon-ip-header",children:[a.jsx("span",{className:"nexon-ip-name",children:_.name}),a.jsxs("span",{className:`nexon-ip-trend ${_.trendType}`,children:[_.trend>0?"▲":_.trend<0?"▼":"─"," ",Math.abs(_.trend),"%"]})]}),a.jsxs("div",{className:"nexon-ip-stats",children:[a.jsxs("div",{className:"nexon-ip-stat",children:[a.jsx("span",{className:"label",children:"총 언급량"}),a.jsx("span",{className:"value",children:b(_.mentionCount)})]}),a.jsxs("div",{className:"nexon-ip-stat",children:[a.jsx("span",{className:"label",children:"감성 지수"}),a.jsxs("span",{className:"value",children:[_.sentiment,"%"]}),a.jsx("div",{className:"sentiment-gauge",children:a.jsx("div",{className:`sentiment-fill ${v(_.sentiment)}`,style:{width:`${_.sentiment}%`}})})]})]}),a.jsxs("div",{className:"nexon-ip-insight",children:['"',_.insight,'"']})]},_.id)):a.jsxs("div",{className:"empty-state-card",style:{gridColumn:"1 / -1",padding:"40px",textAlign:"center",color:"#94a3b8"},children:[a.jsx(en,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{style:{margin:0},children:"IP 인텔리전스 데이터가 없습니다"}),a.jsx("p",{style:{margin:"8px 0 0",fontSize:"12px"},children:"채팅 데이터 수집 후 자동 생성됩니다"})]})}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card large",children:[a.jsx("div",{className:"chart-header",children:a.jsxs("h3",{children:[a.jsx(ge,{size:20,style:{marginRight:8}}),"상호작용 밀도 기반 스트리머 랭킹"]})}),a.jsx("div",{className:"admin-table-container",children:a.jsxs("table",{className:"admin-table discovery-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"스트리머 (방송자)"}),a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"고유 시청자"}),a.jsx("th",{children:"채팅 밀도"}),a.jsx("th",{children:"후원 전환율"}),a.jsx("th",{children:"넥슨 친화도"}),a.jsx("th",{})]})}),a.jsx("tbody",{children:x.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:7,style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:[a.jsx(en,{size:24,style:{marginBottom:"8px",opacity:.5}}),a.jsx("div",{children:"넥슨 게임을 방송한 스트리머가 없습니다"}),a.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:"넥슨 게임 카테고리로 방송한 이력이 수집되면 자동으로 표시됩니다"})]})}):x.map(_=>a.jsxs("tr",{className:"clickable",onClick:()=>S(_.channelId||_.id),children:[a.jsx("td",{children:a.jsxs("div",{className:"streamer-info",children:[a.jsx("div",{className:"streamer-avatar",children:_.name.charAt(0)}),a.jsxs("div",{className:"streamer-details",children:[a.jsx("span",{className:"streamer-name",children:_.name}),a.jsx("span",{className:"streamer-ip",title:_.channelId,children:_.channelId?`채널: ${_.channelId.slice(0,12)}...`:_.mainNexonIP})]})]})}),a.jsx("td",{children:a.jsx("span",{className:"platform-badge",children:_.platform.toUpperCase()})}),a.jsx("td",{children:b(_.avgViewers)}),a.jsx("td",{children:a.jsxs("div",{className:"chat-velocity-cell",children:[a.jsxs("span",{className:"chat-velocity-value",children:[_.chatVelocity," msg/m"]}),a.jsx("div",{className:"chat-velocity-bar",children:a.jsx("div",{className:"chat-velocity-fill",style:{width:`${Math.min(_.chatVelocity/250*100,100)}%`}})})]})}),a.jsx("td",{children:a.jsxs("span",{style:{fontWeight:600},children:[_.donationConversion,"%"]})}),a.jsx("td",{children:a.jsxs("span",{className:`affinity-badge ${j(_.nexonAffinity)}`,children:[a.jsx(Ot,{size:14}),_.nexonAffinity,"%"]})}),a.jsx("td",{children:a.jsx("button",{className:"view-detail-btn",children:a.jsx(Ds,{size:18})})})]},_.id))})]})})]}),a.jsxs("div",{className:"interest-radar-container",children:[a.jsxs("div",{className:"interest-radar-header",children:[a.jsx(He,{size:20}),a.jsx("h3",{children:"시청자 코어 관심 키워드"})]}),a.jsx("div",{style:{height:280},children:d.length>0?a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(kn,{data:d,children:[a.jsx(vi,{stroke:"#475569"}),a.jsx(ji,{dataKey:"keyword",tick:{fontSize:11,fill:"#94a3b8",fontWeight:600}}),a.jsx(yi,{angle:30,domain:[0,100],tick:{fill:"#64748b",fontSize:10}}),a.jsx(St,{name:"관심도",dataKey:"value",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.4,strokeWidth:3})]})}):a.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",color:"#94a3b8"},children:[a.jsx(He,{size:32,style:{opacity:.5,marginBottom:"12px"}}),a.jsx("p",{style:{margin:0},children:"키워드 데이터 없음"})]})})]})]})]})},it={brandKeywordMentions:18420,mentionsChange:24.5,sentimentIndex:78.5,sentimentChange:3.2,estimatedConversions:2840,conversionChange:18.7,campaignROI:342,roiChange:15.2},Ph=[{date:"01/03",mentions:2100,sentiment:75},{date:"01/04",mentions:2450,sentiment:78},{date:"01/05",mentions:3200,sentiment:82},{date:"01/06",mentions:2890,sentiment:80},{date:"01/07",mentions:3500,sentiment:85},{date:"01/08",mentions:2780,sentiment:77},{date:"01/09",mentions:3100,sentiment:79}],pa=[{id:1,name:"더퍼디 런칭 캠페인",startDate:"2026-01-01",endDate:"2026-01-15",budget:5e7,impressions:125e5,engagements:85e4,conversions:1200,roi:385,status:"active"},{id:2,name:"블루아카 3주년 기념",startDate:"2025-12-15",endDate:"2025-12-31",budget:35e6,impressions:82e5,engagements:62e4,conversions:890,roi:312,status:"completed"},{id:3,name:"FC온라인 윈터 시즌",startDate:"2026-01-10",endDate:"2026-01-25",budget:42e6,impressions:0,engagements:0,conversions:0,roi:0,status:"scheduled"},{id:4,name:"메이플 드리머 업데이트",startDate:"2025-11-20",endDate:"2025-12-10",budget:28e6,impressions:68e5,engagements:48e4,conversions:720,roi:278,status:"completed"}],Mh=()=>{const[s,e]=y.useState(!0),[t,i]=y.useState("all");y.useEffect(()=>{e(!0);const l=setTimeout(()=>e(!1),500);return()=>clearTimeout(l)},[]);const n=l=>l>=1e8?`${(l/1e8).toFixed(1)}억`:l>=1e4?`${(l/1e4).toFixed(1)}만`:l>=1e3?`${(l/1e3).toFixed(1)}천`:l.toLocaleString(),r=l=>l>=1e8?`₩${(l/1e8).toFixed(1)}억`:l>=1e7?`₩${(l/1e7).toFixed(1)}천만`:`₩${l.toLocaleString()}`,o=({active:l,payload:c,label:d})=>l&&c&&c.length?a.jsxs("div",{className:"chart-tooltip",children:[a.jsx("p",{className:"tooltip-label",children:d}),c.map((h,u)=>a.jsxs("p",{style:{color:h.color},children:[h.name,": ",h.name==="감성지수"?`${h.value}%`:n(h.value)]},u))]}):null;return s?a.jsx(We,{}):a.jsxs("div",{className:"admin-nexon-campaign",children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"time-range-selector",children:[a.jsx(ht,{size:18}),a.jsxs("select",{value:t,onChange:l=>i(l.target.value),className:"time-select",children:[a.jsx("option",{value:"all",children:"전체 캠페인"}),pa.map(l=>a.jsx("option",{value:l.id,children:l.name},l.id))]})]}),a.jsx("button",{className:"admin-refresh-btn",disabled:s,children:a.jsx(he,{size:16,className:s?"spin":""})})]}),a.jsxs("div",{className:"campaign-metrics-grid",children:[a.jsxs("div",{className:"campaign-metric-card",children:[a.jsxs("div",{className:"campaign-metric-header",children:[a.jsx("div",{className:"campaign-metric-icon",style:{backgroundColor:"#6366f120",color:"#6366f1"},children:a.jsx(Mt,{size:22})}),a.jsxs("span",{className:"campaign-metric-change positive",children:[a.jsx(we,{size:14}),Math.abs(it.mentionsChange),"%"]})]}),a.jsx("p",{className:"campaign-metric-label",children:"브랜드 키워드 언급"}),a.jsx("p",{className:"campaign-metric-value",children:n(it.brandKeywordMentions)})]}),a.jsxs("div",{className:"campaign-metric-card",children:[a.jsxs("div",{className:"campaign-metric-header",children:[a.jsx("div",{className:"campaign-metric-icon",style:{backgroundColor:"#ef444420",color:"#ef4444"},children:a.jsx(oc,{size:22})}),a.jsxs("span",{className:"campaign-metric-change positive",children:[a.jsx(we,{size:14}),Math.abs(it.sentimentChange),"%"]})]}),a.jsx("p",{className:"campaign-metric-label",children:"채팅 긍정 지수"}),a.jsxs("p",{className:"campaign-metric-value",children:[it.sentimentIndex,"%"]})]}),a.jsxs("div",{className:"campaign-metric-card",children:[a.jsxs("div",{className:"campaign-metric-header",children:[a.jsx("div",{className:"campaign-metric-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(ho,{size:22})}),a.jsxs("span",{className:"campaign-metric-change positive",children:[a.jsx(we,{size:14}),Math.abs(it.conversionChange),"%"]})]}),a.jsx("p",{className:"campaign-metric-label",children:"추정 유입 전환"}),a.jsx("p",{className:"campaign-metric-value",children:n(it.estimatedConversions)})]}),a.jsxs("div",{className:"campaign-metric-card",children:[a.jsxs("div",{className:"campaign-metric-header",children:[a.jsx("div",{className:"campaign-metric-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(ii,{size:22})}),a.jsxs("span",{className:"campaign-metric-change positive",children:[a.jsx(we,{size:14}),Math.abs(it.roiChange),"%"]})]}),a.jsx("p",{className:"campaign-metric-label",children:"캠페인 ROI"}),a.jsxs("p",{className:"campaign-metric-value",children:[it.campaignROI,"%"]})]})]}),a.jsxs("div",{className:"admin-charts-grid",children:[a.jsxs("div",{className:"admin-chart-card large",children:[a.jsxs("div",{className:"chart-header",children:[a.jsx("h3",{children:"집행 시점별 브랜드 언급량 변화"}),a.jsx("p",{style:{fontSize:12,color:"#64748b",marginTop:4},children:"실시간 채팅 로그 매칭 결과"})]}),a.jsx("div",{className:"chart-body",children:a.jsx(de,{width:"100%",height:300,children:a.jsxs(lc,{data:Ph,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorMentions",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.2}),a.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),a.jsx(Be,{strokeDasharray:"3 3",stroke:"#334155"}),a.jsx($e,{dataKey:"date",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{yAxisId:"left",stroke:"#94a3b8",fontSize:12}),a.jsx(Oe,{yAxisId:"right",orientation:"right",stroke:"#10b981",fontSize:12,domain:[0,100]}),a.jsx(xe,{content:a.jsx(o,{})}),a.jsx(nt,{yAxisId:"left",type:"monotone",dataKey:"mentions",name:"언급량",stroke:"#6366f1",strokeWidth:3,fill:"url(#colorMentions)"}),a.jsx(io,{yAxisId:"right",type:"monotone",dataKey:"sentiment",name:"감성지수",stroke:"#10b981",strokeWidth:3,dot:!1})]})})})]}),a.jsxs("div",{className:"campaign-roi-summary",children:[a.jsxs("div",{className:"campaign-roi-header",children:[a.jsx(_s,{size:24,style:{color:"#f59e0b"}}),a.jsx("h3",{children:"캠페인 성과 요약 (ROI)"})]}),a.jsxs("div",{className:"campaign-roi-stats",children:[a.jsxs("div",{className:"campaign-roi-stat",children:[a.jsx("span",{className:"label",children:"KPI 달성률"}),a.jsx("span",{className:"value highlight",children:"142.5%"})]}),a.jsxs("div",{className:"campaign-roi-stat",children:[a.jsx("span",{className:"label",children:"예상 도달 가치"}),a.jsx("span",{className:"value",children:"₩1.8B"})]}),a.jsxs("div",{className:"campaign-roi-stat",children:[a.jsx("span",{className:"label",children:"유입 가중치"}),a.jsx("span",{className:"value",style:{color:"#818cf8"},children:"Excellent"})]})]})]})]}),a.jsxs("div",{className:"admin-top-list-card",style:{marginTop:28},children:[a.jsxs("div",{className:"top-list-header",children:[a.jsx(_s,{size:20}),a.jsx("h3",{children:"캠페인 현황"})]}),a.jsx("div",{className:"top-list-body",children:a.jsxs("table",{className:"top-list-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"캠페인명"}),a.jsx("th",{children:"기간"}),a.jsx("th",{children:"예산"}),a.jsx("th",{children:"노출"}),a.jsx("th",{children:"참여"}),a.jsx("th",{children:"전환"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"상태"})]})}),a.jsx("tbody",{children:pa.map(l=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{style:{fontWeight:600},children:l.name})}),a.jsxs("td",{style:{fontSize:12,color:"#64748b"},children:[l.startDate," ~ ",l.endDate]}),a.jsx("td",{children:r(l.budget)}),a.jsx("td",{children:l.impressions>0?n(l.impressions):"-"}),a.jsx("td",{children:l.engagements>0?n(l.engagements):"-"}),a.jsx("td",{children:l.conversions>0?n(l.conversions):"-"}),a.jsx("td",{children:l.roi>0?a.jsxs("span",{style:{fontWeight:700,color:l.roi>=300?"#10b981":"#6366f1"},children:[l.roi,"%"]}):"-"}),a.jsx("td",{children:a.jsx("span",{className:`campaign-status ${l.status}`,children:l.status==="active"?"진행중":l.status==="completed"?"완료":"예정"})})]},l.id))})]})})]}),a.jsx("div",{style:{marginTop:24,textAlign:"right"},children:a.jsx("button",{className:"admin-streamer-mode-btn",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",color:"white",border:"none",padding:"12px 24px",borderRadius:12,fontWeight:700,cursor:"pointer"},children:"사업부 보고서 익스포트 (.PDF)"})})]})};function Rs(s){return s+.5|0}const at=(s,e,t)=>Math.max(Math.min(s,t),e);function hs(s){return at(Rs(s*2.55),0,255)}function ct(s){return at(Rs(s*255),0,255)}function qe(s){return at(Rs(s/2.55)/100,0,1)}function ga(s){return at(Rs(s*100),0,100)}const Se={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sn=[..."0123456789ABCDEF"],Ah=s=>sn[s&15],Oh=s=>sn[(s&240)>>4]+sn[s&15],Bs=s=>(s&240)>>4===(s&15),zh=s=>Bs(s.r)&&Bs(s.g)&&Bs(s.b)&&Bs(s.a);function Dh(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&Se[s[1]]*17,g:255&Se[s[2]]*17,b:255&Se[s[3]]*17,a:e===5?Se[s[4]]*17:255}:(e===7||e===9)&&(t={r:Se[s[1]]<<4|Se[s[2]],g:Se[s[3]]<<4|Se[s[4]],b:Se[s[5]]<<4|Se[s[6]],a:e===9?Se[s[7]]<<4|Se[s[8]]:255})),t}const Rh=(s,e)=>s<255?e(s):"";function Th(s){var e=zh(s)?Ah:Oh;return s?"#"+e(s.r)+e(s.g)+e(s.b)+Rh(s.a,e):void 0}const Eh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vo(s,e,t){const i=e*Math.min(t,1-t),n=(r,o=(r+s/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function Lh(s,e,t){const i=(n,r=(n+s/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Ih(s,e,t){const i=vo(s,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)i[n]*=1-e-t,i[n]+=e;return i}function Fh(s,e,t,i,n){return s===n?(e-t)/i+(e<t?6:0):e===n?(t-s)/i+2:(s-e)/i+4}function Nn(s){const t=s.r/255,i=s.g/255,n=s.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),l=(r+o)/2;let c,d,h;return r!==o&&(h=r-o,d=l>.5?h/(2-r-o):h/(r+o),c=Fh(t,i,n,h,r),c=c*60+.5),[c|0,d||0,l]}function wn(s,e,t,i){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,i)).map(ct)}function Sn(s,e,t){return wn(vo,s,e,t)}function Bh(s,e,t){return wn(Ih,s,e,t)}function $h(s,e,t){return wn(Lh,s,e,t)}function yo(s){return(s%360+360)%360}function Vh(s){const e=Eh.exec(s);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?hs(+e[5]):ct(+e[5]));const n=yo(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Bh(n,r,o):e[1]==="hsv"?i=$h(n,r,o):i=Sn(n,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function Wh(s,e){var t=Nn(s);t[0]=yo(t[0]+e),t=Sn(t),s.r=t[0],s.g=t[1],s.b=t[2]}function Hh(s){if(!s)return;const e=Nn(s),t=e[0],i=ga(e[1]),n=ga(e[2]);return s.a<255?`hsla(${t}, ${i}%, ${n}%, ${qe(s.a)})`:`hsl(${t}, ${i}%, ${n}%)`}const xa={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ba={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Kh(){const s={},e=Object.keys(ba),t=Object.keys(xa);let i,n,r,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],n=0;n<t.length;n++)r=t[n],l=l.replace(r,xa[r]);r=parseInt(ba[o],16),s[l]=[r>>16&255,r>>8&255,r&255]}return s}let $s;function Yh(s){$s||($s=Kh(),$s.transparent=[0,0,0,0]);const e=$s[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Uh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xh(s){const e=Uh.exec(s);let t=255,i,n,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?hs(o):at(o*255,0,255)}return i=+e[1],n=+e[3],r=+e[5],i=255&(e[2]?hs(i):at(i,0,255)),n=255&(e[4]?hs(n):at(n,0,255)),r=255&(e[6]?hs(r):at(r,0,255)),{r:i,g:n,b:r,a:t}}}function Gh(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${qe(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Ii=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Vt=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function qh(s,e,t){const i=Vt(qe(s.r)),n=Vt(qe(s.g)),r=Vt(qe(s.b));return{r:ct(Ii(i+t*(Vt(qe(e.r))-i))),g:ct(Ii(n+t*(Vt(qe(e.g))-n))),b:ct(Ii(r+t*(Vt(qe(e.b))-r))),a:s.a+t*(e.a-s.a)}}function Vs(s,e,t){if(s){let i=Nn(s);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Sn(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function jo(s,e){return s&&Object.assign(e||{},s)}function va(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=ct(s[3]))):(e=jo(s,{r:0,g:0,b:0,a:1}),e.a=ct(e.a)),e}function Zh(s){return s.charAt(0)==="r"?Xh(s):Vh(s)}class Ss{constructor(e){if(e instanceof Ss)return e;const t=typeof e;let i;t==="object"?i=va(e):t==="string"&&(i=Dh(e)||Yh(e)||Zh(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=jo(this._rgb);return e&&(e.a=qe(e.a)),e}set rgb(e){this._rgb=va(e)}rgbString(){return this._valid?Gh(this._rgb):void 0}hexString(){return this._valid?Th(this._rgb):void 0}hslString(){return this._valid?Hh(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let r;const o=t===r?.5:t,l=2*o-1,c=i.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;r=1-d,i.r=255&d*i.r+r*n.r+.5,i.g=255&d*i.g+r*n.g+.5,i.b=255&d*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=qh(this._rgb,e._rgb,t)),this}clone(){return new Ss(this.rgb)}alpha(e){return this._rgb.a=ct(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Rs(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vs(this._rgb,2,e),this}darken(e){return Vs(this._rgb,2,-e),this}saturate(e){return Vs(this._rgb,1,e),this}desaturate(e){return Vs(this._rgb,1,-e),this}rotate(e){return Wh(this._rgb,e),this}}function Ye(){}const Jh=(()=>{let s=0;return()=>s++})();function F(s){return s==null}function G(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function B(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function J(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Ne(s,e){return J(s)?s:e}function I(s,e){return typeof s>"u"?e:s}const Qh=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,_o=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function U(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function K(s,e,t,i){let n,r,o;if(G(s))for(r=s.length,n=0;n<r;n++)e.call(t,s[n],n);else if(B(s))for(o=Object.keys(s),r=o.length,n=0;n<r;n++)e.call(t,s[o[n]],o[n])}function ai(s,e){let t,i,n,r;if(!s||!e||s.length!==e.length)return!1;for(t=0,i=s.length;t<i;++t)if(n=s[t],r=e[t],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function ri(s){if(G(s))return s.map(ri);if(B(s)){const e=Object.create(null),t=Object.keys(s),i=t.length;let n=0;for(;n<i;++n)e[t[n]]=ri(s[t[n]]);return e}return s}function ko(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function eu(s,e,t,i){if(!ko(s))return;const n=e[s],r=t[s];B(n)&&B(r)?Cs(n,r,i):e[s]=ri(r)}function Cs(s,e,t){const i=G(e)?e:[e],n=i.length;if(!B(s))return s;t=t||{};const r=t.merger||eu;let o;for(let l=0;l<n;++l){if(o=i[l],!B(o))continue;const c=Object.keys(o);for(let d=0,h=c.length;d<h;++d)r(c[d],s,o,t)}return s}function xs(s,e){return Cs(s,e,{merger:tu})}function tu(s,e,t){if(!ko(s))return;const i=e[s],n=t[s];B(i)&&B(n)?xs(i,n):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=ri(n))}const ya={"":s=>s,x:s=>s.x,y:s=>s.y};function su(s){const e=s.split("."),t=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function iu(s){const e=su(s);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function ut(s,e){return(ya[e]||(ya[e]=iu(e)))(s)}function Cn(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ps=s=>typeof s<"u",ft=s=>typeof s=="function",ja=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function nu(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const W=Math.PI,X=2*W,au=X+W,oi=Number.POSITIVE_INFINITY,ru=W/180,Q=W/2,bt=W/4,_a=W*2/3,rt=Math.log10,Ve=Math.sign;function bs(s,e,t){return Math.abs(s-e)<t}function ka(s){const e=Math.round(s);s=bs(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(rt(s))),i=s/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function ou(s){const e=[],t=Math.sqrt(s);let i;for(i=1;i<t;i++)s%i===0&&(e.push(i),e.push(s/i));return t===(t|0)&&e.push(t),e.sort((n,r)=>n-r).pop(),e}function lu(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function qt(s){return!lu(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function cu(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function No(s,e,t){let i,n,r;for(i=0,n=s.length;i<n;i++)r=s[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function De(s){return s*(W/180)}function Pn(s){return s*(180/W)}function Na(s){if(!J(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function wo(s,e){const t=e.x-s.x,i=e.y-s.y,n=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*W&&(r+=X),{angle:r,distance:n}}function nn(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function du(s,e){return(s-e+au)%X-W}function ae(s){return(s%X+X)%X}function Ms(s,e,t,i){const n=ae(s),r=ae(e),o=ae(t),l=ae(r-n),c=ae(o-n),d=ae(n-r),h=ae(n-o);return n===r||n===o||i&&r===o||l>c&&d<h}function se(s,e,t){return Math.max(e,Math.min(t,s))}function hu(s){return se(s,-32768,32767)}function Je(s,e,t,i=1e-6){return s>=Math.min(e,t)-i&&s<=Math.max(e,t)+i}function Mn(s,e,t){t=t||(o=>s[o]<e);let i=s.length-1,n=0,r;for(;i-n>1;)r=n+i>>1,t(r)?n=r:i=r;return{lo:n,hi:i}}const Qe=(s,e,t,i)=>Mn(s,t,i?n=>{const r=s[n][e];return r<t||r===t&&s[n+1][e]===t}:n=>s[n][e]<t),uu=(s,e,t)=>Mn(s,t,i=>s[i][e]>=t);function fu(s,e,t){let i=0,n=s.length;for(;i<n&&s[i]<e;)i++;for(;n>i&&s[n-1]>t;)n--;return i>0||n<s.length?s.slice(i,n):s}const So=["push","pop","shift","splice","unshift"];function mu(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),So.forEach(t=>{const i="_onData"+Cn(t),n=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...r){const o=n.apply(this,r);return s._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...r)}),o}})})}function wa(s,e){const t=s._chartjs;if(!t)return;const i=t.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(So.forEach(r=>{delete s[r]}),delete s._chartjs)}function Co(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const Po=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function Mo(s,e){let t=[],i=!1;return function(...n){t=n,i||(i=!0,Po.call(window,()=>{i=!1,s.apply(e,t)}))}}function pu(s,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(s,e,i)):s.apply(this,i),e}}const An=s=>s==="start"?"left":s==="end"?"right":"center",ne=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,gu=(s,e,t,i)=>s===(i?"left":"right")?t:s==="center"?(e+t)/2:e;function Ao(s,e,t){const i=e.length;let n=0,r=i;if(s._sorted){const{iScale:o,vScale:l,_parsed:c}=s,d=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,h=o.axis,{min:u,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(n=Math.min(Qe(c,h,u).lo,t?i:Qe(e,h,o.getPixelForValue(u)).lo),d){const x=c.slice(0,n+1).reverse().findIndex(b=>!F(b[l.axis]));n-=Math.max(0,x)}n=se(n,0,i-1)}if(p){let x=Math.max(Qe(c,o.axis,f,!0).hi+1,t?0:Qe(e,h,o.getPixelForValue(f),!0).hi+1);if(d){const b=c.slice(x-1).findIndex(j=>!F(j[l.axis]));x+=Math.max(0,b)}r=se(x,n,i)-n}else r=i-n}return{start:n,count:r}}function Oo(s){const{xScale:e,yScale:t,_scaleRanges:i}=s,n={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return s._scaleRanges=n,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,n),r}const Ws=s=>s===0||s===1,Sa=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*X/t)),Ca=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*X/t)+1,vs={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Q)+1,easeOutSine:s=>Math.sin(s*Q),easeInOutSine:s=>-.5*(Math.cos(W*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Ws(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Ws(s)?s:Sa(s,.075,.3),easeOutElastic:s=>Ws(s)?s:Ca(s,.075,.3),easeInOutElastic(s){return Ws(s)?s:s<.5?.5*Sa(s*2,.1125,.45):.5+.5*Ca(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-vs.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?vs.easeInBounce(s*2)*.5:vs.easeOutBounce(s*2-1)*.5+.5};function On(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Pa(s){return On(s)?s:new Ss(s)}function Fi(s){return On(s)?s:new Ss(s).saturate(.5).darken(.1).hexString()}const xu=["x","y","borderWidth","radius","tension"],bu=["color","borderColor","backgroundColor"];function vu(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:bu},numbers:{type:"number",properties:xu}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yu(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ma=new Map;function ju(s,e){e=e||{};const t=s+JSON.stringify(e);let i=Ma.get(t);return i||(i=new Intl.NumberFormat(s,e),Ma.set(t,i)),i}function Ts(s,e,t){return ju(e,t).format(s)}const zo={values(s){return G(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const i=this.chart.options.locale;let n,r=s;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),r=_u(s,t)}const o=rt(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Ts(s,i,c)},logarithmic(s,e,t){if(s===0)return"0";const i=t[e].significand||s/Math.pow(10,Math.floor(rt(s)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?zo.numeric.call(this,s,e,t):""}};function _u(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var _i={formatters:zo};function ku(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_i.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Dt=Object.create(null),an=Object.create(null);function ys(s,e){if(!e)return s;const t=e.split(".");for(let i=0,n=t.length;i<n;++i){const r=t[i];s=s[r]||(s[r]=Object.create(null))}return s}function Bi(s,e,t){return typeof e=="string"?Cs(ys(s,e),t):Cs(ys(s,""),e)}class Nu{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Fi(n.backgroundColor),this.hoverBorderColor=(i,n)=>Fi(n.borderColor),this.hoverColor=(i,n)=>Fi(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Bi(this,e,t)}get(e){return ys(this,e)}describe(e,t){return Bi(an,e,t)}override(e,t){return Bi(Dt,e,t)}route(e,t,i,n){const r=ys(this,e),o=ys(this,i),l="_"+t;Object.defineProperties(r,{[l]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],d=o[n];return B(c)?Object.assign({},d,c):I(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var q=new Nu({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vu,yu,ku]);function wu(s){return!s||F(s.size)||F(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function li(s,e,t,i,n){let r=e[n];return r||(r=e[n]=s.measureText(n).width,t.push(n)),r>i&&(i=r),i}function Su(s,e,t,i){i=i||{};let n=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(n=i.data={},r=i.garbageCollect=[],i.font=e),s.save(),s.font=e;let o=0;const l=t.length;let c,d,h,u,f;for(c=0;c<l;c++)if(u=t[c],u!=null&&!G(u))o=li(s,n,r,o,u);else if(G(u))for(d=0,h=u.length;d<h;d++)f=u[d],f!=null&&!G(f)&&(o=li(s,n,r,o,f));s.restore();const m=r.length/2;if(m>t.length){for(c=0;c<m;c++)delete n[r[c]];r.splice(0,m)}return o}function vt(s,e,t){const i=s.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*i)/i+n}function Aa(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function rn(s,e,t,i){Do(s,e,t,i,null)}function Do(s,e,t,i,n){let r,o,l,c,d,h,u,f;const m=e.pointStyle,p=e.rotation,x=e.radius;let b=(p||0)*ru;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(t,i),s.rotate(b),s.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),s.restore();return}if(!(isNaN(x)||x<=0)){switch(s.beginPath(),m){default:n?s.ellipse(t,i,n/2,x,0,0,X):s.arc(t,i,x,0,X),s.closePath();break;case"triangle":h=n?n/2:x,s.moveTo(t+Math.sin(b)*h,i-Math.cos(b)*x),b+=_a,s.lineTo(t+Math.sin(b)*h,i-Math.cos(b)*x),b+=_a,s.lineTo(t+Math.sin(b)*h,i-Math.cos(b)*x),s.closePath();break;case"rectRounded":d=x*.516,c=x-d,o=Math.cos(b+bt)*c,u=Math.cos(b+bt)*(n?n/2-d:c),l=Math.sin(b+bt)*c,f=Math.sin(b+bt)*(n?n/2-d:c),s.arc(t-u,i-l,d,b-W,b-Q),s.arc(t+f,i-o,d,b-Q,b),s.arc(t+u,i+l,d,b,b+Q),s.arc(t-f,i+o,d,b+Q,b+W),s.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*x,h=n?n/2:c,s.rect(t-h,i-c,2*h,2*c);break}b+=bt;case"rectRot":u=Math.cos(b)*(n?n/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(n?n/2:x),s.moveTo(t-u,i-l),s.lineTo(t+f,i-o),s.lineTo(t+u,i+l),s.lineTo(t-f,i+o),s.closePath();break;case"crossRot":b+=bt;case"cross":u=Math.cos(b)*(n?n/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(n?n/2:x),s.moveTo(t-u,i-l),s.lineTo(t+u,i+l),s.moveTo(t+f,i-o),s.lineTo(t-f,i+o);break;case"star":u=Math.cos(b)*(n?n/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(n?n/2:x),s.moveTo(t-u,i-l),s.lineTo(t+u,i+l),s.moveTo(t+f,i-o),s.lineTo(t-f,i+o),b+=bt,u=Math.cos(b)*(n?n/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(n?n/2:x),s.moveTo(t-u,i-l),s.lineTo(t+u,i+l),s.moveTo(t+f,i-o),s.lineTo(t-f,i+o);break;case"line":o=n?n/2:Math.cos(b)*x,l=Math.sin(b)*x,s.moveTo(t-o,i-l),s.lineTo(t+o,i+l);break;case"dash":s.moveTo(t,i),s.lineTo(t+Math.cos(b)*(n?n/2:x),i+Math.sin(b)*x);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function et(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function ki(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function Ni(s){s.restore()}function Cu(s,e,t,i,n){if(!e)return s.lineTo(t.x,t.y);if(n==="middle"){const r=(e.x+t.x)/2;s.lineTo(r,e.y),s.lineTo(r,t.y)}else n==="after"!=!!i?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function Pu(s,e,t,i){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Mu(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),F(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function Au(s,e,t,i,n){if(n.strikethrough||n.underline){const r=s.measureText(i),o=e-r.actualBoundingBoxLeft,l=e+r.actualBoundingBoxRight,c=t-r.actualBoundingBoxAscent,d=t+r.actualBoundingBoxDescent,h=n.strikethrough?(c+d)/2:d;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(o,h),s.lineTo(l,h),s.stroke()}}function Ou(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function Rt(s,e,t,i,n,r={}){const o=G(e)?e:[e],l=r.strokeWidth>0&&r.strokeColor!=="";let c,d;for(s.save(),s.font=n.string,Mu(s,r),c=0;c<o.length;++c)d=o[c],r.backdrop&&Ou(s,r.backdrop),l&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),F(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(d,t,i,r.maxWidth)),s.fillText(d,t,i,r.maxWidth),Au(s,t,i,d,r),i+=Number(n.lineHeight);s.restore()}function As(s,e){const{x:t,y:i,w:n,h:r,radius:o}=e;s.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*W,W,!0),s.lineTo(t,i+r-o.bottomLeft),s.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,W,Q,!0),s.lineTo(t+n-o.bottomRight,i+r),s.arc(t+n-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Q,0,!0),s.lineTo(t+n,i+o.topRight),s.arc(t+n-o.topRight,i+o.topRight,o.topRight,0,-Q,!0),s.lineTo(t+o.topLeft,i)}const zu=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Du=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ru(s,e){const t=(""+s).match(zu);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const Tu=s=>+s||0;function zn(s,e){const t={},i=B(e),n=i?Object.keys(e):e,r=B(s)?i?o=>I(s[o],s[e[o]]):o=>s[o]:()=>s;for(const o of n)t[o]=Tu(r(o));return t}function Ro(s){return zn(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Ct(s){return zn(s,["topLeft","topRight","bottomLeft","bottomRight"])}function oe(s){const e=Ro(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ee(s,e){s=s||{},e=e||q.font;let t=I(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=I(s.style,e.style);i&&!(""+i).match(Du)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:I(s.family,e.family),lineHeight:Ru(I(s.lineHeight,e.lineHeight),t),size:t,style:i,weight:I(s.weight,e.weight),string:""};return n.string=wu(n),n}function us(s,e,t,i){let n,r,o;for(n=0,r=s.length;n<r;++n)if(o=s[n],o!==void 0&&o!==void 0)return o}function Eu(s,e,t){const{min:i,max:n}=s,r=_o(e,(n-i)/2),o=(l,c)=>t&&l===0?0:l+c;return{min:o(i,-Math.abs(r)),max:o(n,r)}}function pt(s,e){return Object.assign(Object.create(s),e)}function Dn(s,e=[""],t,i,n=()=>s[0]){const r=t||s;typeof i>"u"&&(i=Io("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:i,_getTarget:n,override:l=>Dn([l,...s],e,r,i)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete s[0][c],!0},get(l,c){return Eo(l,c,()=>Hu(c,e,s,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(l,c){return za(l).includes(c)},ownKeys(l){return za(l)},set(l,c,d){const h=l._storage||(l._storage=n());return l[c]=h[c]=d,delete l._keys,!0}})}function Zt(s,e,t,i){const n={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:To(s,i),setContext:r=>Zt(s,r,t,i),override:r=>Zt(s.override(r),e,t,i)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete s[o],!0},get(r,o,l){return Eo(r,o,()=>Iu(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(r,o,l){return s[o]=l,delete r[o],!0}})}function To(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=s;return{allKeys:n,scriptable:t,indexable:i,isScriptable:ft(t)?t:()=>t,isIndexable:ft(i)?i:()=>i}}const Lu=(s,e)=>s?s+Cn(e):e,Rn=(s,e)=>B(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Eo(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const i=t();return s[e]=i,i}function Iu(s,e,t){const{_proxy:i,_context:n,_subProxy:r,_descriptors:o}=s;let l=i[e];return ft(l)&&o.isScriptable(e)&&(l=Fu(e,l,s,t)),G(l)&&l.length&&(l=Bu(e,l,s,o.isIndexable)),Rn(e,l)&&(l=Zt(l,n,r&&r[e],o)),l}function Fu(s,e,t,i){const{_proxy:n,_context:r,_subProxy:o,_stack:l}=t;if(l.has(s))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+s);l.add(s);let c=e(r,o||i);return l.delete(s),Rn(s,c)&&(c=Tn(n._scopes,n,s,c)),c}function Bu(s,e,t,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:l}=t;if(typeof r.index<"u"&&i(s))return e[r.index%e.length];if(B(e[0])){const c=e,d=n._scopes.filter(h=>h!==c);e=[];for(const h of c){const u=Tn(d,n,s,h);e.push(Zt(u,r,o&&o[s],l))}}return e}function Lo(s,e,t){return ft(s)?s(e,t):s}const $u=(s,e)=>s===!0?e:typeof s=="string"?ut(e,s):void 0;function Vu(s,e,t,i,n){for(const r of e){const o=$u(t,r);if(o){s.add(o);const l=Lo(o._fallback,t,n);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Tn(s,e,t,i){const n=e._rootScopes,r=Lo(e._fallback,t,i),o=[...s,...n],l=new Set;l.add(i);let c=Oa(l,o,t,r||t,i);return c===null||typeof r<"u"&&r!==t&&(c=Oa(l,o,r,c,i),c===null)?!1:Dn(Array.from(l),[""],n,r,()=>Wu(e,t,i))}function Oa(s,e,t,i,n){for(;t;)t=Vu(s,e,t,i,n);return t}function Wu(s,e,t){const i=s._getTarget();e in i||(i[e]={});const n=i[e];return G(n)&&B(t)?t:n||{}}function Hu(s,e,t,i){let n;for(const r of e)if(n=Io(Lu(r,s),t),typeof n<"u")return Rn(s,n)?Tn(t,i,s,n):n}function Io(s,e){for(const t of e){if(!t)continue;const i=t[s];if(typeof i<"u")return i}}function za(s){let e=s._keys;return e||(e=s._keys=Ku(s._scopes)),e}function Ku(s){const e=new Set;for(const t of s)for(const i of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}function Fo(s,e,t,i){const{iScale:n}=s,{key:r="r"}=this._parsing,o=new Array(i);let l,c,d,h;for(l=0,c=i;l<c;++l)d=l+t,h=e[d],o[l]={r:n.parse(ut(h,r),d)};return o}const Yu=Number.EPSILON||1e-14,Jt=(s,e)=>e<s.length&&!s[e].skip&&s[e],Bo=s=>s==="x"?"y":"x";function Uu(s,e,t,i){const n=s.skip?e:s,r=e,o=t.skip?e:t,l=nn(r,n),c=nn(o,r);let d=l/(l+c),h=c/(l+c);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const u=i*d,f=i*h;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+f*(o.x-n.x),y:r.y+f*(o.y-n.y)}}}function Xu(s,e,t){const i=s.length;let n,r,o,l,c,d=Jt(s,0);for(let h=0;h<i-1;++h)if(c=d,d=Jt(s,h+1),!(!c||!d)){if(bs(e[h],0,Yu)){t[h]=t[h+1]=0;continue}n=t[h]/e[h],r=t[h+1]/e[h],l=Math.pow(n,2)+Math.pow(r,2),!(l<=9)&&(o=3/Math.sqrt(l),t[h]=n*o*e[h],t[h+1]=r*o*e[h])}}function Gu(s,e,t="x"){const i=Bo(t),n=s.length;let r,o,l,c=Jt(s,0);for(let d=0;d<n;++d){if(o=l,l=c,c=Jt(s,d+1),!l)continue;const h=l[t],u=l[i];o&&(r=(h-o[t])/3,l[`cp1${t}`]=h-r,l[`cp1${i}`]=u-r*e[d]),c&&(r=(c[t]-h)/3,l[`cp2${t}`]=h+r,l[`cp2${i}`]=u+r*e[d])}}function qu(s,e="x"){const t=Bo(e),i=s.length,n=Array(i).fill(0),r=Array(i);let o,l,c,d=Jt(s,0);for(o=0;o<i;++o)if(l=c,c=d,d=Jt(s,o+1),!!c){if(d){const h=d[e]-c[e];n[o]=h!==0?(d[t]-c[t])/h:0}r[o]=l?d?Ve(n[o-1])!==Ve(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Xu(s,n,r),Gu(s,r,e)}function Hs(s,e,t){return Math.max(Math.min(s,t),e)}function Zu(s,e){let t,i,n,r,o,l=et(s[0],e);for(t=0,i=s.length;t<i;++t)o=r,r=l,l=t<i-1&&et(s[t+1],e),r&&(n=s[t],o&&(n.cp1x=Hs(n.cp1x,e.left,e.right),n.cp1y=Hs(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=Hs(n.cp2x,e.left,e.right),n.cp2y=Hs(n.cp2y,e.top,e.bottom)))}function Ju(s,e,t,i,n){let r,o,l,c;if(e.spanGaps&&(s=s.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")qu(s,n);else{let d=i?s[s.length-1]:s[0];for(r=0,o=s.length;r<o;++r)l=s[r],c=Uu(d,l,s[Math.min(r+1,o-(i?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&Zu(s,t)}function En(){return typeof window<"u"&&typeof document<"u"}function Ln(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ci(s,e,t){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=s,i}const wi=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Qu(s,e){return wi(s).getPropertyValue(e)}const ef=["top","right","bottom","left"];function Pt(s,e,t){const i={};t=t?"-"+t:"";for(let n=0;n<4;n++){const r=ef[n];i[r]=parseFloat(s[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tf=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function sf(s,e){const t=s.touches,i=t&&t.length?t[0]:s,{offsetX:n,offsetY:r}=i;let o=!1,l,c;if(tf(n,r,s.target))l=n,c=r;else{const d=e.getBoundingClientRect();l=i.clientX-d.left,c=i.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Nt(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:i}=e,n=wi(t),r=n.boxSizing==="border-box",o=Pt(n,"padding"),l=Pt(n,"border","width"),{x:c,y:d,box:h}=sf(s,t),u=o.left+(h&&l.left),f=o.top+(h&&l.top);let{width:m,height:p}=e;return r&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-u)/m*t.width/i),y:Math.round((d-f)/p*t.height/i)}}function nf(s,e,t){let i,n;if(e===void 0||t===void 0){const r=s&&Ln(s);if(!r)e=s.clientWidth,t=s.clientHeight;else{const o=r.getBoundingClientRect(),l=wi(r),c=Pt(l,"border","width"),d=Pt(l,"padding");e=o.width-d.width-c.width,t=o.height-d.height-c.height,i=ci(l.maxWidth,r,"clientWidth"),n=ci(l.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||oi,maxHeight:n||oi}}const ot=s=>Math.round(s*10)/10;function af(s,e,t,i){const n=wi(s),r=Pt(n,"margin"),o=ci(n.maxWidth,s,"clientWidth")||oi,l=ci(n.maxHeight,s,"clientHeight")||oi,c=nf(s,e,t);let{width:d,height:h}=c;if(n.boxSizing==="content-box"){const f=Pt(n,"border","width"),m=Pt(n,"padding");d-=m.width+f.width,h-=m.height+f.height}return d=Math.max(0,d-r.width),h=Math.max(0,i?d/i:h-r.height),d=ot(Math.min(d,o,c.maxWidth)),h=ot(Math.min(h,l,c.maxHeight)),d&&!h&&(h=ot(d/2)),(e!==void 0||t!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,d=ot(Math.floor(h*i))),{width:d,height:h}}function Da(s,e,t){const i=e||1,n=ot(s.height*i),r=ot(s.width*i);s.height=ot(s.height),s.width=ot(s.width);const o=s.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||o.height!==n||o.width!==r?(s.currentDevicePixelRatio=i,o.height=n,o.width=r,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const rf=(function(){let s=!1;try{const e={get passive(){return s=!0,!1}};En()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s})();function Ra(s,e){const t=Qu(s,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function wt(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function of(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:i==="middle"?t<.5?s.y:e.y:i==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function lf(s,e,t,i){const n={x:s.cp2x,y:s.cp2y},r={x:e.cp1x,y:e.cp1y},o=wt(s,n,t),l=wt(n,r,t),c=wt(r,e,t),d=wt(o,l,t),h=wt(l,c,t);return wt(d,h,t)}const cf=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},df=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function Xt(s,e,t){return s?cf(e,t):df()}function $o(s,e){let t,i;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=i)}function Vo(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function Wo(s){return s==="angle"?{between:Ms,compare:du,normalize:ae}:{between:Je,compare:(e,t)=>e-t,normalize:e=>e}}function Ta({start:s,end:e,count:t,loop:i,style:n}){return{start:s%t,end:e%t,loop:i&&(e-s+1)%t===0,style:n}}function hf(s,e,t){const{property:i,start:n,end:r}=t,{between:o,normalize:l}=Wo(i),c=e.length;let{start:d,end:h,loop:u}=s,f,m;if(u){for(d+=c,h+=c,f=0,m=c;f<m&&o(l(e[d%c][i]),n,r);++f)d--,h--;d%=c,h%=c}return h<d&&(h+=c),{start:d,end:h,loop:u,style:s.style}}function Ho(s,e,t){if(!t)return[s];const{property:i,start:n,end:r}=t,o=e.length,{compare:l,between:c,normalize:d}=Wo(i),{start:h,end:u,loop:f,style:m}=hf(s,e,t),p=[];let x=!1,b=null,j,v,S;const _=()=>c(n,S,j)&&l(n,S)!==0,k=()=>l(r,j)===0||c(r,S,j),C=()=>x||_(),M=()=>!x||k();for(let N=h,z=h;N<=u;++N)v=e[N%o],!v.skip&&(j=d(v[i]),j!==S&&(x=c(j,n,r),b===null&&C()&&(b=l(j,n)===0?N:z),b!==null&&M()&&(p.push(Ta({start:b,end:N,loop:f,count:o,style:m})),b=null),z=N,S=j));return b!==null&&p.push(Ta({start:b,end:u,loop:f,count:o,style:m})),p}function Ko(s,e){const t=[],i=s.segments;for(let n=0;n<i.length;n++){const r=Ho(i[n],s.points,e);r.length&&t.push(...r)}return t}function uf(s,e,t,i){let n=0,r=e-1;if(t&&!i)for(;n<e&&!s[n].skip;)n++;for(;n<e&&s[n].skip;)n++;for(n%=e,t&&(r+=n);r>n&&s[r%e].skip;)r--;return r%=e,{start:n,end:r}}function ff(s,e,t,i){const n=s.length,r=[];let o=e,l=s[e],c;for(c=e+1;c<=t;++c){const d=s[c%n];d.skip||d.stop?l.skip||(i=!1,r.push({start:e%n,end:(c-1)%n,loop:i}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&r.push({start:e%n,end:o%n,loop:i}),r}function mf(s,e){const t=s.points,i=s.options.spanGaps,n=t.length;if(!n)return[];const r=!!s._loop,{start:o,end:l}=uf(t,n,r,i);if(i===!0)return Ea(s,[{start:o,end:l,loop:r}],t,e);const c=l<o?l+n:l,d=!!s._fullLoop&&o===0&&l===n-1;return Ea(s,ff(t,o,c,d),t,e)}function Ea(s,e,t,i){return!i||!i.setContext||!t?e:pf(s,e,t,i)}function pf(s,e,t,i){const n=s._chart.getContext(),r=La(s.options),{_datasetIndex:o,options:{spanGaps:l}}=s,c=t.length,d=[];let h=r,u=e[0].start,f=u;function m(p,x,b,j){const v=l?-1:1;if(p!==x){for(p+=c;t[p%c].skip;)p-=v;for(;t[x%c].skip;)x+=v;p%c!==x%c&&(d.push({start:p%c,end:x%c,loop:b,style:j}),h=j,u=x%c)}}for(const p of e){u=l?u:p.start;let x=t[u%c],b;for(f=u+1;f<=p.end;f++){const j=t[f%c];b=La(i.setContext(pt(n,{type:"segment",p0:x,p1:j,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),gf(b,h)&&m(u,f-1,p.loop,h),x=j,h=b}u<f-1&&m(u,f-1,p.loop,h)}return d}function La(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function gf(s,e){if(!e)return!1;const t=[],i=function(n,r){return On(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(s,i)!==JSON.stringify(e,i)}function Ks(s,e,t){return s.options.clip?s[t]:e[t]}function xf(s,e){const{xScale:t,yScale:i}=s;return t&&i?{left:Ks(t,e,"left"),right:Ks(t,e,"right"),top:Ks(i,e,"top"),bottom:Ks(i,e,"bottom")}:e}function Yo(s,e){const t=e._clip;if(t.disabled)return!1;const i=xf(e,s.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:i.bottom+(t.bottom===!0?0:t.bottom)}}class bf{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const r=t.listeners[n],o=t.duration;r.forEach(l=>l({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Po.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,l=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(r[o]=r[r.length-1],r.pop());l&&(n.draw(),this._notify(n,i,e,"progress")),r.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xe=new bf;const Ia="transparent",vf={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const i=Pa(s||Ia),n=i.valid&&Pa(e||Ia);return n&&n.valid?n.mix(i,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class yf{constructor(e,t,i,n){const r=t[i];n=us([e.to,n,r,e.from]);const o=us([e.from,r,n]);this._active=!0,this._fn=e.fn||vf[e.type||typeof o],this._easing=vs[e.easing]||vs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=us([e.to,t,n,e.from]),this._from=us([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,l=this._to;let c;if(this._active=r!==l&&(o||t<i),!this._active){this._target[n]=l,this._notify(!0);return}if(t<0){this._target[n]=r;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(r,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][t]()}}class Uo{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!B(e))return;const t=Object.keys(q.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!B(r))return;const o={};for(const l of t)o[l]=r[l];(G(r.properties)&&r.properties||[n]).forEach(l=>{(l===n||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,t){const i=t.options,n=_f(e,i);if(!n)return[];const r=this._createAnimations(n,i);return i.$shared&&jf(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,n=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,t));continue}const h=t[d];let u=r[d];const f=i.get(d);if(u)if(f&&u.active()){u.update(f,h,l);continue}else u.cancel();if(!f||!f.duration){e[d]=h;continue}r[d]=u=new yf(f,e,d,h),n.push(u)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Xe.add(this._chart,i),!0}}function jf(s,e){const t=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const r=s[i[n]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function _f(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Fa(s,e){const t=s&&s.options||{},i=t.reverse,n=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:n,end:i?n:r}}function kf(s,e,t){if(t===!1)return!1;const i=Fa(s,t),n=Fa(e,t);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function Nf(s){let e,t,i,n;return B(s)?(e=s.top,t=s.right,i=s.bottom,n=s.left):e=t=i=n=s,{top:e,right:t,bottom:i,left:n,disabled:s===!1}}function Xo(s,e){const t=[],i=s._getSortedDatasetMetas(e);let n,r;for(n=0,r=i.length;n<r;++n)t.push(i[n].index);return t}function Ba(s,e,t,i={}){const n=s.keys,r=i.mode==="single";let o,l,c,d;if(e===null)return;let h=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===t){if(h=!0,i.all)continue;break}d=s.values[c],J(d)&&(r||e===0||Ve(e)===Ve(d))&&(e+=d)}return!h&&!i.all?0:e}function wf(s,e){const{iScale:t,vScale:i}=e,n=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(s),l=new Array(o.length);let c,d,h;for(c=0,d=o.length;c<d;++c)h=o[c],l[c]={[n]:h,[r]:s[h]};return l}function $i(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function Sf(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function Cf(s){const{min:e,max:t,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function Pf(s,e,t){const i=s[e]||(s[e]={});return i[t]||(i[t]={})}function $a(s,e,t,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const r=s[n.index];if(t&&r>0||!t&&r<0)return n.index}return null}function Va(s,e){const{chart:t,_cachedMeta:i}=s,n=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:l}=i,c=r.axis,d=o.axis,h=Sf(r,o,i),u=e.length;let f;for(let m=0;m<u;++m){const p=e[m],{[c]:x,[d]:b}=p,j=p._stacks||(p._stacks={});f=j[d]=Pf(n,h,x),f[l]=b,f._top=$a(f,o,!0,i.type),f._bottom=$a(f,o,!1,i.type);const v=f._visualValues||(f._visualValues={});v[l]=b}}function Vi(s,e){const t=s.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Mf(s,e){return pt(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Af(s,e,t){return pt(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function as(s,e){const t=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){e=e||s._parsed;for(const n of e){const r=n._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const Wi=s=>s==="reset"||s==="none",Wa=(s,e)=>e?s:Object.assign({},s),Of=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:Xo(t,!0),values:null};class gt{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=$i(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&as(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(u,f,m,p)=>u==="x"?f:u==="r"?p:m,r=t.xAxisID=I(i.xAxisID,Vi(e,"x")),o=t.yAxisID=I(i.yAxisID,Vi(e,"y")),l=t.rAxisID=I(i.rAxisID,Vi(e,"r")),c=t.indexAxis,d=t.iAxisID=n(c,r,o,l),h=t.vAxisID=n(c,o,r,l);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&wa(this._data,this),e._stacked&&as(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(B(t)){const n=this._cachedMeta;this._data=wf(t,n)}else if(i!==t){if(i){wa(i,this);const n=this._cachedMeta;as(n),n._parsed=[]}t&&Object.isExtensible(t)&&mu(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const r=t._stacked;t._stacked=$i(t.vScale,t),t.stack!==i.stack&&(n=!0,as(t),t.stack=i.stack),this._resyncElements(e),(n||r!==t._stacked)&&(Va(this,t._parsed),t._stacked=$i(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:r,_stacked:o}=i,l=r.axis;let c=e===0&&t===n.length?!0:i._sorted,d=e>0&&i._parsed[e-1],h,u,f;if(this._parsing===!1)i._parsed=n,i._sorted=!0,f=n;else{G(n[e])?f=this.parseArrayData(i,n,e,t):B(n[e])?f=this.parseObjectData(i,n,e,t):f=this.parsePrimitiveData(i,n,e,t);const m=()=>u[l]===null||d&&u[l]<d[l];for(h=0;h<t;++h)i._parsed[h+e]=u=f[h],c&&(m()&&(c=!1),d=u);i._sorted=c}o&&Va(this,f)}parsePrimitiveData(e,t,i,n){const{iScale:r,vScale:o}=e,l=r.axis,c=o.axis,d=r.getLabels(),h=r===o,u=new Array(n);let f,m,p;for(f=0,m=n;f<m;++f)p=f+i,u[f]={[l]:h||r.parse(d[p],p),[c]:o.parse(t[p],p)};return u}parseArrayData(e,t,i,n){const{xScale:r,yScale:o}=e,l=new Array(n);let c,d,h,u;for(c=0,d=n;c<d;++c)h=c+i,u=t[h],l[c]={x:r.parse(u[0],h),y:o.parse(u[1],h)};return l}parseObjectData(e,t,i,n){const{xScale:r,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let h,u,f,m;for(h=0,u=n;h<u;++h)f=h+i,m=t[f],d[h]={x:r.parse(ut(m,l),f),y:o.parse(ut(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,r=this._cachedMeta,o=t[e.axis],l={keys:Xo(n,!0),values:t._stacks[e.axis]._visualValues};return Ba(l,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const r=i[t.axis];let o=r===null?NaN:r;const l=n&&i._stacks[t.axis];n&&l&&(n.values=l,o=Ba(n,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,r=i._sorted&&e===i.iScale,o=n.length,l=this._getOtherScale(e),c=Of(t,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=Cf(l);let f,m;function p(){m=n[f];const x=m[l.axis];return!J(m[e.axis])||h>x||u<x}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,r,o;for(n=0,r=t.length;n<r;++n)o=t[n][e.axis],J(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Nf(I(this.options.clip,kf(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],r=t.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,r,l,c),h=l;h<l+c;++h){const u=n[h];u.hidden||(u.active&&d?o.push(u):u.draw(e,r))}for(h=0;h<o.length;++h)o[h].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=Af(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=n.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Mf(this.chart.getContext(),this.index)),r.dataset=n,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n=t==="active",r=this._cachedDataOpts,o=e+"-"+t,l=r[o],c=this.enableOptionSharing&&Ps(i);if(l)return Wa(l,c);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),u=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),h),m=Object.keys(q.elements[e]),p=()=>this.getContext(i,n,t),x=d.resolveNamedOptions(f,m,p,u);return x.$shared&&(x.$shared=c,r[o]=Object.freeze(Wa(x,c))),x}_resolveAnimations(e,t,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,l=r[o];if(l)return l;let c;if(n.options.animation!==!1){const h=this.chart.config,u=h.datasetAnimationScopeKeys(this._type,t),f=h.getOptionScopes(this.getDataset(),u);c=h.createResolver(f,this.getContext(e,i,t))}const d=new Uo(n,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Wi(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==n;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,n){Wi(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!Wi(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const r=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=i.length,r=t.length,o=Math.min(r,n);o&&this.parse(0,o),r>n?this._insertElements(n,r-n,e):r<n&&this._removeElements(r,n-r)}_insertElements(e,t,i=!0){const n=this._cachedMeta,r=n.data,o=e+t;let l;const c=d=>{for(d.length+=t,l=d.length-1;l>=o;l--)d[l]=d[l-t]};for(c(r),l=e;l<o;++l)r[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&as(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function zf(s,e){if(!s._cache.$bar){const t=s.getMatchingVisibleMetas(e);let i=[];for(let n=0,r=t.length;n<r;n++)i=i.concat(t[n].controller.getAllParsedValues(s));s._cache.$bar=Co(i.sort((n,r)=>n-r))}return s._cache.$bar}function Df(s){const e=s.iScale,t=zf(e,s.type);let i=e._length,n,r,o,l;const c=()=>{o===32767||o===-32768||(Ps(l)&&(i=Math.min(i,Math.abs(o-l)||i)),l=o)};for(n=0,r=t.length;n<r;++n)o=e.getPixelForValue(t[n]),c();for(l=void 0,n=0,r=e.ticks.length;n<r;++n)o=e.getPixelForTick(n),c();return i}function Rf(s,e,t,i){const n=t.barThickness;let r,o;return F(n)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=n*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[s]-r/2}}function Tf(s,e,t,i){const n=e.pixels,r=n[s];let o=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null;const c=t.categoryPercentage;o===null&&(o=r-(l===null?e.end-e.start:l-r)),l===null&&(l=r+r-o);const d=r-(r-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/i,ratio:t.barPercentage,start:d}}function Ef(s,e,t,i){const n=t.parse(s[0],i),r=t.parse(s[1],i),o=Math.min(n,r),l=Math.max(n,r);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[t.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:r,min:o,max:l}}function Go(s,e,t,i){return G(s)?Ef(s,e,t,i):e[t.axis]=t.parse(s,i),e}function Ha(s,e,t,i){const n=s.iScale,r=s.vScale,o=n.getLabels(),l=n===r,c=[];let d,h,u,f;for(d=t,h=t+i;d<h;++d)f=e[d],u={},u[n.axis]=l||n.parse(o[d],d),c.push(Go(f,u,r,d));return c}function Hi(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function Lf(s,e,t){return s!==0?Ve(s):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function If(s){let e,t,i,n,r;return s.horizontal?(e=s.base>s.x,t="left",i="right"):(e=s.base<s.y,t="bottom",i="top"),e?(n="end",r="start"):(n="start",r="end"),{start:t,end:i,reverse:e,top:n,bottom:r}}function Ff(s,e,t,i){let n=e.borderSkipped;const r={};if(!n){s.borderSkipped=r;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:h}=If(s);n==="middle"&&t&&(s.enableBorderRadius=!0,(t._top||0)===i?n=d:(t._bottom||0)===i?n=h:(r[Ka(h,o,l,c)]=!0,n=d)),r[Ka(n,o,l,c)]=!0,s.borderSkipped=r}function Ka(s,e,t,i){return i?(s=Bf(s,e,t),s=Ya(s,t,e)):s=Ya(s,e,t),s}function Bf(s,e,t){return s===e?t:s===t?e:s}function Ya(s,e,t){return s==="start"?e:s==="end"?t:s}function $f(s,{inflateAmount:e},t){s.inflateAmount=e==="auto"?t===1?.33:0:e}class Vf extends gt{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,n){return Ha(e,t,i,n)}parseArrayData(e,t,i,n){return Ha(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:r,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?l:c,h=o.axis==="x"?l:c,u=[];let f,m,p,x;for(f=i,m=i+n;f<m;++f)x=t[f],p={},p[r.axis]=r.parse(ut(x,d),f),u.push(Go(ut(x,h),p,o,f));return u}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,r=this.getParsed(e),o=r._custom,l=Hi(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,n){const r=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:u,includeOptions:f}=this._getSharedOptions(t,n);for(let m=t;m<t+i;m++){const p=this.getParsed(m),x=r||F(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,h),j=(p._stacks||{})[l.axis],v={horizontal:d,base:x.base,enableBorderRadius:!j||Hi(p._custom)||o===j._top||o===j._bottom,x:d?x.head:b.center,y:d?b.center:x.head,height:d?b.size:Math.abs(x.size),width:d?Math.abs(x.size):b.size};f&&(v.options=u||this.resolveDataElementOptions(m,e[m].active?"active":n));const S=v.options||e[m].options;Ff(v,S,j,o),$f(v,S,h.ratio),this.updateElement(e[m],m,v,n)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[i.axis],d=h=>{const u=h._parsed.find(m=>m[i.axis]===c),f=u&&u[h.vScale.axis];if(F(f)||isNaN(f))return!0};for(const h of n)if(!(t!==void 0&&d(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[I(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const n=this._getStacks(e,i),r=t!==void 0?n.indexOf(t):-1;return r===-1?n.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let r,o;for(r=0,o=t.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const l=e.barThickness;return{min:l||Df(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:n},options:{base:r,minBarLength:o}}=this,l=r||0,c=this.getParsed(e),d=c._custom,h=Hi(d);let u=c[t.axis],f=0,m=i?this.applyStack(t,c,i):u,p,x;m!==u&&(f=m-u,m=u),h&&(u=d.barStart,m=d.barEnd-d.barStart,u!==0&&Ve(u)!==Ve(d.barEnd)&&(f=0),f+=u);const b=!F(r)&&!h?r:f;let j=t.getPixelForValue(b);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(f+m):p=j,x=p-j,Math.abs(x)<o){x=Lf(x,t,l)*o,u===l&&(j-=x/2);const v=t.getPixelForDecimal(0),S=t.getPixelForDecimal(1),_=Math.min(v,S),k=Math.max(v,S);j=Math.max(Math.min(j,k),_),p=j+x,i&&!h&&(c._stacks[t.axis]._visualValues[n]=t.getValueForPixel(p)-t.getValueForPixel(j))}if(j===t.getPixelForValue(l)){const v=Ve(x)*t.getLineWidthForValue(l)/2;j+=v,x-=v}return{size:x,base:j,head:p,center:p+x/2}}_calculateBarIndexPixels(e,t){const i=t.scale,n=this.options,r=n.skipNull,o=I(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(t.grouped){const h=r?this._getStackCount(e):t.stackCount,u=n.barThickness==="flex"?Tf(e,t,n,h*d):Rf(e,t,n,h*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(I(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+m;l=u.start+u.chunk*p+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else l=i.getPixelForValue(this.getParsed(e)[i.axis],e),c=Math.min(o,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let r=0;for(;r<n;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}class Wf extends gt{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,n){const r=super.parsePrimitiveData(e,t,i,n);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,n){const r=super.parseArrayData(e,t,i,n);for(let o=0;o<r.length;o++){const l=t[i+o];r[o]._custom=I(l[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,n){const r=super.parseObjectData(e,t,i,n);for(let o=0;o<r.length;o++){const l=t[i+o];r[o]._custom=I(l&&l.r&&+l.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),l=n.getLabelForValue(o.x),c=r.getLabelForValue(o.y),d=o._custom;return{label:i[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),h=o.axis,u=l.axis;for(let f=t;f<t+i;f++){const m=e[f],p=!r&&this.getParsed(f),x={},b=x[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[h]),j=x[u]=r?l.getBasePixel():l.getPixelForValue(p[u]);x.skip=isNaN(b)||isNaN(j),d&&(x.options=c||this.resolveDataElementOptions(f,m.active?"active":n),r&&(x.options.radius=0)),this.updateElement(m,f,x,n)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let n=super.resolveDataElementOptions(e,t);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const r=n.radius;return t!=="active"&&(n.radius=0),n.radius+=I(i&&i._custom,r),n}}function Hf(s,e,t){let i=1,n=1,r=0,o=0;if(e<X){const l=s,c=l+e,d=Math.cos(l),h=Math.sin(l),u=Math.cos(c),f=Math.sin(c),m=(S,_,k)=>Ms(S,l,c,!0)?1:Math.max(_,_*t,k,k*t),p=(S,_,k)=>Ms(S,l,c,!0)?-1:Math.min(_,_*t,k,k*t),x=m(0,d,u),b=m(Q,h,f),j=p(W,d,u),v=p(W+Q,h,f);i=(x-j)/2,n=(b-v)/2,r=-(x+j)/2,o=-(b+v)/2}return{ratioX:i,ratioY:n,offsetX:r,offsetY:o}}class In extends gt{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:l}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((c,d)=>{const u=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:u.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(d),lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:u.borderWidth,strokeStyle:u.borderColor,textAlign:n,pointStyle:i,borderRadius:o&&(l||u.borderRadius),index:d}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let r=c=>+i[c];if(B(i[e])){const{key:c="value"}=this._parsing;r=d=>+ut(i[d],c)}let o,l;for(o=e,l=e+t;o<l;++o)n._parsed[o]=r(o)}}_getRotation(){return De(this.options.rotation-90)}_getCircumference(){return De(this.options.circumference)}_getRotationExtents(){let e=X,t=-X;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,r=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min(Qh(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:x}=Hf(u,h,c),b=(i.width-o)/f,j=(i.height-o)/m,v=Math.max(Math.min(b,j)/2,0),S=_o(this.options.radius,v),_=Math.max(S*c,0),k=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=x*S,n.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*r/X)}updateElements(e,t,i,n){const r=n==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,h=(l.left+l.right)/2,u=(l.top+l.bottom)/2,f=r&&d.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:x,includeOptions:b}=this._getSharedOptions(t,n);let j=this._getRotation(),v;for(v=0;v<t;++v)j+=this._circumference(v,r);for(v=t;v<t+i;++v){const S=this._circumference(v,r),_=e[v],k={x:h+this.offsetX,y:u+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:p,innerRadius:m};b&&(k.options=x||this.resolveDataElementOptions(v,_.active?"active":n)),j+=S,this.updateElement(_,v,k,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,n;for(n=0;n<t.length;n++){const r=e._parsed[n];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?X*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Ts(t._parsed[e],i.options.locale);return{label:n[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,r,o,l,c;if(!e){for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),e=o.data,l=o.controller;break}}if(!e)return 0;for(n=0,r=e.length;n<r;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(I(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Kf extends gt{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:n=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:l,count:c}=Ao(t,n,o);this._drawStart=l,this._drawCount=c,Oo(t)&&(l=0,c=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:d},e),this.updateElements(n,l,c,e)}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(t,n),f=o.axis,m=l.axis,{spanGaps:p,segment:x}=this.options,b=qt(p)?p:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||r||n==="none",v=t+i,S=e.length;let _=t>0&&this.getParsed(t-1);for(let k=0;k<S;++k){const C=e[k],M=j?C:{};if(k<t||k>=v){M.skip=!0;continue}const N=this.getParsed(k),z=F(N[m]),w=M[f]=o.getPixelForValue(N[f],k),g=M[m]=r||z?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[m],k);M.skip=isNaN(w)||isNaN(g)||z,M.stop=k>0&&Math.abs(N[f]-_[f])>b,x&&(M.parsed=N,M.raw=d.data[k]),u&&(M.options=h||this.resolveDataElementOptions(k,C.active?"active":n)),j||this.updateElement(C,k,M,n),_=N}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class qo extends gt{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((r,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],r=Ts(t._parsed[e].r,i.options.locale);return{label:n[e]||"",value:r}}parseObjectData(e,t,i,n){return Fo.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,n=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(n/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),l=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,t,i,n){const r=n==="reset",o=this.chart,c=o.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,u=d.yCenter,f=d.getIndexAngle(0)-.5*W;let m=f,p;const x=360/this.countVisibleElements();for(p=0;p<t;++p)m+=this._computeAngle(p,n,x);for(p=t;p<t+i;p++){const b=e[p];let j=m,v=m+this._computeAngle(p,n,x),S=o.getDataVisibility(p)?d.getDistanceFromCenterForValue(this.getParsed(p).r):0;m=v,r&&(c.animateScale&&(S=0),c.animateRotate&&(j=v=f));const _={x:h,y:u,innerRadius:0,outerRadius:S,startAngle:j,endAngle:v,options:this.resolveDataElementOptions(p,b.active?"active":n)};this.updateElement(b,p,_,n)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?De(this.resolveDataElementOptions(e,t).angle||i):0}}class Yf extends In{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Uf extends gt{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,n){return Fo.bind(this)(e,t,i,n)}update(e){const t=this._cachedMeta,i=t.dataset,n=t.data||[],r=t.iScale.getLabels();if(i.points=n,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const l={_loop:!0,_fullLoop:r.length===n.length,options:o};this.updateElement(i,void 0,l,e)}this.updateElements(n,0,n.length,e)}updateElements(e,t,i,n){const r=this._cachedMeta.rScale,o=n==="reset";for(let l=t;l<t+i;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":n),h=r.getPointPositionForValue(l,this.getParsed(l).r),u=o?r.xCenter:h.x,f=o?r.yCenter:h.y,m={x:u,y:f,angle:h.angle,skip:isNaN(u)||isNaN(f),options:d};this.updateElement(c,l,m,n)}}}class Xf extends gt{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=t,o=this.getParsed(e),l=n.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+l+", "+c+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,n=this.chart._animationsDisabled;let{start:r,count:o}=Ao(t,i,n);if(this._drawStart=r,this._drawCount=o,Oo(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=t;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!n,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,n){const r=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(t,n),u=this.getSharedOptions(h),f=this.includeOptions(n,u),m=o.axis,p=l.axis,{spanGaps:x,segment:b}=this.options,j=qt(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||n==="none";let S=t>0&&this.getParsed(t-1);for(let _=t;_<t+i;++_){const k=e[_],C=this.getParsed(_),M=v?k:{},N=F(C[p]),z=M[m]=o.getPixelForValue(C[m],_),w=M[p]=r||N?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[p],_);M.skip=isNaN(z)||isNaN(w)||N,M.stop=_>0&&Math.abs(C[m]-S[m])>j,b&&(M.parsed=C,M.raw=d.data[_]),f&&(M.options=u||this.resolveDataElementOptions(_,k.active?"active":n)),v||this.updateElement(k,_,M,n),S=C}this.updateSharedOptions(u,n,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let l=0;for(let c=t.length-1;c>=0;--c)l=Math.max(l,t[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const i=e.dataset,n=i.options&&i.options.borderWidth||0;if(!t.length)return n;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(n,r,o)/2}}var Gf=Object.freeze({__proto__:null,BarController:Vf,BubbleController:Wf,DoughnutController:In,LineController:Kf,PieController:Yf,PolarAreaController:qo,RadarController:Uf,ScatterController:Xf});function yt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fn{static override(e){Object.assign(Fn.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return yt()}parse(){return yt()}format(){return yt()}add(){return yt()}diff(){return yt()}startOf(){return yt()}endOf(){return yt()}}var qf={_date:Fn};function Zf(s,e,t,i){const{controller:n,data:r,_sorted:o}=s,l=n._cachedMeta.iScale,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&r.length){const d=l._reversePixels?uu:Qe;if(i){if(n._sharedOptions){const h=r[0],u=typeof h.getRange=="function"&&h.getRange(e);if(u){const f=d(r,e,t-u),m=d(r,e,t+u);return{lo:f.lo,hi:m.hi}}}}else{const h=d(r,e,t);if(c){const{vScale:u}=n._cachedMeta,{_parsed:f}=s,m=f.slice(0,h.lo+1).reverse().findIndex(x=>!F(x[u.axis]));h.lo-=Math.max(0,m);const p=f.slice(h.hi).findIndex(x=>!F(x[u.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:r.length-1}}function Si(s,e,t,i,n){const r=s.getSortedVisibleDatasetMetas(),o=t[e];for(let l=0,c=r.length;l<c;++l){const{index:d,data:h}=r[l],{lo:u,hi:f}=Zf(r[l],e,o,n);for(let m=u;m<=f;++m){const p=h[m];p.skip||i(p,d,m)}}}function Jf(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(i,n){const r=e?Math.abs(i.x-n.x):0,o=t?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ki(s,e,t,i,n){const r=[];return!n&&!s.isPointInArea(e)||Si(s,t,e,function(l,c,d){!n&&!et(l,s.chartArea,0)||l.inRange(e.x,e.y,i)&&r.push({element:l,datasetIndex:c,index:d})},!0),r}function Qf(s,e,t,i){let n=[];function r(o,l,c){const{startAngle:d,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:u}=wo(o,{x:e.x,y:e.y});Ms(u,d,h)&&n.push({element:o,datasetIndex:l,index:c})}return Si(s,t,e,r),n}function em(s,e,t,i,n,r){let o=[];const l=Jf(t);let c=Number.POSITIVE_INFINITY;function d(h,u,f){const m=h.inRange(e.x,e.y,n);if(i&&!m)return;const p=h.getCenterPoint(n);if(!(!!r||s.isPointInArea(p))&&!m)return;const b=l(e,p);b<c?(o=[{element:h,datasetIndex:u,index:f}],c=b):b===c&&o.push({element:h,datasetIndex:u,index:f})}return Si(s,t,e,d),o}function Yi(s,e,t,i,n,r){return!r&&!s.isPointInArea(e)?[]:t==="r"&&!i?Qf(s,e,t,n):em(s,e,t,i,n,r)}function Ua(s,e,t,i,n){const r=[],o=t==="x"?"inXRange":"inYRange";let l=!1;return Si(s,t,e,(c,d,h)=>{c[o]&&c[o](e[t],n)&&(r.push({element:c,datasetIndex:d,index:h}),l=l||c.inRange(e.x,e.y,n))}),i&&!l?[]:r}var tm={modes:{index(s,e,t,i){const n=Nt(e,s),r=t.axis||"x",o=t.includeInvisible||!1,l=t.intersect?Ki(s,n,r,i,o):Yi(s,n,r,!1,i,o),c=[];return l.length?(s.getSortedVisibleDatasetMetas().forEach(d=>{const h=l[0].index,u=d.data[h];u&&!u.skip&&c.push({element:u,datasetIndex:d.index,index:h})}),c):[]},dataset(s,e,t,i){const n=Nt(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;let l=t.intersect?Ki(s,n,r,i,o):Yi(s,n,r,!1,i,o);if(l.length>0){const c=l[0].datasetIndex,d=s.getDatasetMeta(c).data;l=[];for(let h=0;h<d.length;++h)l.push({element:d[h],datasetIndex:c,index:h})}return l},point(s,e,t,i){const n=Nt(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;return Ki(s,n,r,i,o)},nearest(s,e,t,i){const n=Nt(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;return Yi(s,n,r,t.intersect,i,o)},x(s,e,t,i){const n=Nt(e,s);return Ua(s,n,"x",t.intersect,i)},y(s,e,t,i){const n=Nt(e,s);return Ua(s,n,"y",t.intersect,i)}}};const Zo=["left","top","right","bottom"];function rs(s,e){return s.filter(t=>t.pos===e)}function Xa(s,e){return s.filter(t=>Zo.indexOf(t.pos)===-1&&t.box.axis===e)}function os(s,e){return s.sort((t,i)=>{const n=e?i:t,r=e?t:i;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function sm(s){const e=[];let t,i,n,r,o,l;for(t=0,i=(s||[]).length;t<i;++t)n=s[t],{position:r,options:{stack:o,stackWeight:l=1}}=n,e.push({index:t,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:l});return e}function im(s){const e={};for(const t of s){const{stack:i,pos:n,stackWeight:r}=t;if(!i||!Zo.includes(n))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function nm(s,e){const t=im(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let r,o,l;for(r=0,o=s.length;r<o;++r){l=s[r];const{fullSize:c}=l.box,d=t[l.stack],h=d&&l.stackWeight/d.weight;l.horizontal?(l.width=h?h*i:c&&e.availableWidth,l.height=n):(l.width=i,l.height=h?h*n:c&&e.availableHeight)}return t}function am(s){const e=sm(s),t=os(e.filter(d=>d.box.fullSize),!0),i=os(rs(e,"left"),!0),n=os(rs(e,"right")),r=os(rs(e,"top"),!0),o=os(rs(e,"bottom")),l=Xa(e,"x"),c=Xa(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:rs(e,"chartArea"),vertical:i.concat(n).concat(c),horizontal:r.concat(o).concat(l)}}function Ga(s,e,t,i){return Math.max(s[t],e[t])+Math.max(s[i],e[i])}function Jo(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function rm(s,e,t,i){const{pos:n,box:r}=t,o=s.maxPadding;if(!B(n)){t.size&&(s[n]-=t.size);const u=i[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?r.height:r.width),t.size=u.size/u.count,s[n]+=t.size}r.getPadding&&Jo(o,r.getPadding());const l=Math.max(0,e.outerWidth-Ga(o,s,"left","right")),c=Math.max(0,e.outerHeight-Ga(o,s,"top","bottom")),d=l!==s.w,h=c!==s.h;return s.w=l,s.h=c,t.horizontal?{same:d,other:h}:{same:h,other:d}}function om(s){const e=s.maxPadding;function t(i){const n=Math.max(e[i]-s[i],0);return s[i]+=n,n}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function lm(s,e){const t=e.maxPadding;function i(n){const r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(s?["left","right"]:["top","bottom"])}function fs(s,e,t,i){const n=[];let r,o,l,c,d,h;for(r=0,o=s.length,d=0;r<o;++r){l=s[r],c=l.box,c.update(l.width||e.w,l.height||e.h,lm(l.horizontal,e));const{same:u,other:f}=rm(e,t,l,i);d|=u&&n.length,h=h||f,c.fullSize||n.push(l)}return d&&fs(n,e,t,i)||h}function Ys(s,e,t,i,n){s.top=t,s.left=e,s.right=e+i,s.bottom=t+n,s.width=i,s.height=n}function qa(s,e,t,i){const n=t.padding;let{x:r,y:o}=e;for(const l of s){const c=l.box,d=i[l.stack]||{placed:0,weight:1},h=l.stackWeight/d.weight||1;if(l.horizontal){const u=e.w*h,f=d.size||c.height;Ps(d.start)&&(o=d.start),c.fullSize?Ys(c,n.left,o,t.outerWidth-n.right-n.left,f):Ys(c,e.left+d.placed,o,u,f),d.start=o,d.placed+=u,o=c.bottom}else{const u=e.h*h,f=d.size||c.width;Ps(d.start)&&(r=d.start),c.fullSize?Ys(c,r,n.top,f,t.outerHeight-n.bottom-n.top):Ys(c,r,e.top+d.placed,f,u),d.start=r,d.placed+=u,r=c.right}}e.x=r,e.y=o}var re={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,i){if(!s)return;const n=oe(s.options.layout.padding),r=Math.max(e-n.width,0),o=Math.max(t-n.height,0),l=am(s.boxes),c=l.vertical,d=l.horizontal;K(s.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=c.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},n);Jo(f,oe(i));const m=Object.assign({maxPadding:f,w:r,h:o,x:n.left,y:n.top},n),p=nm(c.concat(d),u);fs(l.fullSize,m,u,p),fs(c,m,u,p),fs(d,m,u,p)&&fs(c,m,u,p),om(m),qa(l.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,qa(l.rightAndBottom,m,u,p),s.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},K(l.chartArea,x=>{const b=x.box;Object.assign(b,s.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Qo{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class cm extends Qo{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ei="$chartjs",dm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Za=s=>s===null||s==="";function hm(s,e){const t=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[ei]={initial:{height:i,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Za(n)){const r=Ra(s,"width");r!==void 0&&(s.width=r)}if(Za(i))if(s.style.height==="")s.height=s.width/(e||2);else{const r=Ra(s,"height");r!==void 0&&(s.height=r)}return s}const el=rf?{passive:!0}:!1;function um(s,e,t){s&&s.addEventListener(e,t,el)}function fm(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,el)}function mm(s,e){const t=dm[s.type]||s.type,{x:i,y:n}=Nt(s,e);return{type:t,chart:e,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function di(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function pm(s,e,t){const i=s.canvas,n=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||di(l.addedNodes,i),o=o&&!di(l.removedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function gm(s,e,t){const i=s.canvas,n=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||di(l.removedNodes,i),o=o&&!di(l.addedNodes,i);o&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const Os=new Map;let Ja=0;function tl(){const s=window.devicePixelRatio;s!==Ja&&(Ja=s,Os.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function xm(s,e){Os.size||window.addEventListener("resize",tl),Os.set(s,e)}function bm(s){Os.delete(s),Os.size||window.removeEventListener("resize",tl)}function vm(s,e,t){const i=s.canvas,n=i&&Ln(i);if(!n)return;const r=Mo((l,c)=>{const d=n.clientWidth;t(l,c),d<n.clientWidth&&t()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,h=c.contentRect.height;d===0&&h===0||r(d,h)});return o.observe(n),xm(s,r),o}function Ui(s,e,t){t&&t.disconnect(),e==="resize"&&bm(s)}function ym(s,e,t){const i=s.canvas,n=Mo(r=>{s.ctx!==null&&t(mm(r,s))},s);return um(i,e,n),n}class jm extends Qo{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(hm(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[ei])return!1;const i=t[ei].initial;["height","width"].forEach(r=>{const o=i[r];F(o)?t.removeAttribute(r):t.setAttribute(r,o)});const n=i.style||{};return Object.keys(n).forEach(r=>{t.style[r]=n[r]}),t.width=t.width,delete t[ei],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),o={attach:pm,detach:gm,resize:vm}[t]||ym;n[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:Ui,detach:Ui,resize:Ui}[t]||fm)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return af(e,t,i,n)}isAttached(e){const t=e&&Ln(e);return!!(t&&t.isConnected)}}function _m(s){return!En()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?cm:jm}class st{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return qt(this.x)&&qt(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach(r=>{n[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),n}}function km(s,e){const t=s.options.ticks,i=Nm(s),n=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?Sm(e):[],o=r.length,l=r[0],c=r[o-1],d=[];if(o>n)return Cm(e,d,r,o/n),d;const h=wm(r,e,n);if(o>0){let u,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Us(e,d,h,F(m)?0:l-m,l),u=0,f=o-1;u<f;u++)Us(e,d,h,r[u],r[u+1]);return Us(e,d,h,c,F(m)?e.length:c+m),d}return Us(e,d,h),d}function Nm(s){const e=s.options.offset,t=s._tickSize(),i=s._length/t+(e?0:1),n=s._maxLength/t;return Math.floor(Math.min(i,n))}function wm(s,e,t){const i=Pm(s),n=e.length/t;if(!i)return Math.max(n,1);const r=ou(i);for(let o=0,l=r.length-1;o<l;o++){const c=r[o];if(c>n)return c}return Math.max(n,1)}function Sm(s){const e=[];let t,i;for(t=0,i=s.length;t<i;t++)s[t].major&&e.push(t);return e}function Cm(s,e,t,i){let n=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<s.length;o++)o===r&&(e.push(s[o]),n++,r=t[n*i])}function Us(s,e,t,i,n){const r=I(i,0),o=Math.min(I(n,s.length),s.length);let l=0,c,d,h;for(t=Math.ceil(t),n&&(c=n-i,t=c/Math.floor(c/t)),h=r;h<0;)l++,h=Math.round(r+l*t);for(d=Math.max(r,0);d<o;d++)d===h&&(e.push(s[d]),l++,h=Math.round(r+l*t))}function Pm(s){const e=s.length;let t,i;if(e<2)return!1;for(i=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==i)return!1;return i}const Mm=s=>s==="left"?"right":s==="right"?"left":s,Qa=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,er=(s,e)=>Math.min(e||s,s);function tr(s,e){const t=[],i=s.length/e,n=s.length;let r=0;for(;r<n;r+=i)t.push(s[Math.floor(r)]);return t}function Am(s,e,t){const i=s.ticks.length,n=Math.min(e,i-1),r=s._startPixel,o=s._endPixel,l=1e-6;let c=s.getPixelForTick(n),d;if(!(t&&(i===1?d=Math.max(c-r,o-c):e===0?d=(s.getPixelForTick(1)-c)/2:d=(c-s.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<r-l||c>o+l)))return c}function Om(s,e){K(s,t=>{const i=t.gc,n=i.length/2;let r;if(n>e){for(r=0;r<n;++r)delete t.data[i[r]];i.splice(0,n)}})}function ls(s){return s.drawTicks?s.tickLength:0}function sr(s,e){if(!s.display)return 0;const t=ee(s.font,e),i=oe(s.padding);return(G(s.text)?s.text.length:1)*t.lineHeight+i.height}function zm(s,e){return pt(s,{scale:e,type:"scale"})}function Dm(s,e,t){return pt(s,{tick:t,index:e,type:"tick"})}function Rm(s,e,t){let i=An(s);return(t&&e!=="right"||!t&&e==="right")&&(i=Mm(i)),i}function Tm(s,e,t,i){const{top:n,left:r,bottom:o,right:l,chart:c}=s,{chartArea:d,scales:h}=c;let u=0,f,m,p;const x=o-n,b=l-r;if(s.isHorizontal()){if(m=ne(i,r,l),B(t)){const j=Object.keys(t)[0],v=t[j];p=h[j].getPixelForValue(v)+x-e}else t==="center"?p=(d.bottom+d.top)/2+x-e:p=Qa(s,t,e);f=l-r}else{if(B(t)){const j=Object.keys(t)[0],v=t[j];m=h[j].getPixelForValue(v)-b+e}else t==="center"?m=(d.left+d.right)/2-b+e:m=Qa(s,t,e);p=ne(i,o,n),u=t==="left"?-Q:Q}return{titleX:m,titleY:p,maxWidth:f,rotation:u}}class Lt extends st{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=Ne(e,Number.POSITIVE_INFINITY),t=Ne(t,Number.NEGATIVE_INFINITY),i=Ne(i,Number.POSITIVE_INFINITY),n=Ne(n,Number.NEGATIVE_INFINITY),{min:Ne(e,i),max:Ne(t,n),minDefined:J(e),maxDefined:J(t)}}getMinMax(e){let{min:t,max:i,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),n||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=n&&t>i?t:i,{min:Ne(t,Ne(i,t)),max:Ne(i,Ne(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){U(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Eu(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?tr(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=km(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){U(this.options.afterUpdate,[this])}beforeSetDimensions(){U(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){U(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),U(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){U(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,r;for(i=0,n=e.length;i<n;i++)r=e[i],r.label=U(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){U(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){U(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=er(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,r=t.maxRotation;let o=n,l,c,d;if(!this._isVisible()||!t.display||n>=r||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const h=this._getLabelSizes(),u=h.widest.width,f=h.highest.height,m=se(this.chart.width-u,0,this.maxWidth);l=e.offset?this.maxWidth/i:m/(i-1),u+6>l&&(l=m/(i-(e.offset?.5:1)),c=this.maxHeight-ls(e.grid)-t.padding-sr(e.title,this.chart.options.font),d=Math.sqrt(u*u+f*f),o=Pn(Math.min(Math.asin(se((h.highest.height+6)/l,-1,1)),Math.asin(se(c/d,-1,1))-Math.asin(se(f/d,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){U(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){U(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=sr(n,t.options.font);if(l?(e.width=this.maxWidth,e.height=ls(r)+c):(e.height=this.maxHeight,e.width=ls(r)+c),i.display&&this.ticks.length){const{first:d,last:h,widest:u,highest:f}=this._getLabelSizes(),m=i.padding*2,p=De(this.labelRotation),x=Math.cos(p),b=Math.sin(p);if(l){const j=i.mirror?0:b*u.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+j+m)}else{const j=i.mirror?0:x*u.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+j+m)}this._calculatePadding(d,h,b,x)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:r,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=n*e.width,m=i*t.height):(f=i*e.height,m=n*t.width):r==="start"?m=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,m=t.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-u+o)*this.width/(this.width-u),0)}else{let h=t.height/2,u=e.height/2;r==="start"?(h=0,u=e.height):r==="end"&&(h=t.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){U(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)F(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=tr(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:n,_longestTextCache:r}=this,o=[],l=[],c=Math.floor(t/er(t,i));let d=0,h=0,u,f,m,p,x,b,j,v,S,_,k;for(u=0;u<t;u+=c){if(p=e[u].label,x=this._resolveTickFontOptions(u),n.font=b=x.string,j=r[b]=r[b]||{data:{},gc:[]},v=x.lineHeight,S=_=0,!F(p)&&!G(p))S=li(n,j.data,j.gc,S,p),_=v;else if(G(p))for(f=0,m=p.length;f<m;++f)k=p[f],!F(k)&&!G(k)&&(S=li(n,j.data,j.gc,S,k),_+=v);o.push(S),l.push(_),d=Math.max(S,d),h=Math.max(_,h)}Om(r,t);const C=o.indexOf(d),M=l.indexOf(h),N=z=>({width:o[z]||0,height:l[z]||0});return{first:N(0),last:N(t-1),widest:N(C),highest:N(M),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return hu(this._alignToPixels?vt(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=Dm(this.getContext(),e,i))}return this.$context||(this.$context=zm(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=De(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,l=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*i>l*n?l/i:c/n:c*n<l*i?c/i:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:r,position:o,border:l}=n,c=r.offset,d=this.isHorizontal(),u=this.ticks.length+(c?1:0),f=ls(r),m=[],p=l.setContext(this.getContext()),x=p.display?p.width:0,b=x/2,j=function(P){return vt(i,P,x)};let v,S,_,k,C,M,N,z,w,g,O,L;if(o==="top")v=j(this.bottom),M=this.bottom-f,z=v-b,g=j(e.top)+b,L=e.bottom;else if(o==="bottom")v=j(this.top),g=e.top,L=j(e.bottom)-b,M=v+b,z=this.top+f;else if(o==="left")v=j(this.right),C=this.right-f,N=v-b,w=j(e.left)+b,O=e.right;else if(o==="right")v=j(this.left),w=e.left,O=j(e.right)-b,C=v+b,N=this.left+f;else if(t==="x"){if(o==="center")v=j((e.top+e.bottom)/2+.5);else if(B(o)){const P=Object.keys(o)[0],E=o[P];v=j(this.chart.scales[P].getPixelForValue(E))}g=e.top,L=e.bottom,M=v+b,z=M+f}else if(t==="y"){if(o==="center")v=j((e.left+e.right)/2);else if(B(o)){const P=Object.keys(o)[0],E=o[P];v=j(this.chart.scales[P].getPixelForValue(E))}C=v-b,N=C-f,w=e.left,O=e.right}const T=I(n.ticks.maxTicksLimit,u),D=Math.max(1,Math.ceil(u/T));for(S=0;S<u;S+=D){const P=this.getContext(S),E=r.setContext(P),H=l.setContext(P),$=E.lineWidth,ue=E.color,fe=H.dash||[],V=H.dashOffset,Ke=E.tickWidth,Pe=E.tickColor,me=E.tickBorderDash||[],Me=E.tickBorderDashOffset;_=Am(this,S,c),_!==void 0&&(k=vt(i,_,$),d?C=N=w=O=k:M=z=g=L=k,m.push({tx1:C,ty1:M,tx2:N,ty2:z,x1:w,y1:g,x2:O,y2:L,width:$,color:ue,borderDash:fe,borderDashOffset:V,tickWidth:Ke,tickColor:Pe,tickBorderDash:me,tickBorderDashOffset:Me}))}return this._ticksLength=u,this._borderValue=v,m}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:r}=i,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:h,mirror:u}=r,f=ls(i.grid),m=f+h,p=u?-h:m,x=-De(this.labelRotation),b=[];let j,v,S,_,k,C,M,N,z,w,g,O,L="middle";if(n==="top")C=this.bottom-p,M=this._getXAxisLabelAlignment();else if(n==="bottom")C=this.top+p,M=this._getXAxisLabelAlignment();else if(n==="left"){const D=this._getYAxisLabelAlignment(f);M=D.textAlign,k=D.x}else if(n==="right"){const D=this._getYAxisLabelAlignment(f);M=D.textAlign,k=D.x}else if(t==="x"){if(n==="center")C=(e.top+e.bottom)/2+m;else if(B(n)){const D=Object.keys(n)[0],P=n[D];C=this.chart.scales[D].getPixelForValue(P)+m}M=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")k=(e.left+e.right)/2-m;else if(B(n)){const D=Object.keys(n)[0],P=n[D];k=this.chart.scales[D].getPixelForValue(P)}M=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?L="top":c==="end"&&(L="bottom"));const T=this._getLabelSizes();for(j=0,v=l.length;j<v;++j){S=l[j],_=S.label;const D=r.setContext(this.getContext(j));N=this.getPixelForTick(j)+r.labelOffset,z=this._resolveTickFontOptions(j),w=z.lineHeight,g=G(_)?_.length:1;const P=g/2,E=D.color,H=D.textStrokeColor,$=D.textStrokeWidth;let ue=M;o?(k=N,M==="inner"&&(j===v-1?ue=this.options.reverse?"left":"right":j===0?ue=this.options.reverse?"right":"left":ue="center"),n==="top"?d==="near"||x!==0?O=-g*w+w/2:d==="center"?O=-T.highest.height/2-P*w+w:O=-T.highest.height+w/2:d==="near"||x!==0?O=w/2:d==="center"?O=T.highest.height/2-P*w:O=T.highest.height-g*w,u&&(O*=-1),x!==0&&!D.showLabelBackdrop&&(k+=w/2*Math.sin(x))):(C=N,O=(1-g)*w/2);let fe;if(D.showLabelBackdrop){const V=oe(D.backdropPadding),Ke=T.heights[j],Pe=T.widths[j];let me=O-V.top,Me=0-V.left;switch(L){case"middle":me-=Ke/2;break;case"bottom":me-=Ke;break}switch(M){case"center":Me-=Pe/2;break;case"right":Me-=Pe;break;case"inner":j===v-1?Me-=Pe:j>0&&(Me-=Pe/2);break}fe={left:Me,top:me,width:Pe+V.width,height:Ke+V.height,color:D.backdropColor}}b.push({label:_,font:z,textOffset:O,options:{rotation:x,color:E,strokeColor:H,strokeWidth:$,textAlign:ue,textBaseline:L,translation:[k,C],backdrop:fe}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-De(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),l=e+r,c=o.widest.width;let d,h;return t==="left"?n?(h=this.right+r,i==="near"?d="left":i==="center"?(d="center",h+=c/2):(d="right",h+=c)):(h=this.right-l,i==="near"?d="right":i==="center"?(d="center",h-=c/2):(d="left",h=this.left)):t==="right"?n?(h=this.left+r,i==="near"?d="right":i==="center"?(d="center",h-=c/2):(d="left",h-=c)):(h=this.left+l,i==="near"?d="left":i==="center"?(d="center",h+=c/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(r=>r.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const l=(c,d,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=n.length;r<o;++r){const c=n[r];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,h,u,f;this.isHorizontal()?(d=vt(e,this.left,o)-o/2,h=vt(e,this.right,l)+l/2,u=f=c):(u=vt(e,this.top,o)-o/2,f=vt(e,this.bottom,l)+l/2,d=h=c),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(d,u),t.lineTo(h,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&ki(i,n);const r=this.getLabelItems(e);for(const o of r){const l=o.options,c=o.font,d=o.label,h=o.textOffset;Rt(i,d,0,h,c,l)}n&&Ni(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const r=ee(i.font),o=oe(i.padding),l=i.align;let c=r.lineHeight/2;t==="bottom"||t==="center"||B(t)?(c+=o.bottom,G(i.text)&&(c+=r.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:d,titleY:h,maxWidth:u,rotation:f}=Tm(this,c,t,l);Rt(e,i.text,0,0,r,{color:i.color,maxWidth:u,rotation:f,textAlign:Rm(l,t,n),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=I(e.grid&&e.grid.z,-1),n=I(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Lt.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let r,o;for(r=0,o=t.length;r<o;++r){const l=t[r];l[i]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return ee(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Xs{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;Im(t)&&(i=this.register(t));const n=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in n||(n[r]=e,Em(e,o,i),this.override&&q.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in q[n]&&(delete q[n][i],this.override&&delete Dt[i])}}function Em(s,e,t){const i=Cs(Object.create(null),[t?q.get(t):{},q.get(e),s.defaults]);q.set(e,i),s.defaultRoutes&&Lm(e,s.defaultRoutes),s.descriptors&&q.describe(e,s.descriptors)}function Lm(s,e){Object.keys(e).forEach(t=>{const i=t.split("."),n=i.pop(),r=[s].concat(i).join("."),o=e[t].split("."),l=o.pop(),c=o.join(".");q.route(r,n,c,l)})}function Im(s){return"id"in s&&"defaults"in s}class Fm{constructor(){this.controllers=new Xs(gt,"datasets",!0),this.elements=new Xs(st,"elements"),this.plugins=new Xs(Object,"plugins"),this.scales=new Xs(Lt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(n=>{const r=i||this._getRegistryForType(n);i||r.isForType(n)||r===this.plugins&&n.id?this._exec(e,r,n):K(n,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,t,i){const n=Cn(e);U(i["before"+n],[],i),t[e](i),U(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var Ie=new Fm;class Bm{constructor(){this._init=void 0}notify(e,t,i,n){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,n){n=n||{};for(const r of e){const o=r.plugin,l=o[i],c=[t,n,r.options];if(U(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){F(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=I(i.options&&i.options.plugins,{}),r=$m(i);return n===!1&&!t?[]:Wm(e,r,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(r,o)=>r.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function $m(s){const e={},t=[],i=Object.keys(Ie.plugins.items);for(let r=0;r<i.length;r++)t.push(Ie.getPlugin(i[r]));const n=s.plugins||[];for(let r=0;r<n.length;r++){const o=n[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Vm(s,e){return!e&&s===!1?null:s===!0?{}:s}function Wm(s,{plugins:e,localIds:t},i,n){const r=[],o=s.getContext();for(const l of e){const c=l.id,d=Vm(i[c],n);d!==null&&r.push({plugin:l,options:Hm(s.config,{plugin:l,local:t[c]},d,o)})}return r}function Hm(s,{plugin:e,local:t},i,n){const r=s.pluginScopeKeys(e),o=s.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),s.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function on(s,e){const t=q.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Km(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function Ym(s,e){return s===e?"_index_":"_value_"}function ir(s){if(s==="x"||s==="y"||s==="r")return s}function Um(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function ln(s,...e){if(ir(s))return s;for(const t of e){const i=t.axis||Um(t.position)||s.length>1&&ir(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function nr(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function Xm(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(t.length)return nr(s,"x",t[0])||nr(s,"y",t[0])}return{}}function Gm(s,e){const t=Dt[s.type]||{scales:{}},i=e.scales||{},n=on(s.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!B(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=ln(o,l,Xm(o,s),q.scales[l.type]),d=Ym(c,n),h=t.scales||{};r[o]=xs(Object.create(null),[{axis:c},l,h[c],h[d]])}),s.data.datasets.forEach(o=>{const l=o.type||s.type,c=o.indexAxis||on(l,e),h=(Dt[l]||{}).scales||{};Object.keys(h).forEach(u=>{const f=Km(u,c),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),xs(r[m],[{axis:f},i[m],h[u]])})}),Object.keys(r).forEach(o=>{const l=r[o];xs(l,[q.scales[l.type],q.scale])}),r}function sl(s){const e=s.options||(s.options={});e.plugins=I(e.plugins,{}),e.scales=Gm(s,e)}function il(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function qm(s){return s=s||{},s.data=il(s.data),sl(s),s}const ar=new Map,nl=new Set;function Gs(s,e){let t=ar.get(s);return t||(t=e(),ar.set(s,t),nl.add(t)),t}const cs=(s,e,t)=>{const i=ut(e,t);i!==void 0&&s.add(i)};class Zm{constructor(e){this._config=qm(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=il(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),sl(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gs(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Gs(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Gs(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Gs(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return(!n||t)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:r}=this,o=this._cachedScopes(e,i),l=o.get(t);if(l)return l;const c=new Set;t.forEach(h=>{e&&(c.add(e),h.forEach(u=>cs(c,e,u))),h.forEach(u=>cs(c,n,u)),h.forEach(u=>cs(c,Dt[r]||{},u)),h.forEach(u=>cs(c,q,u)),h.forEach(u=>cs(c,an,u))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),nl.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Dt[t]||{},q.datasets[t]||{},{type:t},q,an]}resolveNamedOptions(e,t,i,n=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=rr(this._resolverCache,e,n);let c=o;if(Qm(o,t)){r.$shared=!1,i=ft(i)?i():i;const d=this.createResolver(e,i,l);c=Zt(o,i,d)}for(const d of t)r[d]=c[d];return r}createResolver(e,t,i=[""],n){const{resolver:r}=rr(this._resolverCache,e,i);return B(t)?Zt(r,t,void 0,n):r}}function rr(s,e,t){let i=s.get(e);i||(i=new Map,s.set(e,i));const n=t.join();let r=i.get(n);return r||(r={resolver:Dn(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(n,r)),r}const Jm=s=>B(s)&&Object.getOwnPropertyNames(s).some(e=>ft(s[e]));function Qm(s,e){const{isScriptable:t,isIndexable:i}=To(s);for(const n of e){const r=t(n),o=i(n),l=(o||r)&&s[n];if(r&&(ft(l)||Jm(l))||o&&G(l))return!0}return!1}var ep="4.5.1";const tp=["top","bottom","left","right","chartArea"];function or(s,e){return s==="top"||s==="bottom"||tp.indexOf(s)===-1&&e==="x"}function lr(s,e){return function(t,i){return t[s]===i[s]?t[e]-i[e]:t[s]-i[s]}}function cr(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),U(t&&t.onComplete,[s],e)}function sp(s){const e=s.chart,t=e.options.animation;U(t&&t.onProgress,[s],e)}function al(s){return En()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const ti={},dr=s=>{const e=al(s);return Object.values(ti).filter(t=>t.canvas===e).pop()};function ip(s,e,t){const i=Object.keys(s);for(const n of i){const r=+n;if(r>=e){const o=s[n];delete s[n],(t>0||r>e)&&(s[r+t]=o)}}}function np(s,e,t,i){return!t||s.type==="mouseout"?null:i?e:s}class hi{static defaults=q;static instances=ti;static overrides=Dt;static registry=Ie;static version=ep;static getChart=dr;static register(...e){Ie.add(...e),hr()}static unregister(...e){Ie.remove(...e),hr()}constructor(e,t){const i=this.config=new Zm(t),n=al(e),r=dr(n);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||_m(n)),this.platform.updateConfig(i);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=Jh(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pu(u=>this.update(u),o.resizeDelay||0),this._dataChanges=[],ti[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Xe.listen(this,"complete",cr),Xe.listen(this,"progress",sp),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:n,_aspectRatio:r}=this;return F(e)?t&&r?r:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ie}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Da(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Aa(this.canvas,this.ctx),this}stop(){return Xe.stop(this),this}resize(e,t){Xe.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,t,r),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Da(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),U(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};K(t,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const l=t[o],c=ln(o,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),K(r,o=>{const l=o.options,c=l.id,d=ln(c,l),h=I(l.type,o.dtype);(l.position===void 0||or(l.position,d)!==or(o.dposition))&&(l.position=o.dposition),n[c]=!0;let u=null;if(c in i&&i[c].type===h)u=i[c];else{const f=Ie.getScale(h);u=new f({id:c,type:h,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(l,e)}),K(n,(o,l)=>{o||delete i[l]}),K(i,o=>{re.configure(this,o,o.options),re.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((n,r)=>n.index-r.index),i>t){for(let n=t;n<i;++n)this._destroyDatasetMeta(n);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(lr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,n)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const r=t[i];let o=this.getDatasetMeta(i);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=r.indexAxis||on(l,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Ie.getController(l),{datasetElementType:d,dataElementType:h}=q.datasets[l];Object.assign(c,{dataElementType:Ie.getElement(h),datasetElementType:d&&Ie.getElement(d)}),o.controller=new c(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){K(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:u}=this.getDatasetMeta(d),f=!n&&r.indexOf(u)===-1;u.buildOrUpdateElements(f),o=Math.max(+u.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||K(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lr("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){K(this.scales,e=>{re.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!ja(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:r}of t){const o=i==="_removeElements"?-r:r;ip(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),n=i(0);for(let r=1;r<t;r++)if(!ja(n,i(r)))return;return Array.from(n).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;re.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],K(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,r)=>{n._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ft(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Xe.has(this)?this.attached&&!Xe.running(this)&&Xe.start(this):(this.draw(),cr({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,r;for(n=0,r=t.length;n<r;++n){const o=t[n];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=Yo(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&ki(t,n),e.controller.draw(),n&&Ni(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return et(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const r=tm.modes[t];return typeof r=="function"?r(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter(r=>r&&r._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=pt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,n);Ps(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Xe.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Aa(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ti[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},n=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};K(this.options.events,r=>i(r,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},r=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():o()}unbindEvents(){K(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},K(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let r,o,l,c;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!ai(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const n=this.options.hover,r=(c,d)=>c.filter(h=>!d.some(u=>h.datasetIndex===u.datasetIndex&&h.index===u.index)),o=r(t,e),l=i?e:r(e,t);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:r}=this,o=t,l=this._getActiveElements(e,n,i,o),c=nu(e),d=np(e,this._lastEvent,i,c);i&&(this._lastEvent=null,U(r.onHover,[e,l,this],this),c&&U(r.onClick,[e,l,this],this));const h=!ai(l,n);return(h||t)&&(this._active=l,this._updateHoverStyles(l,n,t)),this._lastEvent=d,h}_getActiveElements(e,t,i,n){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,n)}}function hr(){return K(hi.instances,s=>s._plugins.invalidate())}function ap(s,e,t){const{startAngle:i,x:n,y:r,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:h}=c,u=Math.min(d/o,ae(i-t));if(s.beginPath(),s.arc(n,r,o-d/2,i+u/2,t-u/2),l>0){const f=Math.min(d/l,ae(i-t));s.arc(n,r,l+d/2,t-f/2,i+f/2,!0)}else{const f=Math.min(d/2,o*ae(i-t));if(h==="round")s.arc(n,r,f,t-W/2,i+W/2,!0);else if(h==="bevel"){const m=2*f*f,p=-m*Math.cos(t+W/2)+n,x=-m*Math.sin(t+W/2)+r,b=m*Math.cos(i+W/2)+n,j=m*Math.sin(i+W/2)+r;s.lineTo(p,x),s.lineTo(b,j)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function rp(s,e,t){const{startAngle:i,pixelMargin:n,x:r,y:o,outerRadius:l,innerRadius:c}=e;let d=n/l;s.beginPath(),s.arc(r,o,l,i-d,t+d),c>n?(d=n/c,s.arc(r,o,c,t+d,i-d,!0)):s.arc(r,o,n,t+Q,i-Q),s.closePath(),s.clip()}function op(s){return zn(s,["outerStart","outerEnd","innerStart","innerEnd"])}function lp(s,e,t,i){const n=op(s.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),l=c=>{const d=(t-Math.min(r,c))*i/2;return se(c,0,Math.min(r,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:se(n.innerStart,0,o),innerEnd:se(n.innerEnd,0,o)}}function Wt(s,e,t,i){return{x:t+s*Math.cos(e),y:i+s*Math.sin(e)}}function ui(s,e,t,i,n,r){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:h}=e,u=Math.max(e.outerRadius+i+t-d,0),f=h>0?h+i+t+d:0;let m=0;const p=n-c;if(i){const D=h>0?h-i:0,P=u>0?u-i:0,E=(D+P)/2,H=E!==0?p*E/(E+i):p;m=(p-H)/2}const x=Math.max(.001,p*u-t/W)/u,b=(p-x)/2,j=c+b+m,v=n-b-m,{outerStart:S,outerEnd:_,innerStart:k,innerEnd:C}=lp(e,f,u,v-j),M=u-S,N=u-_,z=j+S/M,w=v-_/N,g=f+k,O=f+C,L=j+k/g,T=v-C/O;if(s.beginPath(),r){const D=(z+w)/2;if(s.arc(o,l,u,z,D),s.arc(o,l,u,D,w),_>0){const $=Wt(N,w,o,l);s.arc($.x,$.y,_,w,v+Q)}const P=Wt(O,v,o,l);if(s.lineTo(P.x,P.y),C>0){const $=Wt(O,T,o,l);s.arc($.x,$.y,C,v+Q,T+Math.PI)}const E=(v-C/f+(j+k/f))/2;if(s.arc(o,l,f,v-C/f,E,!0),s.arc(o,l,f,E,j+k/f,!0),k>0){const $=Wt(g,L,o,l);s.arc($.x,$.y,k,L+Math.PI,j-Q)}const H=Wt(M,j,o,l);if(s.lineTo(H.x,H.y),S>0){const $=Wt(M,z,o,l);s.arc($.x,$.y,S,j-Q,z)}}else{s.moveTo(o,l);const D=Math.cos(z)*u+o,P=Math.sin(z)*u+l;s.lineTo(D,P);const E=Math.cos(w)*u+o,H=Math.sin(w)*u+l;s.lineTo(E,H)}s.closePath()}function cp(s,e,t,i,n){const{fullCircles:r,startAngle:o,circumference:l}=e;let c=e.endAngle;if(r){ui(s,e,t,i,c,n);for(let d=0;d<r;++d)s.fill();isNaN(l)||(c=o+(l%X||X))}return ui(s,e,t,i,c,n),s.fill(),c}function dp(s,e,t,i,n){const{fullCircles:r,startAngle:o,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:h,borderDash:u,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!d)return;s.setLineDash(u||[]),s.lineDashOffset=f,p?(s.lineWidth=d*2,s.lineJoin=h||"round"):(s.lineWidth=d,s.lineJoin=h||"bevel");let x=e.endAngle;if(r){ui(s,e,t,i,x,n);for(let b=0;b<r;++b)s.stroke();isNaN(l)||(x=o+(l%X||X))}p&&rp(s,e,x),c.selfJoin&&x-o>=W&&m===0&&h!=="miter"&&ap(s,e,x),r||(ui(s,e,t,i,x,n),s.stroke())}class hp extends st{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.getProps(["x","y"],i),{angle:r,distance:o}=wo(n,{x:e,y:t}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=I(u,c-l),p=Ms(r,l,c)&&l!==c,x=m>=X||p,b=Je(o,d+f,h+f);return x&&b}getCenterPoint(e){const{x:t,y:i,startAngle:n,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,h=(n+r)/2,u=(o+l+d+c)/2;return{x:t+Math.cos(h)*u,y:i+Math.sin(h)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,n=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>X?Math.floor(i/X):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*n,Math.sin(l)*n);const c=1-Math.sin(Math.min(W,i||0)),d=n*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,cp(e,this,d,r,o),dp(e,this,d,r,o),e.restore()}}function rl(s,e,t=e){s.lineCap=I(t.borderCapStyle,e.borderCapStyle),s.setLineDash(I(t.borderDash,e.borderDash)),s.lineDashOffset=I(t.borderDashOffset,e.borderDashOffset),s.lineJoin=I(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=I(t.borderWidth,e.borderWidth),s.strokeStyle=I(t.borderColor,e.borderColor)}function up(s,e,t){s.lineTo(t.x,t.y)}function fp(s){return s.stepped?Cu:s.tension||s.cubicInterpolationMode==="monotone"?Pu:up}function ol(s,e,t={}){const i=s.length,{start:n=0,end:r=i-1}=t,{start:o,end:l}=e,c=Math.max(n,o),d=Math.min(r,l),h=n<o&&r<o||n>l&&r>l;return{count:i,start:c,loop:e.loop,ilen:d<c&&!h?i+d-c:d-c}}function mp(s,e,t,i){const{points:n,options:r}=e,{count:o,start:l,loop:c,ilen:d}=ol(n,t,i),h=fp(r);let{move:u=!0,reverse:f}=i||{},m,p,x;for(m=0;m<=d;++m)p=n[(l+(f?d-m:m))%o],!p.skip&&(u?(s.moveTo(p.x,p.y),u=!1):h(s,x,p,f,r.stepped),x=p);return c&&(p=n[(l+(f?d:0))%o],h(s,x,p,f,r.stepped)),!!c}function pp(s,e,t,i){const n=e.points,{count:r,start:o,ilen:l}=ol(n,t,i),{move:c=!0,reverse:d}=i||{};let h=0,u=0,f,m,p,x,b,j;const v=_=>(o+(d?l-_:_))%r,S=()=>{x!==b&&(s.lineTo(h,b),s.lineTo(h,x),s.lineTo(h,j))};for(c&&(m=n[v(0)],s.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=n[v(f)],m.skip)continue;const _=m.x,k=m.y,C=_|0;C===p?(k<x?x=k:k>b&&(b=k),h=(u*h+_)/++u):(S(),s.lineTo(_,k),p=C,u=0,x=b=k),j=k}S()}function cn(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?pp:mp}function gp(s){return s.stepped?of:s.tension||s.cubicInterpolationMode==="monotone"?lf:wt}function xp(s,e,t,i){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,i)&&n.closePath()),rl(s,e.options),s.stroke(n)}function bp(s,e,t,i){const{segments:n,options:r}=e,o=cn(e);for(const l of n)rl(s,r,l.style),s.beginPath(),o(s,e,l,{start:t,end:t+i-1})&&s.closePath(),s.stroke()}const vp=typeof Path2D=="function";function yp(s,e,t,i){vp&&!e.options.segment?xp(s,e,t,i):bp(s,e,t,i)}class Ci extends st{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;Ju(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=mf(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],r=this.points,o=Ko(this,{property:t,start:n,end:n});if(!o.length)return;const l=[],c=gp(i);let d,h;for(d=0,h=o.length;d<h;++d){const{start:u,end:f}=o[d],m=r[u],p=r[f];if(m===p){l.push(m);continue}const x=Math.abs((n-m[t])/(p[t]-m[t])),b=c(m,p,x,i.stepped);b[t]=e[t],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,t,i){return cn(this)(e,this,t,i)}path(e,t,i){const n=this.segments,r=cn(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const l of n)o&=r(e,this,l,{start:t,end:t+i-1});return!!o}draw(e,t,i,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),yp(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ur(s,e,t,i){const n=s.options,{[t]:r}=s.getProps([t],i);return Math.abs(e-r)<n.radius+n.hitRadius}class jp extends st{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return ur(this,e,"x",t)}inYRange(e,t){return ur(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!et(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,rn(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ll(s,e){const{x:t,y:i,base:n,width:r,height:o}=s.getProps(["x","y","base","width","height"],e);let l,c,d,h,u;return s.horizontal?(u=o/2,l=Math.min(t,n),c=Math.max(t,n),d=i-u,h=i+u):(u=r/2,l=t-u,c=t+u,d=Math.min(i,n),h=Math.max(i,n)),{left:l,top:d,right:c,bottom:h}}function lt(s,e,t,i){return s?0:se(e,t,i)}function _p(s,e,t){const i=s.options.borderWidth,n=s.borderSkipped,r=Ro(i);return{t:lt(n.top,r.top,0,t),r:lt(n.right,r.right,0,e),b:lt(n.bottom,r.bottom,0,t),l:lt(n.left,r.left,0,e)}}function kp(s,e,t){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,r=Ct(n),o=Math.min(e,t),l=s.borderSkipped,c=i||B(n);return{topLeft:lt(!c||l.top||l.left,r.topLeft,0,o),topRight:lt(!c||l.top||l.right,r.topRight,0,o),bottomLeft:lt(!c||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:lt(!c||l.bottom||l.right,r.bottomRight,0,o)}}function Np(s){const e=ll(s),t=e.right-e.left,i=e.bottom-e.top,n=_p(s,t/2,i/2),r=kp(s,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Xi(s,e,t,i){const n=e===null,r=t===null,l=s&&!(n&&r)&&ll(s,i);return l&&(n||Je(e,l.left,l.right))&&(r||Je(t,l.top,l.bottom))}function wp(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function Sp(s,e){s.rect(e.x,e.y,e.w,e.h)}function Gi(s,e,t={}){const i=s.x!==t.x?-e:0,n=s.y!==t.y?-e:0,r=(s.x+s.w!==t.x+t.w?e:0)-i,o=(s.y+s.h!==t.y+t.h?e:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+r,h:s.h+o,radius:s.radius}}class Cp extends st{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:r,outer:o}=Np(this),l=wp(o.radius)?As:Sp;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),l(e,Gi(o,t,r)),e.clip(),l(e,Gi(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),l(e,Gi(r,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return Xi(this,e,t,i)}inXRange(e,t){return Xi(this,e,null,t)}inYRange(e,t){return Xi(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+n)/2:t,y:r?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Pp=Object.freeze({__proto__:null,ArcElement:hp,BarElement:Cp,LineElement:Ci,PointElement:jp});const dn=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],fr=dn.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function cl(s){return dn[s%dn.length]}function dl(s){return fr[s%fr.length]}function Mp(s,e){return s.borderColor=cl(e),s.backgroundColor=dl(e),++e}function Ap(s,e){return s.backgroundColor=s.data.map(()=>cl(e++)),e}function Op(s,e){return s.backgroundColor=s.data.map(()=>dl(e++)),e}function zp(s){let e=0;return(t,i)=>{const n=s.getDatasetMeta(i).controller;n instanceof In?e=Ap(t,e):n instanceof qo?e=Op(t,e):n&&(e=Mp(t,e))}}function mr(s){let e;for(e in s)if(s[e].borderColor||s[e].backgroundColor)return!0;return!1}function Dp(s){return s&&(s.borderColor||s.backgroundColor)}function Rp(){return q.borderColor!=="rgba(0,0,0,0.1)"||q.backgroundColor!=="rgba(0,0,0,0.1)"}var Tp={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,e,t){if(!t.enabled)return;const{data:{datasets:i},options:n}=s.config,{elements:r}=n,o=mr(i)||Dp(n)||r&&mr(r)||Rp();if(!t.forceOverride&&o)return;const l=zp(s);i.forEach(l)}};function Ep(s,e,t,i,n){const r=n.samples||i;if(r>=t)return s.slice(e,e+t);const o=[],l=(t-2)/(r-2);let c=0;const d=e+t-1;let h=e,u,f,m,p,x;for(o[c++]=s[h],u=0;u<r-2;u++){let b=0,j=0,v;const S=Math.floor((u+1)*l)+1+e,_=Math.min(Math.floor((u+2)*l)+1,t)+e,k=_-S;for(v=S;v<_;v++)b+=s[v].x,j+=s[v].y;b/=k,j/=k;const C=Math.floor(u*l)+1+e,M=Math.min(Math.floor((u+1)*l)+1,t)+e,{x:N,y:z}=s[h];for(m=p=-1,v=C;v<M;v++)p=.5*Math.abs((N-b)*(s[v].y-z)-(N-s[v].x)*(j-z)),p>m&&(m=p,f=s[v],x=v);o[c++]=f,h=x}return o[c++]=s[d],o}function Lp(s,e,t,i){let n=0,r=0,o,l,c,d,h,u,f,m,p,x;const b=[],j=e+t-1,v=s[e].x,_=s[j].x-v;for(o=e;o<e+t;++o){l=s[o],c=(l.x-v)/_*i,d=l.y;const k=c|0;if(k===h)d<p?(p=d,u=o):d>x&&(x=d,f=o),n=(r*n+l.x)/++r;else{const C=o-1;if(!F(u)&&!F(f)){const M=Math.min(u,f),N=Math.max(u,f);M!==m&&M!==C&&b.push({...s[M],x:n}),N!==m&&N!==C&&b.push({...s[N],x:n})}o>0&&C!==m&&b.push(s[C]),b.push(l),h=k,r=0,p=x=d,u=f=m=o}}return b}function hl(s){if(s._decimated){const e=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function pr(s){s.data.datasets.forEach(e=>{hl(e)})}function Ip(s,e){const t=e.length;let i=0,n;const{iScale:r}=s,{min:o,max:l,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(i=se(Qe(e,r.axis,o).lo,0,t-1)),d?n=se(Qe(e,r.axis,l).hi+1,i,t)-i:n=t-i,{start:i,count:n}}var Fp={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,e,t)=>{if(!t.enabled){pr(s);return}const i=s.width;s.data.datasets.forEach((n,r)=>{const{_data:o,indexAxis:l}=n,c=s.getDatasetMeta(r),d=o||n.data;if(us([l,s.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const h=s.scales[c.xAxisID];if(h.type!=="linear"&&h.type!=="time"||s.options.parsing)return;let{start:u,count:f}=Ip(c,d);const m=t.threshold||4*i;if(f<=m){hl(n);return}F(o)&&(n._data=d,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let p;switch(t.algorithm){case"lttb":p=Ep(d,u,f,i,t);break;case"min-max":p=Lp(d,u,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}n._decimated=p})},destroy(s){pr(s)}};function Bp(s,e,t){const i=s.segments,n=s.points,r=e.points,o=[];for(const l of i){let{start:c,end:d}=l;d=Pi(c,d,n);const h=hn(t,n[c],n[d],l.loop);if(!e.segments){o.push({source:l,target:h,start:n[c],end:n[d]});continue}const u=Ko(e,h);for(const f of u){const m=hn(t,r[f.start],r[f.end],f.loop),p=Ho(l,n,m);for(const x of p)o.push({source:x,target:f,start:{[t]:gr(h,m,"start",Math.max)},end:{[t]:gr(h,m,"end",Math.min)}})}}return o}function hn(s,e,t,i){if(i)return;let n=e[s],r=t[s];return s==="angle"&&(n=ae(n),r=ae(r)),{property:s,start:n,end:r}}function $p(s,e){const{x:t=null,y:i=null}=s||{},n=e.points,r=[];return e.segments.forEach(({start:o,end:l})=>{l=Pi(o,l,n);const c=n[o],d=n[l];i!==null?(r.push({x:c.x,y:i}),r.push({x:d.x,y:i})):t!==null&&(r.push({x:t,y:c.y}),r.push({x:t,y:d.y}))}),r}function Pi(s,e,t){for(;e>s;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function gr(s,e,t,i){return s&&e?i(s[t],e[t]):s?s[t]:e?e[t]:0}function ul(s,e){let t=[],i=!1;return G(s)?(i=!0,t=s):t=$p(s,e),t.length?new Ci({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function xr(s){return s&&s.fill!==!1}function Vp(s,e,t){let n=s[e].fill;const r=[e];let o;if(!t)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!J(n))return n;if(o=s[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function Wp(s,e,t){const i=Up(s);if(B(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return J(n)&&Math.floor(n)===n?Hp(i[0],e,n,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Hp(s,e,t,i){return(s==="-"||s==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Kp(s,e){let t=null;return s==="start"?t=e.bottom:s==="end"?t=e.top:B(s)?t=e.getPixelForValue(s.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Yp(s,e,t){let i;return s==="start"?i=t:s==="end"?i=e.options.reverse?e.min:e.max:B(s)?i=s.value:i=e.getBaseValue(),i}function Up(s){const e=s.options,t=e.fill;let i=I(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Xp(s){const{scale:e,index:t,line:i}=s,n=[],r=i.segments,o=i.points,l=Gp(e,t);l.push(ul({x:null,y:e.bottom},i));for(let c=0;c<r.length;c++){const d=r[c];for(let h=d.start;h<=d.end;h++)qp(n,o[h],l)}return new Ci({points:n,options:{}})}function Gp(s,e){const t=[],i=s.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const r=i[n];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function qp(s,e,t){const i=[];for(let n=0;n<t.length;n++){const r=t[n],{first:o,last:l,point:c}=Zp(r,e,"x");if(!(!c||o&&l)){if(o)i.unshift(c);else if(s.push(c),!l)break}}s.push(...i)}function Zp(s,e,t){const i=s.interpolate(e,t);if(!i)return{};const n=i[t],r=s.segments,o=s.points;let l=!1,c=!1;for(let d=0;d<r.length;d++){const h=r[d],u=o[h.start][t],f=o[h.end][t];if(Je(n,u,f)){l=n===u,c=n===f;break}}return{first:l,last:c,point:i}}class fl{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:n,y:r,radius:o}=this;return t=t||{start:0,end:X},e.arc(n,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:n}=this,r=e.angle;return{x:t+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function Jp(s){const{chart:e,fill:t,line:i}=s;if(J(t))return Qp(e,t);if(t==="stack")return Xp(s);if(t==="shape")return!0;const n=eg(s);return n instanceof fl?n:ul(n,i)}function Qp(s,e){const t=s.getDatasetMeta(e);return t&&s.isDatasetVisible(e)?t.dataset:null}function eg(s){return(s.scale||{}).getPointPositionForValue?sg(s):tg(s)}function tg(s){const{scale:e={},fill:t}=s,i=Kp(t,e);if(J(i)){const n=e.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function sg(s){const{scale:e,fill:t}=s,i=e.options,n=e.getLabels().length,r=i.reverse?e.max:e.min,o=Yp(t,e,r),l=[];if(i.grid.circular){const c=e.getPointPositionForValue(0,r);return new fl({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<n;++c)l.push(e.getPointPositionForValue(c,o));return l}function qi(s,e,t){const i=Jp(e),{chart:n,index:r,line:o,scale:l,axis:c}=e,d=o.options,h=d.fill,u=d.backgroundColor,{above:f=u,below:m=u}=h||{},p=n.getDatasetMeta(r),x=Yo(n,p);i&&o.points.length&&(ki(s,t),ig(s,{line:o,target:i,above:f,below:m,area:t,scale:l,axis:c,clip:x}),Ni(s))}function ig(s,e){const{line:t,target:i,above:n,below:r,area:o,scale:l,clip:c}=e,d=t._loop?"angle":e.axis;s.save();let h=r;r!==n&&(d==="x"?(br(s,i,o.top),Zi(s,{line:t,target:i,color:n,scale:l,property:d,clip:c}),s.restore(),s.save(),br(s,i,o.bottom)):d==="y"&&(vr(s,i,o.left),Zi(s,{line:t,target:i,color:r,scale:l,property:d,clip:c}),s.restore(),s.save(),vr(s,i,o.right),h=n)),Zi(s,{line:t,target:i,color:h,scale:l,property:d,clip:c}),s.restore()}function br(s,e,t){const{segments:i,points:n}=e;let r=!0,o=!1;s.beginPath();for(const l of i){const{start:c,end:d}=l,h=n[c],u=n[Pi(c,d,n)];r?(s.moveTo(h.x,h.y),r=!1):(s.lineTo(h.x,t),s.lineTo(h.x,h.y)),o=!!e.pathSegment(s,l,{move:o}),o?s.closePath():s.lineTo(u.x,t)}s.lineTo(e.first().x,t),s.closePath(),s.clip()}function vr(s,e,t){const{segments:i,points:n}=e;let r=!0,o=!1;s.beginPath();for(const l of i){const{start:c,end:d}=l,h=n[c],u=n[Pi(c,d,n)];r?(s.moveTo(h.x,h.y),r=!1):(s.lineTo(t,h.y),s.lineTo(h.x,h.y)),o=!!e.pathSegment(s,l,{move:o}),o?s.closePath():s.lineTo(t,u.y)}s.lineTo(t,e.first().y),s.closePath(),s.clip()}function Zi(s,e){const{line:t,target:i,property:n,color:r,scale:o,clip:l}=e,c=Bp(t,i,n);for(const{source:d,target:h,start:u,end:f}of c){const{style:{backgroundColor:m=r}={}}=d,p=i!==!0;s.save(),s.fillStyle=m,ng(s,o,l,p&&hn(n,u,f)),s.beginPath();const x=!!t.pathSegment(s,d);let b;if(p){x?s.closePath():yr(s,i,f,n);const j=!!i.pathSegment(s,h,{move:x,reverse:!0});b=x&&j,b||yr(s,i,u,n)}s.closePath(),s.fill(b?"evenodd":"nonzero"),s.restore()}}function ng(s,e,t,i){const n=e.chart.chartArea,{property:r,start:o,end:l}=i||{};if(r==="x"||r==="y"){let c,d,h,u;r==="x"?(c=o,d=n.top,h=l,u=n.bottom):(c=n.left,d=o,h=n.right,u=l),s.beginPath(),t&&(c=Math.max(c,t.left),h=Math.min(h,t.right),d=Math.max(d,t.top),u=Math.min(u,t.bottom)),s.rect(c,d,h-c,u-d),s.clip()}}function yr(s,e,t,i){const n=e.interpolate(t,i);n&&s.lineTo(n.x,n.y)}var ag={id:"filler",afterDatasetsUpdate(s,e,t){const i=(s.data.datasets||[]).length,n=[];let r,o,l,c;for(o=0;o<i;++o)r=s.getDatasetMeta(o),l=r.dataset,c=null,l&&l.options&&l instanceof Ci&&(c={visible:s.isDatasetVisible(o),index:o,fill:Wp(l,o,i),chart:s,axis:r.controller.options.indexAxis,scale:r.vScale,line:l}),r.$filler=c,n.push(c);for(o=0;o<i;++o)c=n[o],!(!c||c.fill===!1)&&(c.fill=Vp(n,o,t.propagate))},beforeDraw(s,e,t){const i=t.drawTime==="beforeDraw",n=s.getSortedVisibleDatasetMetas(),r=s.chartArea;for(let o=n.length-1;o>=0;--o){const l=n[o].$filler;l&&(l.line.updateControlPoints(r,l.axis),i&&l.fill&&qi(s.ctx,l,r))}},beforeDatasetsDraw(s,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=s.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const r=i[n].$filler;xr(r)&&qi(s.ctx,r,s.chartArea)}},beforeDatasetDraw(s,e,t){const i=e.meta.$filler;!xr(i)||t.drawTime!=="beforeDatasetDraw"||qi(s.ctx,i,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const jr=(s,e)=>{let{boxHeight:t=e,boxWidth:i=e}=s;return s.usePointStyle&&(t=Math.min(t,e),i=s.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},rg=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class _r extends st{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=U(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=ee(i.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=jr(i,r);let d,h;t.font=n.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(o,r,l,c)+10):(h=this.maxHeight,d=this._fitCols(o,n,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],h=n+l;let u=e;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((p,x)=>{const b=i+t/2+r.measureText(p.text).width;(x===0||d[d.length-1]+b+2*l>o)&&(u+=h,d[d.length-(x>0?0:1)]=0,m+=h,f++),c[x]={left:0,top:m,row:f,width:b,height:n},d[d.length-1]+=b+l}),u}_fitCols(e,t,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],h=o-e;let u=l,f=0,m=0,p=0,x=0;return this.legendItems.forEach((b,j)=>{const{itemWidth:v,itemHeight:S}=og(i,t,r,b,n);j>0&&m+S+2*l>h&&(u+=f+l,d.push({width:f,height:m}),p+=f+l,x++,f=m=0),c[j]={left:p,top:m,col:x,width:v,height:S},f=Math.max(f,v),m+=S+l}),u+=f,d.push({width:f,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:r}}=this,o=Xt(r,this.left,this.width);if(this.isHorizontal()){let l=0,c=ne(i,this.left+n,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,c=ne(i,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+e+n,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+n}else{let l=0,c=ne(i,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,c=ne(i,this.top+e+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ki(e,this),this._draw(),Ni(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:r,labels:o}=e,l=q.color,c=Xt(e.rtl,this.left,this.width),d=ee(o.font),{padding:h}=o,u=d.size,f=u/2;let m;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:p,boxHeight:x,itemHeight:b}=jr(o,u),j=function(C,M,N){if(isNaN(p)||p<=0||isNaN(x)||x<0)return;n.save();const z=I(N.lineWidth,1);if(n.fillStyle=I(N.fillStyle,l),n.lineCap=I(N.lineCap,"butt"),n.lineDashOffset=I(N.lineDashOffset,0),n.lineJoin=I(N.lineJoin,"miter"),n.lineWidth=z,n.strokeStyle=I(N.strokeStyle,l),n.setLineDash(I(N.lineDash,[])),o.usePointStyle){const w={radius:x*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:z},g=c.xPlus(C,p/2),O=M+f;Do(n,w,g,O,o.pointStyleWidth&&p)}else{const w=M+Math.max((u-x)/2,0),g=c.leftForLtr(C,p),O=Ct(N.borderRadius);n.beginPath(),Object.values(O).some(L=>L!==0)?As(n,{x:g,y:w,w:p,h:x,radius:O}):n.rect(g,w,p,x),n.fill(),z!==0&&n.stroke()}n.restore()},v=function(C,M,N){Rt(n,N.text,C,M+b/2,d,{strikethrough:N.hidden,textAlign:c.textAlign(N.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?m={x:ne(r,this.left+h,this.right-i[0]),y:this.top+h+_,line:0}:m={x:this.left+h,y:ne(r,this.top+_+h,this.bottom-t[0].height),line:0},$o(this.ctx,e.textDirection);const k=b+h;this.legendItems.forEach((C,M)=>{n.strokeStyle=C.fontColor,n.fillStyle=C.fontColor;const N=n.measureText(C.text).width,z=c.textAlign(C.textAlign||(C.textAlign=o.textAlign)),w=p+f+N;let g=m.x,O=m.y;c.setWidth(this.width),S?M>0&&g+w+h>this.right&&(O=m.y+=k,m.line++,g=m.x=ne(r,this.left+h,this.right-i[m.line])):M>0&&O+k>this.bottom&&(g=m.x=g+t[m.line].width+h,m.line++,O=m.y=ne(r,this.top+_+h,this.bottom-t[m.line].height));const L=c.x(g);if(j(L,O,C),g=gu(z,g+p+f,S?g+w:this.right,e.rtl),v(c.x(g),O,C),S)m.x+=w+h;else if(typeof C.text!="string"){const T=d.lineHeight;m.y+=ml(C,T)+h}else m.y+=k}),Vo(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=ee(t.font),n=oe(t.padding);if(!t.display)return;const r=Xt(e.rtl,this.left,this.width),o=this.ctx,l=t.position,c=i.size/2,d=n.top+c;let h,u=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+d,u=ne(e.align,u,this.right-f);else{const p=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);h=d+ne(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=ne(l,u,u+f);o.textAlign=r.textAlign(An(l)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Rt(o,t.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,t=ee(e.font),i=oe(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,r;if(Je(e,this.left,this.right)&&Je(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(n=r[i],Je(e,n.left,n.left+n.width)&&Je(t,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!dg(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,r=rg(n,i);n&&!r&&U(t.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!r&&U(t.onHover,[e,i,this],this)}else i&&U(t.onClick,[e,i,this],this)}}function og(s,e,t,i,n){const r=lg(i,s,e,t),o=cg(n,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function lg(s,e,t,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(n).width}function cg(s,e,t){let i=s;return typeof e.text!="string"&&(i=ml(e,t)),i}function ml(s,e){const t=s.text?s.text.length:0;return e*t}function dg(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var hg={id:"legend",_element:_r,start(s,e,t){const i=s.legend=new _r({ctx:s.ctx,options:t,chart:s});re.configure(s,i,t),re.addBox(s,i)},stop(s){re.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const i=s.legend;re.configure(s,i,t),i.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const i=e.datasetIndex,n=t.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:n,color:r,useBorderRadius:o,borderRadius:l}}=s.legend.options;return s._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(t?0:void 0),h=oe(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Bn extends st{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=G(i.text)?i.text.length:1;this._padding=oe(i.padding);const r=n*ee(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:n,right:r,options:o}=this,l=o.align;let c=0,d,h,u;return this.isHorizontal()?(h=ne(l,i,r),u=t+e,d=r-i):(o.position==="left"?(h=i+e,u=ne(l,n,t),c=W*-.5):(h=r-e,u=ne(l,t,n),c=W*.5),d=n-t),{titleX:h,titleY:u,maxWidth:d,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=ee(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(r);Rt(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:d,textAlign:An(t.align),textBaseline:"middle",translation:[o,l]})}}function ug(s,e){const t=new Bn({ctx:s.ctx,options:e,chart:s});re.configure(s,t,e),re.addBox(s,t),s.titleBlock=t}var fg={id:"title",_element:Bn,start(s,e,t){ug(s,t)},stop(s){const e=s.titleBlock;re.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,t){const i=s.titleBlock;re.configure(s,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qs=new WeakMap;var mg={id:"subtitle",start(s,e,t){const i=new Bn({ctx:s.ctx,options:t,chart:s});re.configure(s,i,t),re.addBox(s,i),qs.set(s,i)},stop(s){re.removeBox(s,qs.get(s)),qs.delete(s)},beforeUpdate(s,e,t){const i=qs.get(s);re.configure(s,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ms={average(s){if(!s.length)return!1;let e,t,i=new Set,n=0,r=0;for(e=0,t=s.length;e<t;++e){const l=s[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),n+=c.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:n/r}},nearest(s,e){if(!s.length)return!1;let t=e.x,i=e.y,n=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=s.length;r<o;++r){const c=s[r].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),h=nn(e,d);h<n&&(n=h,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function Le(s,e){return e&&(G(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function Ge(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function pg(s,e){const{element:t,datasetIndex:i,index:n}=e,r=s.getDatasetMeta(i).controller,{label:o,value:l}=r.getLabelAndValue(n);return{chart:s,label:o,parsed:r.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:l,dataset:r.getDataset(),dataIndex:n,datasetIndex:i,element:t}}function kr(s,e){const t=s.chart.ctx,{body:i,footer:n,title:r}=s,{boxWidth:o,boxHeight:l}=e,c=ee(e.bodyFont),d=ee(e.titleFont),h=ee(e.footerFont),u=r.length,f=n.length,m=i.length,p=oe(e.padding);let x=p.height,b=0,j=i.reduce((_,k)=>_+k.before.length+k.lines.length+k.after.length,0);if(j+=s.beforeBody.length+s.afterBody.length,u&&(x+=u*d.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),j){const _=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=m*_+(j-m)*c.lineHeight+(j-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let v=0;const S=function(_){b=Math.max(b,t.measureText(_).width+v)};return t.save(),t.font=d.string,K(s.title,S),t.font=c.string,K(s.beforeBody.concat(s.afterBody),S),v=e.displayColors?o+2+e.boxPadding:0,K(i,_=>{K(_.before,S),K(_.lines,S),K(_.after,S)}),v=0,t.font=h.string,K(s.footer,S),t.restore(),b+=p.width,{width:b,height:x}}function gg(s,e){const{y:t,height:i}=e;return t<i/2?"top":t>s.height-i/2?"bottom":"center"}function xg(s,e,t,i){const{x:n,width:r}=i,o=t.caretSize+t.caretPadding;if(s==="left"&&n+r+o>e.width||s==="right"&&n-r-o<0)return!0}function bg(s,e,t,i){const{x:n,width:r}=t,{width:o,chartArea:{left:l,right:c}}=s;let d="center";return i==="center"?d=n<=(l+c)/2?"left":"right":n<=r/2?d="left":n>=o-r/2&&(d="right"),xg(d,s,e,t)&&(d="center"),d}function Nr(s,e,t){const i=t.yAlign||e.yAlign||gg(s,t);return{xAlign:t.xAlign||e.xAlign||bg(s,e,t,i),yAlign:i}}function vg(s,e){let{x:t,width:i}=s;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function yg(s,e,t){let{y:i,height:n}=s;return e==="top"?i+=t:e==="bottom"?i-=n+t:i-=n/2,i}function wr(s,e,t,i){const{caretSize:n,caretPadding:r,cornerRadius:o}=s,{xAlign:l,yAlign:c}=t,d=n+r,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:m}=Ct(o);let p=vg(e,l);const x=yg(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(h,f)+n:l==="right"&&(p+=Math.max(u,m)+n),{x:se(p,0,i.width-e.width),y:se(x,0,i.height-e.height)}}function Zs(s,e,t){const i=oe(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-i.right:s.x+i.left}function Sr(s){return Le([],Ge(s))}function jg(s,e,t){return pt(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Cr(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const pl={beforeTitle:Ye,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ye,beforeBody:Ye,beforeLabel:Ye,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return F(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ye,afterBody:Ye,beforeFooter:Ye,footer:Ye,afterFooter:Ye};function pe(s,e,t,i){const n=s[e].call(t,i);return typeof n>"u"?pl[e].call(t,i):n}class Pr extends st{static positioners=ms;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,r=new Uo(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=jg(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,n=pe(i,"beforeTitle",this,e),r=pe(i,"title",this,e),o=pe(i,"afterTitle",this,e);let l=[];return l=Le(l,Ge(n)),l=Le(l,Ge(r)),l=Le(l,Ge(o)),l}getBeforeBody(e,t){return Sr(pe(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return K(e,r=>{const o={before:[],lines:[],after:[]},l=Cr(i,r);Le(o.before,Ge(pe(l,"beforeLabel",this,r))),Le(o.lines,pe(l,"label",this,r)),Le(o.after,Ge(pe(l,"afterLabel",this,r))),n.push(o)}),n}getAfterBody(e,t){return Sr(pe(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=pe(i,"beforeFooter",this,e),r=pe(i,"footer",this,e),o=pe(i,"afterFooter",this,e);let l=[];return l=Le(l,Ge(n)),l=Le(l,Ge(r)),l=Le(l,Ge(o)),l}_createItems(e){const t=this._active,i=this.chart.data,n=[],r=[],o=[];let l=[],c,d;for(c=0,d=t.length;c<d;++c)l.push(pg(this.chart,t[c]));return e.filter&&(l=l.filter((h,u,f)=>e.filter(h,u,f,i))),e.itemSort&&(l=l.sort((h,u)=>e.itemSort(h,u,i))),K(l,h=>{const u=Cr(e.callbacks,h);n.push(pe(u,"labelColor",this,h)),r.push(pe(u,"labelPointStyle",this,h)),o.push(pe(u,"labelTextColor",this,h))}),this.labelColors=n,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let r,o=[];if(!n.length)this.opacity!==0&&(r={opacity:0});else{const l=ms[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=kr(this,i),d=Object.assign({},l,c),h=Nr(this.chart,i,d),u=wr(i,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:u.x,y:u.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const r=this.getCaretPosition(e,i,n);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:r}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:u}=Ct(l),{x:f,y:m}=e,{width:p,height:x}=t;let b,j,v,S,_,k;return r==="center"?(_=m+x/2,n==="left"?(b=f,j=b-o,S=_+o,k=_-o):(b=f+p,j=b+o,S=_-o,k=_+o),v=b):(n==="left"?j=f+Math.max(c,h)+o:n==="right"?j=f+p-Math.max(d,u)-o:j=this.caretX,r==="top"?(S=m,_=S-o,b=j-o,v=j+o):(S=m+x,_=S+o,b=j+o,v=j-o),k=S),{x1:b,x2:j,x3:v,y1:S,y2:_,y3:k}}drawTitle(e,t,i){const n=this.title,r=n.length;let o,l,c;if(r){const d=Xt(i.rtl,this.x,this.width);for(e.x=Zs(this,i.titleAlign,i),t.textAlign=d.textAlign(i.titleAlign),t.textBaseline="middle",o=ee(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,c=0;c<r;++c)t.fillText(n[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===r&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,n,r){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:d}=r,h=ee(r.bodyFont),u=Zs(this,"left",r),f=n.x(u),m=c<h.lineHeight?(h.lineHeight-c)/2:0,p=t.y+m;if(r.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=n.leftForLtr(f,d)+d/2,j=p+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,rn(e,x,b,j),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,rn(e,x,b,j)}else{e.lineWidth=B(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=n.leftForLtr(f,d),b=n.leftForLtr(n.xPlus(f,1),d-2),j=Ct(o.borderRadius);Object.values(j).some(v=>v!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,As(e,{x,y:p,w:d,h:c,radius:j}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),As(e,{x:b,y:p+1,w:d-2,h:c-2,radius:j}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(x,p,d,c),e.strokeRect(x,p,d,c),e.fillStyle=o.backgroundColor,e.fillRect(b,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=i,u=ee(i.bodyFont);let f=u.lineHeight,m=0;const p=Xt(i.rtl,this.x,this.width),x=function(N){t.fillText(N,p.x(e.x+m),e.y+f/2),e.y+=f+r},b=p.textAlign(o);let j,v,S,_,k,C,M;for(t.textAlign=o,t.textBaseline="middle",t.font=u.string,e.x=Zs(this,b,i),t.fillStyle=i.bodyColor,K(this.beforeBody,x),m=l&&b!=="right"?o==="center"?d/2+h:d+2+h:0,_=0,C=n.length;_<C;++_){for(j=n[_],v=this.labelTextColors[_],t.fillStyle=v,K(j.before,x),S=j.lines,l&&S.length&&(this._drawColorBox(t,e,_,p,i),f=Math.max(u.lineHeight,c)),k=0,M=S.length;k<M;++k)x(S[k]),f=u.lineHeight;K(j.after,x)}m=0,f=u.lineHeight,K(this.afterBody,x),e.y-=r}drawFooter(e,t,i){const n=this.footer,r=n.length;let o,l;if(r){const c=Xt(i.rtl,this.x,this.width);for(e.x=Zs(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",o=ee(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,l=0;l<r;++l)t.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:r,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:h}=i,{topLeft:u,topRight:f,bottomLeft:m,bottomRight:p}=Ct(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(l+u,c),o==="top"&&this.drawCaret(e,t,i,n),t.lineTo(l+d-f,c),t.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&r==="right"&&this.drawCaret(e,t,i,n),t.lineTo(l+d,c+h-p),t.quadraticCurveTo(l+d,c+h,l+d-p,c+h),o==="bottom"&&this.drawCaret(e,t,i,n),t.lineTo(l+m,c+h),t.quadraticCurveTo(l,c+h,l,c+h-m),o==="center"&&r==="left"&&this.drawCaret(e,t,i,n),t.lineTo(l,c+u),t.quadraticCurveTo(l,c,l+u,c),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y;if(n||r){const o=ms[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=kr(this,e),c=Object.assign({},o,this._size),d=Nr(t,e,c),h=wr(e,c,d,t);(n._to!==h.x||r._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=oe(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,n,t),$o(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Vo(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),r=!ai(i,n),o=this._positionChanged(n,t);(r||o)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),l=this._positionChanged(o,e),c=t||!ai(o,r)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,n){const r=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:n,options:r}=this,o=ms[r.position].call(this,e,t);return o!==!1&&(i!==o.x||n!==o.y)}}var _g={id:"tooltip",_element:Pr,positioners:ms,afterInit(s,e,t){t&&(s.tooltip=new Pr({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},kg=Object.freeze({__proto__:null,Colors:Tp,Decimation:Fp,Filler:ag,Legend:hg,SubTitle:mg,Title:fg,Tooltip:_g});const Ng=(s,e,t,i)=>(typeof e=="string"?(t=s.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function wg(s,e,t,i){const n=s.indexOf(e);if(n===-1)return Ng(s,e,t,i);const r=s.lastIndexOf(e);return n!==r?t:n}const Sg=(s,e)=>s===null?null:se(Math.round(s),0,e);function Mr(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class Cg extends Lt{static id="category";static defaults={ticks:{callback:Mr}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:n,label:r}of t)i[n]===r&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(F(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:wg(i,e,I(t,e),this._addedLabels),Sg(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)n.push({value:o});return n}getLabelForValue(e){return Mr.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Pg(s,e){const t=[],{bounds:n,step:r,min:o,max:l,precision:c,count:d,maxTicks:h,maxDigits:u,includeBounds:f}=s,m=r||1,p=h-1,{min:x,max:b}=e,j=!F(o),v=!F(l),S=!F(d),_=(b-x)/(u+1);let k=ka((b-x)/p/m)*m,C,M,N,z;if(k<1e-14&&!j&&!v)return[{value:x},{value:b}];z=Math.ceil(b/k)-Math.floor(x/k),z>p&&(k=ka(z*k/p/m)*m),F(c)||(C=Math.pow(10,c),k=Math.ceil(k*C)/C),n==="ticks"?(M=Math.floor(x/k)*k,N=Math.ceil(b/k)*k):(M=x,N=b),j&&v&&r&&cu((l-o)/r,k/1e3)?(z=Math.round(Math.min((l-o)/k,h)),k=(l-o)/z,M=o,N=l):S?(M=j?o:M,N=v?l:N,z=d-1,k=(N-M)/z):(z=(N-M)/k,bs(z,Math.round(z),k/1e3)?z=Math.round(z):z=Math.ceil(z));const w=Math.max(Na(k),Na(M));C=Math.pow(10,F(c)?w:c),M=Math.round(M*C)/C,N=Math.round(N*C)/C;let g=0;for(j&&(f&&M!==o?(t.push({value:o}),M<o&&g++,bs(Math.round((M+g*k)*C)/C,o,Ar(o,_,s))&&g++):M<o&&g++);g<z;++g){const O=Math.round((M+g*k)*C)/C;if(v&&O>l)break;t.push({value:O})}return v&&f&&N!==l?t.length&&bs(t[t.length-1].value,l,Ar(l,_,s))?t[t.length-1].value=l:t.push({value:l}):(!v||N===l)&&t.push({value:N}),t}function Ar(s,e,{horizontal:t,minRotation:i}){const n=De(i),r=(t?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+s).length;return Math.min(e/r,o)}class fi extends Lt{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return F(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this;const o=c=>n=t?n:c,l=c=>r=i?r:c;if(e){const c=Ve(n),d=Ve(r);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(n===r){let c=r===0?1:Math.abs(r*.05);l(r+c),e||o(n-c)}this.min=n,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=Pg(n,r);return e.bounds==="ticks"&&No(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Ts(e,this.chart.options.locale,this.options.ticks.format)}}class Mg extends fi{static id="linear";static defaults={ticks:{callback:_i.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=J(e)?e:0,this.max=J(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=De(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const zs=s=>Math.floor(rt(s)),jt=(s,e)=>Math.pow(10,zs(s)+e);function Or(s){return s/Math.pow(10,zs(s))===1}function zr(s,e,t){const i=Math.pow(10,t),n=Math.floor(s/i);return Math.ceil(e/i)-n}function Ag(s,e){const t=e-s;let i=zs(t);for(;zr(s,e,i)>10;)i++;for(;zr(s,e,i)<10;)i--;return Math.min(i,zs(s))}function Og(s,{min:e,max:t}){e=Ne(s.min,e);const i=[],n=zs(e);let r=Ag(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const l=Math.pow(10,r),c=n>r?Math.pow(10,n):0,d=Math.round((e-c)*o)/o,h=Math.floor((e-c)/l/10)*l*10;let u=Math.floor((d-h)/Math.pow(10,r)),f=Ne(s.min,Math.round((c+h+u*Math.pow(10,r))*o)/o);for(;f<t;)i.push({value:f,major:Or(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),f=Math.round((c+h+u*Math.pow(10,r))*o)/o;const m=Ne(s.max,f);return i.push({value:m,major:Or(m),significand:u}),i}class zg extends Lt{static id="logarithmic";static defaults={ticks:{callback:_i.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=fi.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return J(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=J(e)?Math.max(0,e):null,this.max=J(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!J(this._userMin)&&(this.min=e===jt(this.min,0)?jt(this.min,-1):jt(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,n=this.max;const r=l=>i=e?i:l,o=l=>n=t?n:l;i===n&&(i<=0?(r(1),o(10)):(r(jt(i,-1)),o(jt(n,1)))),i<=0&&r(jt(n,-1)),n<=0&&o(jt(i,1)),this.min=i,this.max=n}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Og(t,this);return e.bounds==="ticks"&&No(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Ts(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=rt(e),this._valueRange=rt(this.max)-rt(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(rt(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function un(s){const e=s.ticks;if(e.display&&s.display){const t=oe(e.backdropPadding);return I(e.font&&e.font.size,q.font.size)+t.height}return 0}function Dg(s,e,t){return t=G(t)?t:[t],{w:Su(s,e.string,t),h:t.length*e.lineHeight}}function Dr(s,e,t,i,n){return s===i||s===n?{start:e-t/2,end:e+t/2}:s<i||s>n?{start:e-t,end:e}:{start:e,end:e+t}}function Rg(s){const e={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},t=Object.assign({},e),i=[],n=[],r=s._pointLabels.length,o=s.options.pointLabels,l=o.centerPointLabels?W/r:0;for(let c=0;c<r;c++){const d=o.setContext(s.getPointLabelContext(c));n[c]=d.padding;const h=s.getPointPosition(c,s.drawingArea+n[c],l),u=ee(d.font),f=Dg(s.ctx,u,s._pointLabels[c]);i[c]=f;const m=ae(s.getIndexAngle(c)+l),p=Math.round(Pn(m)),x=Dr(p,h.x,f.w,0,180),b=Dr(p,h.y,f.h,90,270);Tg(t,e,m,x,b)}s.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),s._pointLabelItems=Ig(s,i,n)}function Tg(s,e,t,i,n){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let l=0,c=0;i.start<e.l?(l=(e.l-i.start)/r,s.l=Math.min(s.l,e.l-l)):i.end>e.r&&(l=(i.end-e.r)/r,s.r=Math.max(s.r,e.r+l)),n.start<e.t?(c=(e.t-n.start)/o,s.t=Math.min(s.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/o,s.b=Math.max(s.b,e.b+c))}function Eg(s,e,t){const i=s.drawingArea,{extra:n,additionalAngle:r,padding:o,size:l}=t,c=s.getPointPosition(e,i+n+o,r),d=Math.round(Pn(ae(c.angle+Q))),h=$g(c.y,l.h,d),u=Fg(d),f=Bg(c.x,l.w,u);return{visible:!0,x:c.x,y:h,textAlign:u,left:f,top:h,right:f+l.w,bottom:h+l.h}}function Lg(s,e){if(!e)return!0;const{left:t,top:i,right:n,bottom:r}=s;return!(et({x:t,y:i},e)||et({x:t,y:r},e)||et({x:n,y:i},e)||et({x:n,y:r},e))}function Ig(s,e,t){const i=[],n=s._pointLabels.length,r=s.options,{centerPointLabels:o,display:l}=r.pointLabels,c={extra:un(r)/2,additionalAngle:o?W/n:0};let d;for(let h=0;h<n;h++){c.padding=t[h],c.size=e[h];const u=Eg(s,h,c);i.push(u),l==="auto"&&(u.visible=Lg(u,d),u.visible&&(d=u))}return i}function Fg(s){return s===0||s===180?"center":s<180?"left":"right"}function Bg(s,e,t){return t==="right"?s-=e:t==="center"&&(s-=e/2),s}function $g(s,e,t){return t===90||t===270?s-=e/2:(t>270||t<90)&&(s-=e),s}function Vg(s,e,t){const{left:i,top:n,right:r,bottom:o}=t,{backdropColor:l}=e;if(!F(l)){const c=Ct(e.borderRadius),d=oe(e.backdropPadding);s.fillStyle=l;const h=i-d.left,u=n-d.top,f=r-i+d.width,m=o-n+d.height;Object.values(c).some(p=>p!==0)?(s.beginPath(),As(s,{x:h,y:u,w:f,h:m,radius:c}),s.fill()):s.fillRect(h,u,f,m)}}function Wg(s,e){const{ctx:t,options:{pointLabels:i}}=s;for(let n=e-1;n>=0;n--){const r=s._pointLabelItems[n];if(!r.visible)continue;const o=i.setContext(s.getPointLabelContext(n));Vg(t,o,r);const l=ee(o.font),{x:c,y:d,textAlign:h}=r;Rt(t,s._pointLabels[n],c,d+l.lineHeight/2,l,{color:o.color,textAlign:h,textBaseline:"middle"})}}function gl(s,e,t,i){const{ctx:n}=s;if(t)n.arc(s.xCenter,s.yCenter,e,0,X);else{let r=s.getPointPosition(0,e);n.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=s.getPointPosition(o,e),n.lineTo(r.x,r.y)}}function Hg(s,e,t,i,n){const r=s.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!i||!l||!c||t<0||(r.save(),r.strokeStyle=l,r.lineWidth=c,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),gl(s,t,o,i),r.closePath(),r.stroke(),r.restore())}function Kg(s,e,t){return pt(s,{label:t,index:e,type:"pointLabel"})}class Yg extends fi{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_i.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=oe(un(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=J(e)&&!isNaN(e)?e:0,this.max=J(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/un(this.options))}generateTickLabels(e){fi.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const n=U(this.options.pointLabels.callback,[t,i],this);return n||n===0?n:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Rg(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,n){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,n))}getIndexAngle(e){const t=X/(this._pointLabels.length||1),i=this.options.startAngle||0;return ae(e*t+De(i))}getDistanceFromCenterForValue(e){if(F(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(F(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return Kg(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const n=this.getIndexAngle(e)-Q+i;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter,angle:n}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:n,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),gl(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:n,border:r}=t,o=this._pointLabels.length;let l,c,d;if(t.pointLabels.display&&Wg(this,o),n.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(u),m=n.setContext(f),p=r.setContext(f);Hg(this,m,c,o,p)}}),i.display){for(e.save(),l=o-1;l>=0;l--){const h=i.setContext(this.getPointLabelContext(l)),{color:u,lineWidth:f}=h;!f||!u||(e.lineWidth=f,e.strokeStyle=u,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const d=i.setContext(this.getContext(c)),h=ee(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=h.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const u=oe(d.backdropPadding);e.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}Rt(e,l.label,0,-r,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}const Mi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},be=Object.keys(Mi);function Rr(s,e){return s-e}function Tr(s,e){if(F(e))return null;const t=s._adapter,{parser:i,round:n,isoWeekday:r}=s._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),J(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(n&&(o=n==="week"&&(qt(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,n)),+o)}function Er(s,e,t,i){const n=be.length;for(let r=be.indexOf(s);r<n-1;++r){const o=Mi[be[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(l*o.size))<=i)return be[r]}return be[n-1]}function Ug(s,e,t,i,n){for(let r=be.length-1;r>=be.indexOf(t);r--){const o=be[r];if(Mi[o].common&&s._adapter.diff(n,i,o)>=e-1)return o}return be[t?be.indexOf(t):0]}function Xg(s){for(let e=be.indexOf(s)+1,t=be.length;e<t;++e)if(Mi[be[e]].common)return be[e]}function Lr(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:i,hi:n}=Mn(t,e),r=t[i]>=e?t[i]:t[n];s[r]=!0}}function Gg(s,e,t,i){const n=s._adapter,r=+n.startOf(e[0].value,i),o=e[e.length-1].value;let l,c;for(l=r;l<=o;l=+n.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function Ir(s,e,t){const i=[],n={},r=e.length;let o,l;for(o=0;o<r;++o)l=e[o],n[l]=o,i.push({value:l,major:!1});return r===0||!t?i:Gg(s,i,n,t)}class fn extends Lt{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new qf._date(e.adapters.date);n.init(t),xs(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Tr(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=J(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),r=J(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,r-1),this.max=Math.max(n+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const r=this.min,o=this.max,l=fu(n,r,o);return this._unit=t.unit||(i.autoSkip?Er(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):Ug(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Xg(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),Ir(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,n,r;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=se(t,0,o),i=se(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,r=n.time,o=r.unit||Er(r.minUnit,t,i,this._getLabelCapacity(t)),l=I(n.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,d=qt(c)||c===!0,h={};let u=t,f,m;if(d&&(u=+e.startOf(u,"isoWeek",c)),u=+e.startOf(u,d?"day":o),e.diff(i,t,o)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+o);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(f=u,m=0;f<i;f=+e.add(f,l,o),m++)Lr(h,f,p);return(f===i||n.bounds==="ticks"||m===1)&&Lr(h,f,p),Object.keys(h).sort(Rr).map(x=>+x)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,o=t||n[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,n){const r=this.options,o=r.ticks.callback;if(o)return U(o,[e,t,i],this);const l=r.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],u=d&&l[d],f=i[t],m=d&&u&&f&&f.major;return this._adapter.format(e,n||(m?u:h))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=De(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:i*r+l*o,h:i*o+l*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Ir(this,[e],this._majorUnit),n),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,i=n.length;t<i;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(Tr(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Co(e.sort(Rr))}}function Js(s,e,t){let i=0,n=s.length-1,r,o,l,c;t?(e>=s[i].pos&&e<=s[n].pos&&({lo:i,hi:n}=Qe(s,"pos",e)),{pos:r,time:l}=s[i],{pos:o,time:c}=s[n]):(e>=s[i].time&&e<=s[n].time&&({lo:i,hi:n}=Qe(s,"time",e)),{time:r,pos:l}=s[i],{time:o,pos:c}=s[n]);const d=o-r;return d?l+(c-l)*(e-r)/d:l}class qg extends fn{static id="timeseries";static defaults=fn.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Js(t,this.min),this._tableRange=Js(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],r=[];let o,l,c,d,h;for(o=0,l=e.length;o<l;++o)d=e[o],d>=t&&d<=i&&n.push(d);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,l=n.length;o<l;++o)h=n[o+1],c=n[o-1],d=n[o],Math.round((h+c)/2)!==d&&r.push({time:d,pos:o/(l-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((n,r)=>n-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Js(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Js(this._table,i*this._tableRange+this._minPos,!0)}}var Zg=Object.freeze({__proto__:null,CategoryScale:Cg,LinearScale:Mg,LogarithmicScale:zg,RadialLinearScale:Yg,TimeScale:fn,TimeSeriesScale:qg});const Jg=[Gf,Pp,kg,Zg];hi.register(...Jg);const Ue="/api/monitor",Ht=30,Y=s=>s==null?"-":Number(s).toLocaleString("ko-KR"),Kt=s=>s==null?"-":"₩"+Number(s).toLocaleString("ko-KR"),_t=s=>s?new Date(s).toLocaleString("ko-KR",{timeZone:"Asia/Seoul",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",kt=({platform:s})=>a.jsx("span",{className:`monitor-platform-badge ${s}`,children:s}),Qg=({isLive:s})=>a.jsx("span",{className:`monitor-status-badge ${s?"live":"offline"}`,children:s?"LIVE":"종료"}),Ji=({type:s})=>a.jsx("span",{className:`monitor-type-badge ${s}`,children:s==="broadcaster"?"방송자":s==="viewer"?"시청자":s}),ex=()=>{const[s,e]=y.useState(null),[t,i]=y.useState("broadcasts"),[n,r]=y.useState(!0),[o,l]=y.useState(null),[c,d]=y.useState({data:[],pagination:{}}),[h,u]=y.useState({data:[],pagination:{}}),[f,m]=y.useState({data:[],pagination:{}}),[p,x]=y.useState({data:[],pagination:{}}),[b,j]=y.useState({data:[],pagination:{}}),[v,S]=y.useState({data:[],pagination:{}}),[_,k]=y.useState("all"),[C,M]=y.useState("all"),[N,z]=y.useState("all"),[w,g]=y.useState(!1),[O,L]=y.useState("all"),[T,D]=y.useState({broadcasts:1,persons:1,events:1,segments:1,categories:1,engagement:1}),P=y.useRef(null),E=y.useRef(null),H=y.useRef(null),$=y.useRef(null),[ue,fe]=y.useState(!1),[V,Ke]=y.useState(null),[Pe,me]=y.useState(!1),Me=async()=>{try{const R=await(await fetch(`${Ue}/stats`)).json();e(R)}catch(A){console.error("Failed to load stats:",A)}},Es=async()=>{try{const R=await(await fetch(`${Ue}/stats/timeseries?hours=24`)).json(),te=[...new Set(R.viewers.map(ce=>ce.hour))].sort(),le=te.map(ce=>new Date(ce).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})),xt=te.map(ce=>{const ke=R.viewers.find(Ae=>Ae.hour===ce&&Ae.platform==="soop");return ke?ke.total_viewers:0}),xl=te.map(ce=>{const ke=R.viewers.find(Ae=>Ae.hour===ce&&Ae.platform==="chzzk");return ke?ke.total_viewers:0});H.current&&H.current.destroy(),P.current&&(H.current=new hi(P.current,{type:"line",data:{labels:le,datasets:[{label:"SOOP",data:xt,borderColor:"rgba(26, 75, 204, 1)",backgroundColor:"rgba(26, 75, 204, 0.1)",fill:!0,tension:.3,pointRadius:2},{label:"Chzzk",data:xl,borderColor:"rgba(0, 214, 126, 1)",backgroundColor:"rgba(0, 214, 126, 0.1)",fill:!0,tension:.3,pointRadius:2}]},options:ts}));const Oi=[...new Set(R.events.map(ce=>ce.hour))].sort(),bl=Oi.map(ce=>new Date(ce).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})),vl=Oi.map(ce=>{const ke=R.events.find(Ae=>Ae.hour===ce&&Ae.event_type==="chat");return ke?ke.count:0}),yl=Oi.map(ce=>{const ke=R.events.find(Ae=>Ae.hour===ce&&Ae.event_type==="donation");return ke?ke.count:0});$.current&&$.current.destroy(),E.current&&($.current=new hi(E.current,{type:"bar",data:{labels:bl,datasets:[{label:"채팅",data:vl,backgroundColor:"rgba(59, 130, 246, 0.7)",borderRadius:4},{label:"후원",data:yl,backgroundColor:"rgba(255, 165, 2, 0.7)",borderRadius:4}]},options:ts}))}catch(A){console.error("Failed to load timeseries:",A)}},ts={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"var(--text-muted)",font:{size:11},padding:10,usePointStyle:!0}}},scales:{x:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"var(--text-muted)",font:{size:10}}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"var(--text-muted)",font:{size:10}}}}},ss=async(A=1)=>{try{const le=await(await fetch(`${Ue}/broadcasts?page=${A}&limit=${Ht}&live_only=${_==="live"?"true":"false"}`)).json();d(le),D(xt=>({...xt,broadcasts:A}))}catch(R){console.error("Failed to load broadcasts:",R)}},_e=async(A=1)=>{try{const te=await(await fetch(`${Ue}/persons?page=${A}&limit=${Ht}&type=${C}`)).json();u(te),D(le=>({...le,persons:A}))}catch(R){console.error("Failed to load persons:",R)}},is=async(A=1)=>{try{let R=N;N==="all"&&!w&&(R="no_chat");const le=await(await fetch(`${Ue}/events?page=${A}&limit=${Ht}&type=${R}`)).json();m(le),D(xt=>({...xt,events:A}))}catch(R){console.error("Failed to load events:",R)}},It=async(A=1)=>{try{const te=await(await fetch(`${Ue}/segments?page=${A}&limit=${Ht}`)).json();x(te),D(le=>({...le,segments:A}))}catch(R){console.error("Failed to load segments:",R)}},ns=async(A=1)=>{try{const te=await(await fetch(`${Ue}/categories?page=${A}&limit=${Ht}&platform=${O}`)).json();j(te),D(le=>({...le,categories:A}))}catch(R){console.error("Failed to load categories:",R)}},Ft=async(A=1)=>{try{const te=await(await fetch(`${Ue}/engagement?page=${A}&limit=${Ht}`)).json();S(te),D(le=>({...le,engagement:A}))}catch(R){console.error("Failed to load engagement:",R)}},Ls=async A=>{fe(!0),me(!0);try{const te=await(await fetch(`${Ue}/persons/${A}`)).json();Ke(te)}catch(R){console.error("Failed to load person:",R)}me(!1)},Ai=async()=>{r(!0),await Promise.all([Me(),Es(),ss(1),_e(1),is(1),It(1),ns(1),Ft(1)]),l(new Date),r(!1)};y.useEffect(()=>{Ai();const A=setInterval(Ai,300*1e3);return()=>clearInterval(A)},[]),y.useEffect(()=>{ss(1)},[_]),y.useEffect(()=>{_e(1)},[C]),y.useEffect(()=>{is(1)},[N,w]),y.useEffect(()=>{ns(1)},[O]);const Bt=({type:A,pagination:R,onPageChange:te})=>{if(!R.total)return null;const le=(R.page-1)*R.limit+1,xt=Math.min(R.page*R.limit,R.total);return a.jsxs("div",{className:"monitor-pagination",children:[a.jsxs("span",{className:"monitor-pagination-info",children:[Y(le)," - ",Y(xt)," / ",Y(R.total)]}),a.jsxs("div",{className:"monitor-pagination-buttons",children:[a.jsx("button",{className:"monitor-page-btn",disabled:R.page<=1,onClick:()=>te(T[A]-1),children:"이전"}),a.jsx("button",{className:"monitor-page-btn",disabled:R.page>=R.totalPages,onClick:()=>te(T[A]+1),children:"다음"})]})]})};return a.jsxs("div",{className:"admin-monitor",children:[a.jsxs("div",{className:"monitor-header",children:[a.jsxs("div",{className:"monitor-header-left",children:[a.jsx(bi,{size:24}),a.jsx("h2",{children:"스트리밍 데이터 모니터"})]}),a.jsxs("div",{className:"monitor-header-right",children:[o&&a.jsxs("span",{className:"monitor-last-updated",children:["마지막 업데이트: ",o.toLocaleTimeString("ko-KR")]}),a.jsxs("button",{className:"monitor-refresh-btn",onClick:Ai,disabled:n,children:[a.jsx(he,{size:16,className:n?"spinning":""}),"새로고침"]})]})]}),a.jsxs("div",{className:"monitor-stats-grid",children:[a.jsxs("div",{className:"monitor-stat-card",title:"시청자 50명 이상 라이브 방송 수",children:[a.jsx("div",{className:"monitor-stat-icon red",children:a.jsx(vn,{size:24})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"50명+ 라이브"}),a.jsx("div",{className:"value",children:s?`${Y(s.liveBroadcasts)}개`:"-"}),a.jsxs("div",{className:"stat-sub",children:["👥 ",s?`${Y(s.totalViewers)}명`:"-"]})]})]}),a.jsxs("div",{className:"monitor-stat-card soop",title:"SOOP 플랫폼",children:[a.jsx("div",{className:"monitor-stat-icon",style:{background:"rgba(26, 75, 204, 0.2)"},children:a.jsx("img",{src:"/assets/logos/soop.png",alt:"SOOP",width:28,height:28})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"SOOP"}),a.jsxs("div",{className:"value",children:[s?.platforms?.soop?.broadcasts||0,"개"]}),a.jsxs("div",{className:"stat-sub",children:["👥 ",Y(s?.platforms?.soop?.viewers||0),"명"]})]})]}),a.jsxs("div",{className:"monitor-stat-card chzzk",title:"Chzzk 플랫폼",children:[a.jsx("div",{className:"monitor-stat-icon",style:{background:"rgba(0, 214, 126, 0.2)"},children:a.jsx("img",{src:"/assets/logos/chzzk.png",alt:"Chzzk",width:28,height:28})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"Chzzk"}),a.jsxs("div",{className:"value",children:[s?.platforms?.chzzk?.broadcasts||0,"개"]}),a.jsxs("div",{className:"stat-sub",children:["👥 ",Y(s?.platforms?.chzzk?.viewers||0),"명"]})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"넥슨 게임 SOOP 방송",children:[a.jsx("div",{className:"monitor-stat-icon",style:{background:"rgba(255, 165, 2, 0.2)"},children:a.jsx("img",{src:"/assets/logos/soop.png",alt:"SOOP",width:20,height:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"넥슨(숲)"}),a.jsxs("div",{className:"value",children:[s?.nexon?.soop?.broadcasts||0,"개"]}),a.jsxs("div",{className:"stat-sub",children:["👥 ",Y(s?.nexon?.soop?.viewers||0),"명"]})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"넥슨 게임 Chzzk 방송",children:[a.jsx("div",{className:"monitor-stat-icon",style:{background:"rgba(255, 165, 2, 0.2)"},children:a.jsx("img",{src:"/assets/logos/chzzk.png",alt:"Chzzk",width:20,height:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"넥슨(치지직)"}),a.jsxs("div",{className:"value",children:[s?.nexon?.chzzk?.broadcasts||0,"개"]}),a.jsxs("div",{className:"stat-sub",children:["👥 ",Y(s?.nexon?.chzzk?.viewers||0),"명"]})]})]})]}),a.jsxs("div",{className:"monitor-stats-grid secondary",children:[a.jsxs("div",{className:"monitor-stat-card",title:"DB에 등록된 스트리머 + 시청자 수",children:[a.jsx("div",{className:"monitor-stat-icon green",children:a.jsx(ge,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"등록 인원"}),a.jsx("div",{className:"value",children:Y(s?.totalPersons)})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"수집된 후원 이벤트의 총 금액",children:[a.jsx("div",{className:"monitor-stat-icon yellow",children:a.jsx(Ce,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"총 후원액"}),a.jsx("div",{className:"value",children:Kt(s?.totalDonations)})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"채팅/후원/구독/팔로우 등 수집된 이벤트 수",children:[a.jsx("div",{className:"monitor-stat-icon purple",children:a.jsx(lo,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"이벤트"}),a.jsx("div",{className:"value",children:Y(s?.eventCount)})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"방송 중 카테고리 변경 구간 기록 수",children:[a.jsx("div",{className:"monitor-stat-icon cyan",children:a.jsx(He,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"세그먼트"}),a.jsx("div",{className:"value",children:Y(s?.segmentCount)})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"5분마다 기록하는 시청자 수 스냅샷",children:[a.jsx("div",{className:"monitor-stat-icon purple",children:a.jsx(we,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"스냅샷"}),a.jsx("div",{className:"value",children:Y(s?.snapshotCount)})]})]}),a.jsxs("div",{className:"monitor-stat-card",title:"시청자-채널 참여 통계 수",children:[a.jsx("div",{className:"monitor-stat-icon cyan",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"monitor-stat-content",children:[a.jsx("h3",{children:"참여 기록"}),a.jsx("div",{className:"value",children:Y(s?.engagementCount)})]})]})]}),a.jsxs("div",{className:"monitor-charts-section",children:[a.jsxs("div",{className:"monitor-chart-card",children:[a.jsxs("h3",{children:[a.jsx(we,{size:16})," 시청자 추이 (24시간)"]}),a.jsx("div",{className:"monitor-chart-container",children:a.jsx("canvas",{ref:P})})]}),a.jsxs("div",{className:"monitor-chart-card",children:[a.jsxs("h3",{children:[a.jsx(Mt,{size:16})," 이벤트 추이 (24시간)"]}),a.jsx("div",{className:"monitor-chart-container",children:a.jsx("canvas",{ref:E})})]})]}),a.jsx("div",{className:"monitor-tabs",children:[{id:"broadcasts",label:"방송 목록"},{id:"persons",label:"인원 목록"},{id:"engagement",label:"참여 기록"},{id:"events",label:"이벤트"},{id:"segments",label:"세그먼트"},{id:"categories",label:"카테고리"}].map(A=>a.jsx("button",{className:`monitor-tab-btn ${t===A.id?"active":""}`,onClick:()=>i(A.id),children:A.label},A.id))}),a.jsxs("div",{className:"monitor-table-container",children:[t==="broadcasts"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"monitor-table-header",children:[a.jsx("span",{className:"monitor-table-title",children:"방송 목록"}),a.jsxs("select",{className:"monitor-filter",value:_,onChange:A=>k(A.target.value),children:[a.jsx("option",{value:"all",children:"전체"}),a.jsx("option",{value:"live",children:"라이브만"})]})]}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"닉네임"}),a.jsx("th",{children:"제목"}),a.jsx("th",{children:"카테고리"}),a.jsx("th",{children:"시청자"}),a.jsx("th",{children:"최고"}),a.jsx("th",{children:"후원액"}),a.jsx("th",{children:"상태"})]})}),a.jsx("tbody",{children:c.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"monitor-empty",children:"데이터가 없습니다"})}):c.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{className:A.broadcaster_person_id?"monitor-clickable":"",onClick:()=>A.broadcaster_person_id&&Ls(A.broadcaster_person_id),children:A.broadcaster_nickname||"-"}),a.jsx("td",{className:"monitor-truncate",title:A.title,children:A.title||"-"}),a.jsx("td",{children:A.category_name||"-"}),a.jsx("td",{className:"monitor-number",children:Y(A.current_viewer_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.peak_viewer_count)}),a.jsx("td",{className:"monitor-number",children:Kt(A.total_donation_amount)}),a.jsx("td",{children:a.jsx(Qg,{isLive:A.is_live})})]},R))})]})}),a.jsx(Bt,{type:"broadcasts",pagination:c.pagination||{},onPageChange:ss})]}),t==="persons"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"monitor-table-header",children:[a.jsx("span",{className:"monitor-table-title",children:"인원 목록"}),a.jsxs("select",{className:"monitor-filter",value:C,onChange:A=>M(A.target.value),children:[a.jsx("option",{value:"all",children:"전체"}),a.jsx("option",{value:"broadcaster",children:"방송자"}),a.jsx("option",{value:"viewer",children:"시청자"})]})]}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"닉네임"}),a.jsx("th",{children:"타입"}),a.jsx("th",{children:"팔로워"}),a.jsx("th",{children:"채팅수"}),a.jsx("th",{children:"후원횟수"}),a.jsx("th",{children:"후원액"}),a.jsx("th",{children:"마지막 활동"})]})}),a.jsx("tbody",{children:h.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"monitor-empty",children:"데이터가 없습니다"})}):h.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{className:"monitor-clickable",onClick:()=>Ls(A.id),children:A.nickname||"-"}),a.jsx("td",{children:a.jsx(Ji,{type:A.person_type})}),a.jsx("td",{className:"monitor-number",children:Y(A.follower_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.total_chat_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.total_donation_count)}),a.jsx("td",{className:"monitor-number",children:Kt(A.total_donation_amount)}),a.jsx("td",{children:_t(A.last_seen_at)})]},R))})]})}),a.jsx(Bt,{type:"persons",pagination:h.pagination||{},onPageChange:_e})]}),t==="engagement"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"monitor-table-header",children:a.jsx("span",{className:"monitor-table-title",children:"참여 기록"})}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"시청자"}),a.jsx("th",{children:"방송자"}),a.jsx("th",{children:"채팅수"}),a.jsx("th",{children:"후원횟수"}),a.jsx("th",{children:"후원액"}),a.jsx("th",{children:"카테고리"}),a.jsx("th",{children:"마지막 참여"})]})}),a.jsx("tbody",{children:v.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"monitor-empty",children:"데이터가 없습니다"})}):v.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{className:"monitor-clickable",onClick:()=>Ls(A.viewer_person_id),children:A.viewer_nickname||"-"}),a.jsx("td",{className:"monitor-clickable",onClick:()=>Ls(A.broadcaster_person_id),children:A.broadcaster_nickname||"-"}),a.jsx("td",{className:"monitor-number",children:Y(A.chat_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.donation_count)}),a.jsx("td",{className:"monitor-number",children:Kt(A.donation_amount)}),a.jsx("td",{title:A.categories,children:A.category_count>0?`${A.category_count}개`:"-"}),a.jsx("td",{children:_t(A.last_seen_at)})]},R))})]})}),a.jsx(Bt,{type:"engagement",pagination:v.pagination||{},onPageChange:Ft})]}),t==="events"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"monitor-table-header",children:[a.jsx("span",{className:"monitor-table-title",children:"이벤트 목록"}),a.jsxs("div",{className:"monitor-filter-group",children:[a.jsxs("label",{className:"monitor-checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:w,onChange:A=>g(A.target.checked)}),"채팅 포함"]}),a.jsxs("select",{className:"monitor-filter",value:N,onChange:A=>z(A.target.value),children:[a.jsx("option",{value:"all",children:"전체"}),a.jsx("option",{value:"donation",children:"후원"}),a.jsx("option",{value:"subscribe",children:"구독"}),a.jsx("option",{value:"follow",children:"팔로우"}),a.jsx("option",{value:"chat",children:"채팅만"})]})]})]}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"타입"}),a.jsx("th",{children:"닉네임"}),a.jsx("th",{children:"메시지"}),a.jsx("th",{children:"금액"}),a.jsx("th",{children:"채널"}),a.jsx("th",{children:"시간"})]})}),a.jsx("tbody",{children:f.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"monitor-empty",children:"데이터가 없습니다"})}):f.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{children:a.jsx(Ji,{type:A.event_type})}),a.jsx("td",{children:A.actor_nickname||"-"}),a.jsx("td",{className:"monitor-truncate",title:A.message,children:A.message||"-"}),a.jsx("td",{className:"monitor-number",children:A.amount?Kt(A.amount):"-"}),a.jsx("td",{children:A.target_channel_id||"-"}),a.jsx("td",{children:_t(A.event_timestamp)})]},R))})]})}),a.jsx(Bt,{type:"events",pagination:f.pagination||{},onPageChange:is})]}),t==="segments"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"monitor-table-header",children:a.jsx("span",{className:"monitor-table-title",children:"방송 세그먼트"})}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"방송자"}),a.jsx("th",{children:"카테고리"}),a.jsx("th",{children:"최고 시청자"}),a.jsx("th",{children:"평균 시청자"}),a.jsx("th",{children:"시작"}),a.jsx("th",{children:"종료"})]})}),a.jsx("tbody",{children:p.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"monitor-empty",children:"데이터가 없습니다"})}):p.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{children:A.broadcaster_nickname||"-"}),a.jsx("td",{children:A.category_name||"-"}),a.jsx("td",{className:"monitor-number",children:Y(A.peak_viewer_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.avg_viewer_count)}),a.jsx("td",{children:_t(A.segment_started_at)}),a.jsx("td",{children:_t(A.segment_ended_at)})]},R))})]})}),a.jsx(Bt,{type:"segments",pagination:p.pagination||{},onPageChange:It})]}),t==="categories"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"monitor-table-header",children:[a.jsx("span",{className:"monitor-table-title",children:"카테고리 목록"}),a.jsxs("select",{className:"monitor-filter",value:O,onChange:A=>L(A.target.value),children:[a.jsx("option",{value:"all",children:"전체"}),a.jsx("option",{value:"soop",children:"SOOP"}),a.jsx("option",{value:"chzzk",children:"Chzzk"})]})]}),a.jsx("div",{className:"monitor-table-wrapper",children:a.jsxs("table",{className:"monitor-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"썸네일"}),a.jsx("th",{children:"플랫폼"}),a.jsx("th",{children:"카테고리명"}),a.jsx("th",{children:"어제 누적시청자"}),a.jsx("th",{children:"어제 방송 수"}),a.jsx("th",{children:"수집일"})]})}),a.jsx("tbody",{children:b.data?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"monitor-empty",children:"데이터가 없습니다"})}):b.data?.map((A,R)=>a.jsxs("tr",{children:[a.jsx("td",{children:A.thumbnail_url&&A.thumbnail_url.includes("category_img")?a.jsx("img",{src:A.thumbnail_url,alt:A.category_name,className:"monitor-category-thumb"}):a.jsx("span",{className:"monitor-category-initial",children:(A.category_name||"?")[0].toUpperCase()})}),a.jsx("td",{children:a.jsx(kt,{platform:A.platform})}),a.jsx("td",{children:A.category_name||"-"}),a.jsx("td",{className:"monitor-number",children:Y(A.viewer_count)}),a.jsx("td",{className:"monitor-number",children:Y(A.streamer_count)}),a.jsx("td",{children:_t(A.updated_at)})]},R))})]})}),a.jsx(Bt,{type:"categories",pagination:b.pagination||{},onPageChange:ns})]})]}),ue&&a.jsx("div",{className:"monitor-modal-overlay",onClick:()=>fe(!1),children:a.jsxs("div",{className:"monitor-modal",onClick:A=>A.stopPropagation(),children:[a.jsxs("div",{className:"monitor-modal-header",children:[V&&a.jsxs("div",{className:"monitor-modal-profile",children:[a.jsx("div",{className:"monitor-modal-avatar",children:V.profile_image?a.jsx("img",{src:V.profile_image,alt:V.nickname}):a.jsx("span",{children:(V.nickname||"?")[0].toUpperCase()})}),a.jsxs("div",{className:"monitor-modal-info",children:[a.jsx("h2",{children:V.nickname}),a.jsxs("div",{className:"monitor-modal-meta",children:[a.jsx(kt,{platform:V.platform}),a.jsx(Ji,{type:V.person_type})]})]})]}),a.jsx("button",{className:"monitor-modal-close",onClick:()=>fe(!1),children:a.jsx(ps,{size:20})})]}),Pe?a.jsxs("div",{className:"monitor-modal-loading",children:[a.jsx(he,{size:24,className:"spinning"}),"로딩 중..."]}):V&&a.jsxs("div",{className:"monitor-modal-body",children:[a.jsxs("div",{className:"monitor-modal-stats",children:[a.jsxs("div",{className:"monitor-modal-stat",children:[a.jsx("h4",{children:"팔로워"}),a.jsx("div",{className:"value",children:Y(V.follower_count)})]}),a.jsxs("div",{className:"monitor-modal-stat",children:[a.jsx("h4",{children:"채팅 수"}),a.jsx("div",{className:"value",children:Y(V.total_chat_count)})]}),a.jsxs("div",{className:"monitor-modal-stat",children:[a.jsx("h4",{children:"후원 횟수"}),a.jsx("div",{className:"value",children:Y(V.total_donation_count)})]}),a.jsxs("div",{className:"monitor-modal-stat",children:[a.jsx("h4",{children:"후원 금액"}),a.jsx("div",{className:"value",children:Kt(V.total_donation_amount)})]})]}),a.jsxs("div",{className:"monitor-modal-section",children:[a.jsx("h3",{children:"최근 활동"}),a.jsxs("p",{children:["마지막 활동: ",_t(V.last_seen_at)]}),V.channel_id&&a.jsxs("p",{children:["채널 ID: ",V.channel_id]})]})]})]})})]})},tx=()=>{const[s,e]=y.useState(!0),[t,i]=y.useState([]),[n,r]=y.useState(null),[o,l]=y.useState(null),[c,d]=y.useState(!1),[h,u]=y.useState(""),[f,m]=y.useState("total_chats"),[p,x]=y.useState(1),[b,j]=y.useState(1),[v,S]=y.useState(0),[_,k]=y.useState(null),{accessToken:C}=Et();y.useEffect(()=>{M()},[f,p]),y.useEffect(()=>{const P=setTimeout(()=>{x(1),M()},300);return()=>clearTimeout(P)},[h]);const M=async()=>{e(!0),k(null);const P={"Content-Type":"application/json",...C&&{Authorization:`Bearer ${C}`}};try{const E=new URLSearchParams({search:h,sortBy:f,sortOrder:"desc",page:p.toString(),limit:"30"}),H=await fetch(`${Z}/api/stats/viewers/list?${E}`,{headers:P});if(H.ok){const $=await H.json();i($.viewers||[]),j($.totalPages||1),S($.totalCount||0)}else i([]),k("데이터를 불러오는데 실패했습니다.")}catch(E){console.error("Failed to fetch viewers:",E),k("서버 연결에 실패했습니다."),i([])}finally{e(!1)}},N=async P=>{d(!0);const E={"Content-Type":"application/json",...C&&{Authorization:`Bearer ${C}`}};try{const H=await fetch(`${Z}/api/stats/viewers/${P}/journey`,{headers:E});if(H.ok){const $=await H.json();l($)}else l(null)}catch(H){console.error("Failed to fetch viewer journey:",H),l(null)}finally{d(!1)}},z=P=>{r(P),N(P.id)},w=()=>{r(null),l(null)},g=P=>{if(!P||P===0)return"0분";const E=Math.floor(P/3600),H=Math.floor(P%3600/60);return E===0?`${H}분`:H===0?`${E}시간`:`${E}시간 ${H}분`},O=P=>P>=1e6?(P/1e6).toFixed(1)+"M":P>=1e3?(P/1e3).toFixed(1)+"K":P?.toLocaleString()||"0",L=P=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(P||0),T=P=>{if(!P)return"-";const E=new Date(P),$=new Date-E,ue=Math.floor($/(1e3*60)),fe=Math.floor($/(1e3*60*60)),V=Math.floor($/(1e3*60*60*24));return ue<60?`${ue}분 전`:fe<24?`${fe}시간 전`:V<7?`${V}일 전`:V<30?`${Math.floor(V/7)}주 전`:`${Math.floor(V/30)}개월 전`},D=P=>({soop:"/assets/logos/soop.png",chzzk:"/assets/logos/chzzk.png",youtube:"/assets/logos/youtube.png"})[P?.toLowerCase()];return n&&o?a.jsxs("div",{className:"admin-viewer-journey",children:[a.jsxs("button",{className:"admin-back-btn",onClick:w,children:[a.jsx(oo,{size:18}),a.jsx("span",{children:"시청자 목록으로"})]}),c?a.jsx(We,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"viewer-detail-header",children:[a.jsx("div",{className:"viewer-avatar-large",children:o.viewer.profileImage?a.jsx("img",{src:o.viewer.profileImage,alt:o.viewer.nickname}):a.jsx(ge,{size:40})}),a.jsxs("div",{className:"viewer-header-info",children:[a.jsx("h2",{children:o.viewer.nickname}),a.jsxs("div",{className:"viewer-meta",children:[o.viewer.platform&&a.jsx("span",{className:"platform-badge",children:D(o.viewer.platform)?a.jsx("img",{src:D(o.viewer.platform),alt:o.viewer.platform}):o.viewer.platform}),a.jsxs("span",{className:"first-seen",children:[a.jsx(ht,{size:14}),"첫 방문: ",o.viewer.firstSeen?new Date(o.viewer.firstSeen).toLocaleDateString("ko-KR"):"-"]})]})]})]}),a.jsxs("div",{className:"viewer-stats-grid",children:[a.jsxs("div",{className:"viewer-stat-card",children:[a.jsx("div",{className:"stat-icon",style:{backgroundColor:"#3b82f620",color:"#3b82f6"},children:a.jsx(At,{size:20})}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-label",children:"총 시청 시간"}),a.jsx("span",{className:"stat-value",children:g(o.totals.totalWatchTime)})]})]}),a.jsxs("div",{className:"viewer-stat-card",children:[a.jsx("div",{className:"stat-icon",style:{backgroundColor:"#10b98120",color:"#10b981"},children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-label",children:"총 채팅"}),a.jsxs("span",{className:"stat-value",children:[O(o.totals.totalChats),"회"]})]})]}),a.jsxs("div",{className:"viewer-stat-card",children:[a.jsx("div",{className:"stat-icon",style:{backgroundColor:"#f59e0b20",color:"#f59e0b"},children:a.jsx(Ce,{size:20})}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-label",children:"총 후원"}),a.jsxs("span",{className:"stat-value",children:[o.totals.totalDonations,"회"]}),a.jsx("span",{className:"stat-subvalue",children:L(o.totals.totalAmount)})]})]}),a.jsxs("div",{className:"viewer-stat-card",children:[a.jsx("div",{className:"stat-icon",style:{backgroundColor:"#8b5cf620",color:"#8b5cf6"},children:a.jsx(Kn,{size:20})}),a.jsxs("div",{className:"stat-content",children:[a.jsx("span",{className:"stat-label",children:"시청 채널"}),a.jsxs("span",{className:"stat-value",children:[o.channels.length,"개"]})]})]})]}),a.jsxs("div",{className:"journey-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx(Kn,{size:18}),a.jsx("h3",{children:"시청한 채널"}),a.jsxs("span",{className:"section-count",children:[o.channels.length,"개"]})]}),a.jsx("div",{className:"journey-list",children:o.channels.length>0?o.channels.map((P,E)=>a.jsxs("div",{className:"journey-item",children:[a.jsxs("div",{className:"journey-rank",children:["#",E+1]}),a.jsx("div",{className:"journey-avatar",children:P.streamerImage?a.jsx("img",{src:P.streamerImage,alt:P.streamerName}):a.jsx(ge,{size:24})}),a.jsxs("div",{className:"journey-info",children:[a.jsx("span",{className:"journey-name",children:P.streamerName}),a.jsxs("span",{className:"journey-meta",children:[P.platform&&D(P.platform)&&a.jsx("img",{src:D(P.platform),alt:P.platform,className:"platform-mini"}),a.jsxs("span",{children:[P.visitCount,"회 방문"]})]})]}),a.jsxs("div",{className:"journey-value",children:[a.jsx("span",{className:"value-main",children:g(P.watchSeconds)}),a.jsxs("span",{className:"value-sub",children:["마지막 방문: ",T(P.lastVisit)]})]})]},`${P.channelId}-${E}`)):a.jsx("div",{className:"empty-state",children:"시청 기록이 없습니다."})})]}),a.jsxs("div",{className:"journey-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx(ve,{size:18}),a.jsx("h3",{children:"시청한 카테고리"}),a.jsxs("span",{className:"section-count",children:[o.categories.length,"개"]})]}),a.jsx("div",{className:"journey-list",children:o.categories.length>0?o.categories.map((P,E)=>a.jsxs("div",{className:"journey-item",children:[a.jsxs("div",{className:"journey-rank",children:["#",E+1]}),a.jsx("div",{className:"journey-avatar category-avatar",children:P.categoryImage?a.jsx("img",{src:P.categoryImage,alt:P.categoryName}):a.jsx(ve,{size:24})}),a.jsxs("div",{className:"journey-info",children:[a.jsx("span",{className:"journey-name",children:P.categoryName}),a.jsxs("span",{className:"journey-meta",children:[P.streamersWatched,"개 채널에서 시청"]})]}),a.jsx("div",{className:"journey-value",children:a.jsx("span",{className:"value-main",children:g(P.watchSeconds)})})]},`${P.categoryId}-${E}`)):a.jsx("div",{className:"empty-state",children:"카테고리 기록이 없습니다."})})]}),a.jsxs("div",{className:"journey-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx(He,{size:18}),a.jsx("h3",{children:"채널별 활동"})]}),a.jsxs("div",{className:"engagement-table",children:[a.jsxs("div",{className:"engagement-header",children:[a.jsx("span",{children:"채널"}),a.jsx("span",{children:"채팅"}),a.jsx("span",{children:"후원"}),a.jsx("span",{children:"후원 금액"}),a.jsx("span",{children:"마지막 활동"})]}),o.engagement.length>0?o.engagement.map((P,E)=>a.jsxs("div",{className:"engagement-row",children:[a.jsxs("span",{className:"engagement-channel",children:[P.platform&&D(P.platform)&&a.jsx("img",{src:D(P.platform),alt:P.platform,className:"platform-mini"}),P.streamerName]}),a.jsxs("span",{children:[O(P.chatCount),"회"]}),a.jsxs("span",{children:[P.donationCount,"회"]}),a.jsx("span",{className:"amount",children:L(P.donationAmount)}),a.jsx("span",{className:"time",children:T(P.lastSeen)})]},`${P.channelId}-${E}`)):a.jsx("div",{className:"empty-state",children:"활동 기록이 없습니다."})]})]}),a.jsxs("div",{className:"journey-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx(Yt,{size:18}),a.jsx("h3",{children:"최근 시청 세션"})]}),a.jsx("div",{className:"sessions-list",children:o.recentSessions.length>0?o.recentSessions.map(P=>a.jsxs("div",{className:"session-item",children:[a.jsx("div",{className:"session-time",children:P.startedAt?new Date(P.startedAt).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),a.jsxs("div",{className:"session-info",children:[a.jsxs("span",{className:"session-channel",children:[P.platform&&D(P.platform)&&a.jsx("img",{src:D(P.platform),alt:P.platform,className:"platform-mini"}),P.streamerName]}),P.categoryId&&a.jsx("span",{className:"session-category",children:P.categoryId})]}),a.jsx("div",{className:"session-duration",children:g(P.durationSeconds)})]},P.id)):a.jsx("div",{className:"empty-state",children:"세션 기록이 없습니다."})})]})]})]}):a.jsxs("div",{className:"admin-viewer-journey",children:[a.jsxs("div",{className:"admin-toolbar",children:[a.jsxs("div",{className:"search-box",children:[a.jsx(bn,{size:18}),a.jsx("input",{type:"text",placeholder:"닉네임으로 검색...",value:h,onChange:P=>u(P.target.value)})]}),a.jsx("div",{className:"sort-selector",children:a.jsxs("select",{value:f,onChange:P=>{m(P.target.value),x(1)},children:[a.jsx("option",{value:"total_chats",children:"채팅 수"}),a.jsx("option",{value:"total_amount",children:"후원 금액"}),a.jsx("option",{value:"total_watch_time",children:"시청 시간"}),a.jsx("option",{value:"last_activity",children:"최근 활동"})]})}),a.jsx("button",{className:"admin-refresh-btn",onClick:M,disabled:s,children:a.jsx(he,{size:16,className:s?"spin":""})})]}),a.jsxs("div",{className:"viewer-summary",children:[a.jsx(ge,{size:18}),a.jsxs("span",{children:["총 ",O(v),"명의 시청자"]})]}),_&&a.jsxs("div",{className:"mock-data-notice",style:{backgroundColor:"#fef3c7",borderColor:"#f59e0b"},children:[a.jsx("span",{className:"notice-icon",children:"⚠️"}),a.jsx("span",{children:_})]}),s?a.jsx(We,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"viewers-list",children:t.length>0?t.map((P,E)=>a.jsxs("div",{className:"viewer-card",onClick:()=>z(P),children:[a.jsxs("div",{className:"viewer-rank",children:["#",(p-1)*30+E+1]}),a.jsx("div",{className:"viewer-avatar",children:P.profileImage?a.jsx("img",{src:P.profileImage,alt:P.nickname}):a.jsx(ge,{size:28})}),a.jsxs("div",{className:"viewer-info",children:[a.jsx("span",{className:"viewer-name",children:P.nickname}),a.jsxs("span",{className:"viewer-meta",children:[P.platform&&D(P.platform)&&a.jsx("img",{src:D(P.platform),alt:P.platform,className:"platform-mini"}),a.jsxs("span",{children:[P.channelsWatched,"개 채널"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["마지막 활동: ",T(P.lastActivity)]})]})]}),a.jsxs("div",{className:"viewer-stats",children:[a.jsxs("div",{className:"mini-stat",children:[a.jsx(Mt,{size:14}),a.jsx("span",{children:O(P.totalChats)})]}),a.jsxs("div",{className:"mini-stat",children:[a.jsx(Ce,{size:14}),a.jsx("span",{children:O(P.totalAmount)})]}),a.jsxs("div",{className:"mini-stat",children:[a.jsx(At,{size:14}),a.jsx("span",{children:g(P.totalWatchTime)})]})]}),a.jsx(Ds,{size:18,className:"viewer-arrow"})]},P.id)):a.jsxs("div",{className:"empty-state",children:[a.jsx(ge,{size:48,style:{color:"var(--text-muted)",marginBottom:"16px"}}),a.jsx("p",{children:"시청자 데이터가 없습니다."}),a.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"플랫폼 연결 후 시청자 데이터가 수집됩니다."})]})}),b>1&&a.jsxs("div",{className:"pagination",children:[a.jsx("button",{onClick:()=>x(P=>Math.max(1,P-1)),disabled:p===1,children:"이전"}),a.jsxs("span",{children:[p," / ",b]}),a.jsx("button",{onClick:()=>x(P=>Math.min(b,P+1)),disabled:p===b,children:"다음"})]})]})]})},Qs="",sx={chat:{label:"채팅",icon:a.jsx(Mt,{size:16})},alert:{label:"알림",icon:a.jsx(gc,{size:16})},goal:{label:"목표",icon:a.jsx(Ot,{size:16})},ticker:{label:"전광판",icon:a.jsx(pc,{size:16})},subtitle:{label:"자막",icon:a.jsx(mc,{size:16})},roulette:{label:"룰렛",icon:a.jsx(fc,{size:16})},emoji:{label:"이모지",icon:a.jsx(uc,{size:16})},voting:{label:"투표",icon:a.jsx(hc,{size:16})},credits:{label:"크레딧",icon:a.jsx(dc,{size:16})},ad:{label:"광고",icon:a.jsx(bi,{size:16})},package:{label:"패키지",icon:a.jsx(co,{size:16})}},ix=["저작권 문제가 있습니다.","품질이 마켓플레이스 기준에 미달합니다.","부적절한 콘텐츠가 포함되어 있습니다.","기술적 문제가 발견되었습니다.","유사한 디자인이 이미 등록되어 있습니다."],nx=()=>{const{token:s}=Et(),[e,t]=y.useState([]),[i,n]=y.useState({pending:0,approved:0,rejected:0}),[r,o]=y.useState(!0),[l,c]=y.useState(null),[d,h]=y.useState(null),[u,f]=y.useState(""),[m,p]=y.useState(null),[x,b]=y.useState(null),j=async()=>{o(!0);try{const N=await fetch(`${Qs}/api/admin/designs/pending`,{headers:{Authorization:`Bearer ${s}`}});if(N.ok){const z=await N.json();t(z.designs||[])}}catch(N){console.error("Failed to fetch pending designs:",N)}finally{o(!1)}},v=async()=>{try{const N=await fetch(`${Qs}/api/admin/designs/stats`,{headers:{Authorization:`Bearer ${s}`}});if(N.ok){const z=await N.json();n(z.stats||{pending:0,approved:0,rejected:0})}}catch(N){console.error("Failed to fetch design stats:",N)}};y.useEffect(()=>{s&&(j(),v())},[s]);const S=async N=>{if(confirm(`이 디자인을 승인하시겠습니까?
승인 시 마켓플레이스에 바로 등록됩니다.`)){c(N);try{const z=await fetch(`${Qs}/api/admin/designs/${N}/approve`,{method:"POST",headers:{Authorization:`Bearer ${s}`}});if(z.ok)t(e.filter(w=>w.id!==N)),v(),alert("승인되었습니다. 마켓플레이스에 등록되었습니다.");else{const w=await z.json();alert(w.error||"승인에 실패했습니다.")}}catch{alert("오류가 발생했습니다.")}finally{c(null)}}},_=async()=>{if(!d||!u.trim()){alert("거절 사유를 입력해주세요.");return}c(d.id);try{const N=await fetch(`${Qs}/api/admin/designs/${d.id}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({reason:u})});if(N.ok)t(e.filter(z=>z.id!==d.id)),v(),h(null),f(""),alert("거절되었습니다. 사용자에게 사유가 전달됩니다.");else{const z=await N.json();alert(z.error||"거절에 실패했습니다.")}}catch{alert("오류가 발생했습니다.")}finally{c(null)}},k=N=>sx[N]||{label:N,icon:a.jsx(co,{size:16})},C=N=>{if(!N)return"";const z=new Date(N),g=new Date-z,O=Math.floor(g/(1e3*60*60)),L=Math.floor(g/(1e3*60*60*24));return O<1?"방금 전":O<24?`${O}시간 전`:L<7?`${L}일 전`:z.toLocaleDateString("ko-KR")},M=N=>{if(!N)return{};if(typeof N=="string")try{return JSON.parse(N)}catch{return{}}return N};return a.jsxs("div",{className:"admin-design-review",children:[a.jsxs("div",{className:"review-header",children:[a.jsxs("div",{className:"review-header-left",children:[a.jsx("h2",{children:"디자인 심사"}),a.jsxs("span",{className:"pending-count",children:[i.pending,"건 대기중"]})]}),a.jsxs("button",{className:"refresh-btn",onClick:()=>{j(),v()},disabled:r,children:[a.jsx(he,{size:18,className:r?"spin":""}),"새로고침"]})]}),a.jsxs("div",{className:"review-stats",children:[a.jsxs("div",{className:"stat-card pending",children:[a.jsx(At,{size:20}),a.jsxs("div",{className:"stat-info",children:[a.jsx("span",{className:"stat-value",children:i.pending}),a.jsx("span",{className:"stat-label",children:"심사 대기"})]})]}),a.jsxs("div",{className:"stat-card approved",children:[a.jsx(Fs,{size:20}),a.jsxs("div",{className:"stat-info",children:[a.jsx("span",{className:"stat-value",children:i.approved}),a.jsx("span",{className:"stat-label",children:"승인됨"})]})]}),a.jsxs("div",{className:"stat-card rejected",children:[a.jsx(ps,{size:20}),a.jsxs("div",{className:"stat-info",children:[a.jsx("span",{className:"stat-value",children:i.rejected}),a.jsx("span",{className:"stat-label",children:"거절됨"})]})]})]}),a.jsx("div",{className:"review-list",children:r?a.jsxs("div",{className:"review-loading",children:[a.jsx(he,{size:32,className:"spin"}),a.jsx("p",{children:"불러오는 중..."})]}):e.length===0?a.jsxs("div",{className:"review-empty",children:[a.jsx(Fs,{size:48}),a.jsx("h3",{children:"심사 대기 중인 디자인이 없습니다"}),a.jsx("p",{children:"모든 디자인이 처리되었습니다."})]}):e.map(N=>{const z=k(N.category),w=M(N.design_data),g=x===N.id;return a.jsxs("div",{className:"review-card",children:[a.jsxs("div",{className:"review-card-main",children:[a.jsx("div",{className:"review-thumbnail",children:N.thumbnail_url?a.jsx("img",{src:N.thumbnail_url,alt:N.name}):a.jsx("div",{className:"thumbnail-placeholder",children:z.icon})}),a.jsxs("div",{className:"review-info",children:[a.jsxs("div",{className:"review-title-row",children:[a.jsx("h3",{children:N.name}),a.jsxs("span",{className:"category-badge",children:[z.icon,z.label]})]}),N.description&&a.jsx("p",{className:"review-description",children:N.description}),a.jsxs("div",{className:"review-meta",children:[a.jsxs("span",{className:"meta-item",children:[a.jsx(eo,{size:14}),N.user_email||"알 수 없음"]}),a.jsxs("span",{className:"meta-item",children:[a.jsx(At,{size:14}),C(N.submitted_at)]})]}),N.tags&&a.jsx("div",{className:"review-tags",children:N.tags.split(",").map((O,L)=>a.jsx("span",{className:"tag",children:O.trim()},L))})]}),a.jsxs("div",{className:"review-actions",children:[a.jsx("button",{className:"action-btn preview",onClick:()=>p(N),title:"미리보기",children:a.jsx(Yt,{size:18})}),a.jsxs("button",{className:"action-btn approve",onClick:()=>S(N.id),disabled:l===N.id,title:"승인",children:[l===N.id?a.jsx(he,{size:18,className:"spin"}):a.jsx(Fs,{size:18}),"승인"]}),a.jsxs("button",{className:"action-btn reject",onClick:()=>{h(N),f("")},disabled:l===N.id,title:"거절",children:[a.jsx(ps,{size:18}),"거절"]}),a.jsx("button",{className:"expand-btn",onClick:()=>b(g?null:N.id),children:g?a.jsx(to,{size:18}):a.jsx(so,{size:18})})]})]}),g&&a.jsxs("div",{className:"review-card-detail",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h4",{children:"디자인 데이터"}),a.jsx("pre",{className:"json-preview",children:JSON.stringify(w,null,2)})]}),N.custom_css&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h4",{children:"커스텀 CSS"}),a.jsx("pre",{className:"css-preview",children:N.custom_css})]})]})]},N.id)})}),d&&a.jsx("div",{className:"modal-overlay",onClick:()=>h(null),children:a.jsxs("div",{className:"modal-content reject-modal",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"디자인 거절"}),a.jsx("button",{className:"modal-close",onClick:()=>h(null),children:"×"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"reject-design-name",children:a.jsx("strong",{children:d.name})}),a.jsxs("div",{className:"quick-reasons",children:[a.jsx("p",{children:"빠른 선택:"}),a.jsx("div",{className:"quick-reason-buttons",children:ix.map((N,z)=>a.jsx("button",{className:`quick-reason-btn ${u===N?"active":""}`,onClick:()=>f(N),children:N},z))})]}),a.jsxs("div",{className:"reason-input",children:[a.jsx("label",{children:"거절 사유 (필수)"}),a.jsx("textarea",{value:u,onChange:N=>f(N.target.value),placeholder:"거절 사유를 입력하세요. 사용자에게 전달됩니다.",rows:4})]}),a.jsxs("div",{className:"reject-warning",children:[a.jsx(cc,{size:16}),a.jsx("span",{children:"거절 사유는 디자인 제출자에게 전달됩니다."})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"modal-btn secondary",onClick:()=>h(null),children:"취소"}),a.jsxs("button",{className:"modal-btn danger",onClick:_,disabled:!u.trim()||l===d.id,children:[l===d.id?a.jsx(he,{size:16,className:"spin"}):a.jsx(ps,{size:16}),"거절하기"]})]})]})}),m&&a.jsx("div",{className:"modal-overlay",onClick:()=>p(null),children:a.jsxs("div",{className:"modal-content preview-modal",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"디자인 미리보기"}),a.jsx("button",{className:"modal-close",onClick:()=>p(null),children:"×"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"preview-canvas",children:a.jsxs("div",{className:"preview-placeholder",children:[k(m.category).icon,a.jsx("p",{children:m.name}),a.jsxs("span",{children:[k(m.category).label," 미리보기"]})]})}),m.custom_css&&a.jsx("style",{children:m.custom_css})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"modal-btn secondary",onClick:()=>p(null),children:"닫기"}),a.jsxs("button",{className:"modal-btn primary",onClick:()=>{S(m.id),p(null)},children:[a.jsx(Fs,{size:16}),"승인하기"]})]})]})})]})},lx=()=>{const[s,e]=y.useState("discovery"),[t,i]=y.useState(null),[n,r]=y.useState("streamers"),[o,l]=y.useState(!1),c=xc(),d=()=>{c("/")},h=b=>{r(s),i(b),e("streamer-detail")},u=()=>{i(null),e(n)},f=b=>{e(b),l(!1)},m=[{category:"NEXON 분석",items:[{id:"discovery",label:"인플루언서 발굴",icon:a.jsx(bn,{size:18})},{id:"campaign",label:"캠페인 성과",icon:a.jsx(Qr,{size:18})}]},{category:"데이터 모니터",items:[{id:"monitor",label:"스트리밍 모니터",icon:a.jsx(vn,{size:18})},{id:"viewer-journey",label:"시청자 동선",icon:a.jsx(kc,{size:18})}]},{category:"콘텐츠 관리",items:[{id:"design-review",label:"디자인 심사",icon:a.jsx(yc,{size:18})}]},{category:"기존 기능",items:[{id:"overview",label:"개요",icon:a.jsx(wc,{size:18})},{id:"streamers",label:"스트리머 관리",icon:a.jsx(ge,{size:18})},{id:"revenue",label:"수익 분석",icon:a.jsx(Ce,{size:18})},{id:"platforms",label:"플랫폼 비교",icon:a.jsx(lo,{size:18})},{id:"viewership",label:"스트리머 분석",icon:a.jsx(He,{size:18})},{id:"game-analytics",label:"게임 데이터",icon:a.jsx(ve,{size:18})}]}],p=()=>{switch(s){case"discovery":return a.jsx(ma,{onStreamerSelect:h});case"campaign":return a.jsx(Mh,{});case"monitor":return a.jsx(ex,{});case"viewer-journey":return a.jsx(tx,{});case"design-review":return a.jsx(nx,{});case"overview":return a.jsx(yh,{});case"streamers":return a.jsx(jh,{onStreamerSelect:h});case"revenue":return a.jsx(_h,{});case"platforms":return a.jsx(kh,{});case"viewership":return a.jsx(wh,{onStreamerSelect:h});case"game-analytics":return a.jsx(Ch,{onStreamerSelect:h});case"streamer-detail":return a.jsx(Sh,{streamerId:t,onBack:u});default:return a.jsx(ma,{onStreamerSelect:h})}},x=()=>{if(s==="streamer-detail")return"스트리머 상세";for(const b of m){const j=b.items.find(v=>v.id===s);if(j)return j.label}return"인플루언서 발굴"};return a.jsxs("div",{className:"admin-layout",children:[a.jsx("div",{className:`admin-mobile-overlay ${o?"active":""}`,onClick:()=>l(!1)}),a.jsxs("aside",{className:`admin-sidebar ${o?"mobile-open":""}`,children:[a.jsxs("div",{className:"admin-sidebar-header",children:[a.jsx(Hn,{size:24,className:"admin-shield-icon"}),a.jsx("span",{children:"관리자 대시보드"}),a.jsx("button",{className:"admin-mobile-close-btn",onClick:()=>l(!1),children:a.jsx(ps,{size:20})})]}),a.jsx("nav",{className:"admin-nav",children:m.map((b,j)=>a.jsxs(bc.Fragment,{children:[a.jsx("div",{className:`admin-nav-category ${j===0?"first":""}`,children:b.category}),b.items.map(v=>a.jsxs("button",{className:`admin-nav-item ${s===v.id?"active":""}`,onClick:()=>f(v.id),children:[v.icon,a.jsx("span",{children:v.label})]},v.id))]},b.category))})]}),a.jsxs("main",{className:"admin-main",children:[a.jsxs("header",{className:"admin-header",children:[a.jsx("button",{className:"admin-mobile-menu-btn",onClick:()=>l(!0),children:a.jsx(vc,{size:22})}),a.jsx("h1",{children:x()}),a.jsxs("div",{className:"admin-header-actions",children:[a.jsxs("button",{className:"admin-streamer-mode-btn",onClick:d,children:[a.jsx(bi,{size:18}),a.jsx("span",{children:"스트리머 모드"})]}),a.jsxs("span",{className:"admin-badge",children:[a.jsx(Hn,{size:14}),"관리자"]})]})]}),a.jsx("div",{className:"admin-content",children:p()})]})]})};export{lx as default};
