# SOOP 라이브 채팅 WebSocket 연결 테스트 보고서

## 테스트 개요
- **테스트 일시**: 2026년 1월 15일
- **대상 방송**: 봉준 BJ (khm11903)
- **방송 번호**: 290778358
- **시청자 수**: 약 57,000명

## 채팅 서버 정보 (API 응답)

| 항목 | 값 |
|------|-----|
| 채팅 도메인 | `chat-DEE93642.sooplive.co.kr` |
| 채팅 포트 | 8040 |
| 채팅 번호 | 270 |
| IP 주소 | 222.233.54.66 |
| 방송 제목 | 봉준 짝 무정촌 롤 스트리머특집 |

## WebSocket 연결 테스트 결과

### 브라우저 WebSocket (WSS) 테스트

| URL 형식 | 결과 |
|----------|------|
| `wss://chat-DEE93642.sooplive.co.kr:8040/Websocket` | ❌ TIMEOUT |
| `wss://chat-DEE93642.sooplive.co.kr:443/Websocket` | ❌ ERROR |
| `wss://chat.sooplive.co.kr/Websocket` | ❌ ERROR |
| `wss://chat-DEE93642.sooplive.co.kr:8040/` | ❌ TIMEOUT |

### 분석 결과

SOOP(구 아프리카TV)의 채팅 시스템은 **표준 WebSocket(WSS) 프로토콜을 사용하지 않습니다**.

대신 다음과 같은 방식을 사용하는 것으로 확인됩니다:
1. **일반 TCP 소켓** (포트 8040) - 브라우저에서 직접 연결 불가
2. **커스텀 바이너리 프로토콜** - 자체 패킷 구조 사용

## 채팅 기능 동작 확인

채팅이 실시간으로 정상 작동하고 있음을 확인했습니다:

### DOM 구조
- 채팅 컨테이너: `.chatbox > .chatting-item-wrap`
- 메시지 요소: `.chatting-list-item`
- 사용자명: `.username`
- 메시지 내용: `.message-text`

### 실시간 메시지 샘플 (테스트 시점)
```
F예민하네~ : ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ
F카레찐빵 : ㄱㅇㅇ
F수월풍 : ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ
F#Star_츠암종 : ㅋㅋㅋㅋ
```

## 결론

1. **SOOP 채팅 서버 연결**: API를 통해 채팅 서버 정보(도메인, 포트, 채팅번호)를 정상적으로 가져올 수 있습니다.

2. **WebSocket 연결 제한**: SOOP은 표준 WSS(WebSocket Secure) 프로토콜을 사용하지 않아 브라우저에서 직접 WebSocket 연결이 불가능합니다.

3. **실제 채팅 동작**: 웹 페이지의 채팅 기능은 정상 작동하며, 실시간으로 메시지가 업데이트됩니다.

4. **연결 방식 추정**: SOOP은 Flash Socket 또는 커스텀 TCP 소켓 프로토콜을 사용하며, 웹 페이지에서는 내부적으로 다른 통신 방식(예: iframe을 통한 메시지 전달, 또는 서버 측 프록시)을 사용하는 것으로 보입니다.

## 참고 사항

SOOP 채팅에 프로그래매틱하게 연결하려면:
- Python의 `socket` 라이브러리를 사용한 TCP 연결
- SOOP 자체 패킷 프로토콜 구현 필요
- 서비스코드, 패킷타입, 데이터 길이 등을 포함한 바이너리 헤더 구성

---
*본 테스트는 봉준 BJ의 라이브 방송을 대상으로 수행되었습니다.*
